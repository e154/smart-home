FROM debian:12-slim
MAINTAINER Filippov Alex <support@e154.ru>
RUN apt-get update \
    && apt-get install -y --no-install-recommends ca-certificates iputils-ping
RUN update-ca-certificates
ENTRYPOINT ["/gate"]
USER nobody
ADD . /

EXPOSE 8080
EXPOSE 8443

ENV API_HTTP_PORT="8080"
ENV API_DEBUG="false"
ENV API_GZIP="true"
ENV DOMAIN="localhost"
ENV PPROF="false"
ENV HTTPS="false"
ENV PROXY_TIMEOUT="1000"
ENV PROXY_IDLE_TIMEOUT="60000"
ENV PROXY_SECRET_KEY=""

VOLUME $APP_DIR/conf
