---
weight: 1
title: Обзор
groups:
    - api
---

<div class="right">

<pre>
<code class="language-json hljs">
Authorization: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
</code>
</pre>

</div>

<div class="middle">

<h2 id="overview">Обзор</h2>

<p><strong>Smart home</strong> <strong>API</strong> позволяет управлять системой <strong>Smart home</strong>, производить настройку конфигурации. Исполнять комманды на устройствах подключенных к системе.
<strong>Smart home</strong> <strong>API</strong> организован на основе <strong>REST</strong> запросов по верх HTTP протокола. 
Такая связка была выбрана исключительно из простоты поддержания, и разработки нового функционала. 
Все запросы должны быть в формате JSON и кодировке UTF-8 *(Content-Type: application/json; charset=utf-8)*. 
Заголовок Accept будут игнорироваться для всех запросов.</p>

<pre>
<code class="language-bash">
> $ curl -i https://localhost/api/v1/action..
</code>
</pre>

</div>

<div class="right">
> Пример токена авторизации
</div>

<div class="middle">

<h2 id="security">Безопасность</h2>

Сервер <strong>Smart home</strong> имеет систему контроля доступа основанную на ролях. Любое действие или команда по <strong>API</strong> будут проходить проверку на право доступа
Идентификация пользователя и роли происходит по <a href="https://jwt.io" target="_blank">JWT</a> токену указанному в <strong>Authorization</strong> заголовке запроса.
Все запросы кроме, запросов связанных с авторизацией, должны содержать в теле заглоловок <strong>Authorization</strong>:

</div>

<div class="right">
<pre>
<code class="language-bash">
HTTP/1.1 404 Not Found
Date: Mon, 21 Apr 2014 13:26:48 GMT
Content-Type: application/json; charset=utf-8:
</code>
</pre>
<pre>
<code class="language-json">
{
    "message": "Описание ошибки",
    "status": "error"
}
</code>
</pre>

</div>

<div class="middle">

<h2 id="errors">Ошибки</h2>

При возникновении ошибки Вы получите её код в теле ответа. 

<table class="table">
    <thead>
    <tr>
        <th>Поле</th>
        <th>Тип</th>
        <th>Значение</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>message</td>
        <td><div class="label label-default">строка</div> </td>
        <td>Текст ошибки</td>
    </tr>
    <tr>
        <td>status</td>
        <td><div class="label label-default">строка</div></td>
        <td>Системное название</td>
    </tr>
    </tbody>
</table>

<table class="table">
    <thead>
    <tr>
        <th>Код ошибки</th>
        <th>Описание</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td><div class="label label-default">400</div></td>
        <td>Bad Request -- Плохой запрос</td>
    </tr>
    <tr>
        <td><div class="label label-default">401</div></td>
        <td>Unauthorized -- <strong>API</strong> токен не верный</td>
    </tr>
    <tr>
        <td><div class="label label-default">403</div></td>
        <td>Forbidden -- Доступ запрещен, возможно не хватает прав</td>
    </tr>
    <tr>
        <td><div class="label label-default">404</div></td>
        <td>Not Found -- Контент не найден</td>
    </tr>
    <tr>
        <td><div class="label label-default">500</div></td>
        <td>Internal Server Error -- Ошибка на сервере</td>
    </tr>
    </tbody>
</table>

</div>

<div class="right">
<pre>
<code class="language-bash">
> $ curl -i https://localhost/api/v1/action..
</code>
</pre>

<pre>
<code class="language-json">
{
"message": "Описание ошибки",
"status": "error"
}
</code>
</pre>

</div>
<div class="middle">

<h2 id="http-methods">HTTP методы</h2>

Сервер <strong>Smart home</strong> <strong>REST API</strong> поддерживает данный список HTTP методов для каждого действия:

<table class="table">
<thead>
<tr>
    <th>Метод</th>
    <th>Действие</th>
</tr>
</thead>
<tbody>
<tr>
    <td><div class="label label-default">GET</div></td>
    <td>Получить ресурс</td>
</tr>
<tr>
    <td><div class="label label-default">POST</div></td>
    <td>Создать ресурс</td>
</tr>
<tr>
    <td><div class="label label-default">PUT</div></td>
    <td>Обновить ресурс</td>
</tr>
<tr>
    <td><div class="label label-default">DELETE</div></td>
    <td>Удалить ресурс</td>
</tr>
</tbody>
</table>

</div>

<div class="right"></div>
<div class="middle">

<h2 id="cors">Cross Origin Resource Sharing (CORS)</h2>

Сервер <strong>Smart home</strong> API version 1.0 поддерживает Cross Origin Resource Sharing (CORS) запросы для AJAX.

</div>