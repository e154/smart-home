---
title: "Устройство"
linkTitle: "entity"
date: 2021-11-20
description: >

---

В проекте **Smart Home** объект "Entity" является основной единицей и главным объектом, который хранит состояние и настройки устройства.

"Entity" представляет собой абстракцию конкретного устройства в умном доме. Он содержит информацию о типе устройства, его идентификаторе, текущем состоянии и других настройках.

Основные атрибуты "Entity" включают:

1. Тип устройства: Определяет категорию или класс устройства, например, "светильник", "термостат", "дверной замок" и т.д. 
2. Это позволяет классифицировать устройства и определить доступные для них операции и настройки.

3. Идентификатор: Уникальный идентификатор, присвоенный устройству, который позволяет однозначно идентифицировать его в 
4. системе умного дома. Это может быть числовое значение, строка или другой формат идентификации.

5. Состояние устройства: Содержит информацию о текущем состоянии устройства, например, "включено/выключено", 
6. "открыто/закрыто", "температура" и т.д. Состояние может изменяться в результате операций или событий, связанных с устройством.

7. Настройки устройства: Включает в себя различные параметры и настройки, связанные с конкретным устройством. Например,
8. это могут быть параметры освещенности для светильника, предпочитаемая температура для термостата и т.д.


"Entity" является основной абстракцией устройства в проекте **Smart Home** и обеспечивает единый интерфейс для работы с 
различными типами устройств. Это позволяет удобно управлять состоянием и настройками устройств, а также создавать гибкие
сценарии автоматизации и взаимодействия между устройствами в вашем умном доме.

### свойства объекта Entity
```coffeescript
{
  "id": "sensor.device1",
  "type": "sensor",
  "name": "",
  "description": "device description",
  "icon": null,
  "image_url": null,
  "actions": [
    {
      "name": "ENABLE",
      "description": "включить",
      "image_url": null,
      "icon": null
    },
    {
      "name": "DISABLE",
      "description": "выключить",
      "image_url": null,
      "icon": null
    }
  ],
  "states": [
    {
      "name": "ENABLED",
      "description": "enabled state",
      "image_url": null,
      "icon": null
    },
    {
      "name": "DISABLED",
      "description": "disabled state",
      "image_url": null,
      "icon": null
    }
  ],
  "state": {
    "name": "ENABLED",
    "description": "enabled state",
    "image_url": null,
    "icon": null
  },
  "attributes": {},
  "area": null,
  "metrics": [],
  "hidden": false
}
```

Абстрактный объект "Entity" в проекте **Smart Home** предоставляет следующие методы:

1. `setState(state)`: Этот метод позволяет установить состояние устройства. Вы передаете новое состояние в качестве 
2. аргумента `state`, которое будет применено к устройству. Например:

```javascript
entity.setState('on');
```

2. `setAttributes(attributes)`: Этот метод используется для установки атрибутов устройства. Вы передаете объект 
3. `attributes` в качестве аргумента, содержащий новые атрибуты, которые нужно применить к устройству. Пример использования:

```javascript
const newAttributes = {
  brightness: 80,
  color: 'red',
};

entity.setAttributes(newAttributes);
```

3. `getAttributes()`: Данный метод позволяет получить текущие атрибуты устройства. Он возвращает объект с текущими 
4. значениями атрибутов. Пример использования:

```javascript
const attributes = entity.getAttributes();
console.log(attributes);
```

4. `setMetric(metric, value)`: С помощью этого метода можно установить метрику устройства. Вы передаете имя метрики в 
5. аргументе `metric` и значение метрики в аргументе `value`. Пример использования:

```javascript
entity.setMetric('temperature', 25);
```

5. `callAction(action, params)`: Данный метод позволяет вызвать определенное действие на устройстве. Вы передаете имя 
6. действия в аргументе `action` и необходимые параметры в аргументе `params`. Пример использования:

```javascript
entity.callAction('turnOn');
```

Методы объекта "Entity" предоставляют удобные возможности для управления состоянием, атрибутами, метриками и выполнения 
действий на устройстве. Вы можете использовать эти методы для создания логики управления устройствами в вашем проекте 
**Smart Home**.


### методы объекта Entity

```coffeescript
Entity
  .setState(stateName)
  .setAttributes(key, attrs)
  .getAttributes() -> attrs
  .setMetric(name, value)
  .callAction(name, value)
  .getSettings() -> map[string]any
```

|  значение  | описание  |
|-------------|---------|
| setState | изменить текущее состояние, **stateName** - наименования будущего состояния|
| setAttributes | изменить атрибуты текущего состояния, **attr** - map параметрый {key:val} |
| getAttributes | текущее атрибуты устройства, **attrs** - map параметрый {key:val} |
| setMetric | обновить метрики устройства, **name** - наименование метрики, **attr** - map параметрый {key:val}|
| callAction | иcполнение команды на устройстве, **actionName** - наименование команды, **args** - map параметрый {key:val}|
