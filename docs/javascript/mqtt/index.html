<!doctype html><html lang=en class=no-js>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=generator content="Hugo 0.89.4"><meta name=ROBOTS content="INDEX, FOLLOW">
<link rel="shortcut icon" href=/smart-home/favicons/favicon.ico>
<link rel=apple-touch-icon href=/smart-home/favicons/apple-touch-icon-180x180.png sizes=180x180>
<link rel=icon type=image/png href=/smart-home/favicons/favicon-16x16.png sizes=16x16>
<link rel=icon type=image/png href=/smart-home/favicons/favicon-32x32.png sizes=32x32>
<link rel=icon type=image/png href=/smart-home/favicons/android-36x36.png sizes=36x36>
<link rel=icon type=image/png href=/smart-home/favicons/android-48x48.png sizes=48x48>
<link rel=icon type=image/png href=/smart-home/favicons/android-72x72.png sizes=72x72>
<link rel=icon type=image/png href=/smart-home/favicons/android-96x96.png sizes=96x96>
<link rel=icon type=image/png href=/smart-home/favicons/android-144x144.png sizes=144x144>
<link rel=icon type=image/png href=/smart-home/favicons/android-192x192.png sizes=192x192>
<title>Mqtt | Smart home</title>
<meta name=description content="The &ldquo;Mqtt&rdquo; object in the Smart Home project provides the ability to publish messages to an MQTT broker.
Quality of Service in MQTT (QoS) …">
<meta property="og:title" content="Mqtt">
<meta property="og:description" content="The &ldquo;Mqtt&rdquo; object in the Smart Home project provides the ability to publish messages to an MQTT broker.
Quality of Service in MQTT (QoS) QoS 0: At most once. At this level, the publisher sends the message to the broker once and does not wait for confirmation. It means &ldquo;fire and forget.&rdquo;
QoS 1: At least once. This level guarantees that the message will be delivered to the broker, but there is a possibility of message duplication from the publisher.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://e154.github.io/smart-home/docs/javascript/mqtt/"><meta property="article:section" content="docs">
<meta property="article:published_time" content="2021-11-20T00:00:00+00:00">
<meta property="article:modified_time" content="2024-01-08T19:33:13+06:00"><meta property="og:site_name" content="Smart home">
<meta itemprop=name content="Mqtt">
<meta itemprop=description content="The &ldquo;Mqtt&rdquo; object in the Smart Home project provides the ability to publish messages to an MQTT broker.
Quality of Service in MQTT (QoS) QoS 0: At most once. At this level, the publisher sends the message to the broker once and does not wait for confirmation. It means &ldquo;fire and forget.&rdquo;
QoS 1: At least once. This level guarantees that the message will be delivered to the broker, but there is a possibility of message duplication from the publisher."><meta itemprop=datePublished content="2021-11-20T00:00:00+00:00">
<meta itemprop=dateModified content="2024-01-08T19:33:13+06:00">
<meta itemprop=wordCount content="420">
<meta itemprop=keywords content><meta name=twitter:card content="summary">
<meta name=twitter:title content="Mqtt">
<meta name=twitter:description content="The &ldquo;Mqtt&rdquo; object in the Smart Home project provides the ability to publish messages to an MQTT broker.
Quality of Service in MQTT (QoS) QoS 0: At most once. At this level, the publisher sends the message to the broker once and does not wait for confirmation. It means &ldquo;fire and forget.&rdquo;
QoS 1: At least once. This level guarantees that the message will be delivered to the broker, but there is a possibility of message duplication from the publisher.">
<link rel=preload href=/smart-home/scss/main.min.bd5285b713d3061549a6bfd34e5f4ec6775ede36672a3088260f0d420050647f.css as=style>
<link href=/smart-home/scss/main.min.bd5285b713d3061549a6bfd34e5f4ec6775ede36672a3088260f0d420050647f.css rel=stylesheet integrity>
<script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script>
</head>
<body class=td-page>
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
<a class=navbar-brand href=/smart-home/>
<span class=navbar-logo></span><span class="text-uppercase font-weight-bold">Smart home</span>
</a>
<div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar>
<ul class="navbar-nav mt-2 mt-lg-0">
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link active" href=/smart-home/docs/><span class=active>Documentation</span></a>
</li>
<li class="nav-item dropdown mr-4 d-none d-lg-block">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
English
</a>
<div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink>
<a class=dropdown-item href=/smart-home/ru/docs/javascript/mqtt/>Русский</a>
</div>
</li>
</ul>
</div>
<div class="navbar-nav d-none d-lg-block">
</div>
</nav>
</header>
<div class="container-fluid td-outer">
<div class=td-main>
<div class="row flex-xl-nowrap">
<aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
<div id=td-sidebar-menu class=td-sidebar__inner>
<form class="td-sidebar__search d-flex align-items-center">
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation">
</button>
</form>
<nav class="collapse td-sidebar-nav" id=td-section-nav>
<div class="nav-item dropdown d-block d-lg-none">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
English
</a>
<div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink>
<a class=dropdown-item href=/smart-home/ru/docs/javascript/mqtt/>Русский</a>
</div>
</div>
<ul class="td-sidebar-nav__section pr-md-3 ul-0">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-smart-homedocs-li>
<a href=/smart-home/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-smart-homedocs><span>Documentation</span></a>
<ul class=ul-1>
<li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-smart-homedocsinstall-li>
<a href=/smart-home/docs/install/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-smart-homedocsinstall><span>Install</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocsinstallpostgresql-li>
<a href=/smart-home/docs/install/postgresql/ title class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocsinstallpostgresql><span>Postgresql</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-smart-homedocsdashboard-li>
<a href=/smart-home/docs/dashboard/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-smart-homedocsdashboard><span>Dashboard</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocsdashboardgate-li>
<a href=/smart-home/docs/dashboard/gate/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-smart-homedocsdashboardgate><span>Gate</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocsdashboardentity-li>
<a href=/smart-home/docs/dashboard/entity/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocsdashboardentity><span>Entity</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-smart-homedocsdashboardautomation-li>
<a href=/smart-home/docs/dashboard/automation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-smart-homedocsdashboardautomation><span>Automation</span></a>
<ul class="ul-3 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocsdashboardautomationtasks-li>
<a href=/smart-home/docs/dashboard/automation/tasks/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocsdashboardautomationtasks><span>Tasks</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocsdashboardautomationactions-li>
<a href=/smart-home/docs/dashboard/automation/actions/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocsdashboardautomationactions><span>Actions</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocsdashboardautomationconditions-li>
<a href=/smart-home/docs/dashboard/automation/conditions/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocsdashboardautomationconditions><span>Conditions</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocsdashboardautomationtriggers-li>
<a href=/smart-home/docs/dashboard/automation/triggers/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocsdashboardautomationtriggers><span>Triggers</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocsdashboardmqtt-li>
<a href=/smart-home/docs/dashboard/mqtt/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-smart-homedocsdashboardmqtt><span>MQTT</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-smart-homedocsjavascript-li>
<a href=/smart-home/docs/javascript/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-smart-homedocsjavascript><span>Javascript</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocsjavascriptencryption-li>
<a href=/smart-home/docs/javascript/encryption/ title=Encryption class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocsjavascriptencryption><span>encryption</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocsjavascriptgeo-li>
<a href=/smart-home/docs/javascript/geo/ title=Geography class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocsjavascriptgeo><span>geography</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocsjavascriptentity-li>
<a href=/smart-home/docs/javascript/entity/ title=Entity class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocsjavascriptentity><span>entity</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocsjavascripthex2arr-li>
<a href=/smart-home/docs/javascript/hex2arr/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocsjavascripthex2arr><span>hex2arr</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocsjavascriptmarshal-li>
<a href=/smart-home/docs/javascript/marshal/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocsjavascriptmarshal><span>marshal</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-smart-homedocsjavascriptmqtt-li>
<a href=/smart-home/docs/javascript/mqtt/ title=Mqtt class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-smart-homedocsjavascriptmqtt><span class=td-sidebar-nav-active-item>mqtt</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocsjavascriptprint-li>
<a href=/smart-home/docs/javascript/print/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocsjavascriptprint><span>print</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocsjavascriptunmarshal-li>
<a href=/smart-home/docs/javascript/unmarshal/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocsjavascriptunmarshal><span>unmarshal</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocsjavascriptexecute-li>
<a href=/smart-home/docs/javascript/execute/ title=Execute class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocsjavascriptexecute><span>execute</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocsjavascriptlog-li>
<a href=/smart-home/docs/javascript/log/ title=Log class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocsjavascriptlog><span>log</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocsjavascriptstorage-li>
<a href=/smart-home/docs/javascript/storage/ title=Storage class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocsjavascriptstorage><span>storage</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocsjavascripthttp-li>
<a href=/smart-home/docs/javascript/http/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocsjavascripthttp><span>http</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-smart-homedocsplugins-li>
<a href=/smart-home/docs/plugins/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-smart-homedocsplugins><span>Plugins</span></a>
<ul class="ul-2 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginsmqtt_bridge-li>
<a href=/smart-home/docs/plugins/mqtt_bridge/ title="MQTT bridge" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginsmqtt_bridge><span>mqtt_bridge</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginsonvif-li>
<a href=/smart-home/docs/plugins/onvif/ title=Onvif class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginsonvif><span>onvif</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginsspeedtest-li>
<a href=/smart-home/docs/plugins/speedtest/ title=Speedtest class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginsspeedtest><span>speedtest</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-smart-homedocspluginsmodbus-li>
<a href=/smart-home/docs/plugins/modbus/ title=Modbus class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-smart-homedocspluginsmodbus><span>modbus</span></a>
<ul class="ul-3 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginsmodbusmodbus_rtu-li>
<a href=/smart-home/docs/plugins/modbus/modbus_rtu/ title="Modbus rtu" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginsmodbusmodbus_rtu><span>modbus rtu</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginsmodbusmodbus_tcp-li>
<a href=/smart-home/docs/plugins/modbus/modbus_tcp/ title="Modbus tcp" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginsmodbusmodbus_tcp><span>modbus tcp</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginsalexa-li>
<a href=/smart-home/docs/plugins/alexa/ title=Alexa class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginsalexa><span>alexa</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-smart-homedocspluginscgminer-li>
<a href=/smart-home/docs/plugins/cgminer/ title=Cgminer class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-smart-homedocspluginscgminer><span>cgminer</span></a>
<ul class="ul-3 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginscgminerbitmine-li>
<a href=/smart-home/docs/plugins/cgminer/bitmine/ title=Bitmine class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginscgminerbitmine><span>bitmine</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginscpuspeed-li>
<a href=/smart-home/docs/plugins/cpuspeed/ title=CPU class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginscpuspeed><span>cpu</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginshdd-li>
<a href=/smart-home/docs/plugins/hdd/ title=HDD class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginshdd><span>hdd</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginsmemory-li>
<a href=/smart-home/docs/plugins/memory/ title=Memory class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginsmemory><span>memory</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginsmemory_app-li>
<a href=/smart-home/docs/plugins/memory_app/ title="Memory app" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginsmemory_app><span>memory app</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginsmoon-li>
<a href=/smart-home/docs/plugins/moon/ title=Moon class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginsmoon><span>moon</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginsmqtt-li>
<a href=/smart-home/docs/plugins/mqtt/ title=MQTT class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginsmqtt><span>mqtt</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginsnode-li>
<a href=/smart-home/docs/plugins/node/ title=Node class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginsnode><span>node</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-smart-homedocspluginsnotify-li>
<a href=/smart-home/docs/plugins/notify/ title="Отправка сообщений" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-smart-homedocspluginsnotify><span>notify</span></a>
<ul class="ul-3 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginsnotifyemail-li>
<a href=/smart-home/docs/plugins/notify/email/ title=EMAIL class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginsnotifyemail><span>email</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginsnotifywebpush-li>
<a href=/smart-home/docs/plugins/notify/webpush/ title="Push уведомления" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginsnotifywebpush><span>webpush</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginsnotifyhtml5_notify-li>
<a href=/smart-home/docs/plugins/notify/html5_notify/ title="HTML5 Уведомления" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginsnotifyhtml5_notify><span>html5_notify</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginsnotifymessagebird-li>
<a href=/smart-home/docs/plugins/notify/messagebird/ title=Messagebird class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginsnotifymessagebird><span>messagebird</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginsnotifyslack-li>
<a href=/smart-home/docs/plugins/notify/slack/ title=Slack class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginsnotifyslack><span>slack</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginsnotifytelegram-li>
<a href=/smart-home/docs/plugins/notify/telegram/ title=Telegram class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginsnotifytelegram><span>telegram</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginsnotifytemplate-li>
<a href=/smart-home/docs/plugins/notify/template/ title=Templates class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginsnotifytemplate><span>templates</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginsnotifytwilio-li>
<a href=/smart-home/docs/plugins/notify/twilio/ title=Twilio class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginsnotifytwilio><span>twilio</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginsscene-li>
<a href=/smart-home/docs/plugins/scene/ title=Scene class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginsscene><span>scene</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginssensor-li>
<a href=/smart-home/docs/plugins/sensor/ title=Sensor class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginssensor><span>sensor</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginssun-li>
<a href=/smart-home/docs/plugins/sun/ title=Sun class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginssun><span>sun</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginstriggers-li>
<a href=/smart-home/docs/plugins/triggers/ title=Triggers class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginstriggers><span>triggers</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginsupdater-li>
<a href=/smart-home/docs/plugins/updater/ title=Updater class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginsupdater><span>updater</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginsuptime-li>
<a href=/smart-home/docs/plugins/uptime/ title=Uptime class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginsuptime><span>uptime</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginsversion-li>
<a href=/smart-home/docs/plugins/version/ title=Version class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginsversion><span>version</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-smart-homedocspluginsweather-li>
<a href=/smart-home/docs/plugins/weather/ title=Weather class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-smart-homedocspluginsweather><span>weather</span></a>
<ul class="ul-3 foldable">
<li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginsweathermet-li>
<a href=/smart-home/docs/plugins/weather/met/ title=MET class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginsweathermet><span>met</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginsweatherowm-li>
<a href=/smart-home/docs/plugins/weather/owm/ title=OWM class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginsweatherowm><span>met</span></a>
</li>
</ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-smart-homedocspluginszibee2mqtt-li>
<a href=/smart-home/docs/plugins/zibee2mqtt/ title=Zigbee2mqtt class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-smart-homedocspluginszibee2mqtt><span>zigbee2mqtt</span></a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</div>
</aside>
<aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
<a href=https://github.com/e154/smart-home/edit/master/content/en/docs/javascript/mqtt.md target=_blank><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/e154/smart-home/new/master/content/en/docs/javascript/mqtt.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i> Create child page</a>
<a href="https://github.com/e154/smart-home/issues/new?title=Mqtt" target=_blank><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/e154/smart-home/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i> Create project issue</a>
<a id=print href=https://e154.github.io/smart-home/docs/javascript/_print/><i class="fa fa-print fa-fw"></i> Print entire section</a>
</div>
<div class=td-toc><nav id=TableOfContents>
<ul>
<li>
<ul>
<li></li>
<li><a href=#mqtt-object>Mqtt object</a></li>
<li><a href=#code-example>Code Example</a></li>
</ul>
</li>
</ul>
</nav></div>
</aside>
<main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main>
<nav aria-label=breadcrumb class="d-none d-md-block d-print-none">
<ol class="breadcrumb spb-1">
<li class=breadcrumb-item>
<a href=https://e154.github.io/smart-home/docs/>Documentation</a>
</li>
<li class=breadcrumb-item>
<a href=https://e154.github.io/smart-home/docs/javascript/>Javascript</a>
</li>
<li class="breadcrumb-item active" aria-current=page>
<a href=https://e154.github.io/smart-home/docs/javascript/mqtt/>mqtt</a>
</li>
</ol>
</nav>
<div class=td-content>
<h1>Mqtt</h1>
<header class=article-meta>
</header>
<p>The &ldquo;Mqtt&rdquo; object in the <strong>Smart Home</strong> project provides the ability to publish messages to an MQTT broker.</p>
<h4 id=quality-of-service-in-mqtt-qos>Quality of Service in MQTT (QoS)</h4>
<p>QoS 0: At most once. At this level, the publisher sends the message to the broker once and does not wait for confirmation. It means &ldquo;fire and forget.&rdquo;</p>
<p>QoS 1: At least once. This level guarantees that the message will be delivered to the broker, but there is a possibility of message duplication from the publisher. When the broker receives a duplicate message, it resends it to the subscribers and sends an acknowledgment to the publisher. If the publisher doesn&rsquo;t receive a PUBACK message from the broker, it resends the packet with the DUP flag set to &ldquo;1.&rdquo;</p>
<p>QoS 2: Exactly once. This level guarantees the delivery of messages to the subscriber and eliminates the possibility of duplicating sent messages.</p>
<div class="alert alert-success" role=alert>
This function is available in any system script.
</div>
<p>The &ldquo;Mqtt&rdquo; object in the <strong>Smart Home</strong> project provides the following method:</p>
<ol>
<li><code>publish(topic, payload, qos, retain)</code>: This method is used to publish messages to an MQTT broker. You pass the arguments <code>topic</code> (the topic), <code>payload</code> (the message content), <code>qos</code> (Quality of Service level), and <code>retain</code> (the &ldquo;retain&rdquo; flag).</li>
</ol>
<ul>
<li><code>topic</code>: A string representing the topic to which the message will be published.</li>
<li><code>payload</code>: The content of the message, which can be a string, an object, or binary data.</li>
<li><code>qos</code>: The Quality of Service level determines the message delivery guarantees. Possible values are 0 (at most once), 1 (at least once with acknowledgment), or 2 (exactly once with retransmission if needed).</li>
<li><code>retain</code>: A flag indicating whether the message should be retained on the broker and sent to new subscribers. Values can be true (retain) or false (do not retain).</li>
</ul>
<p>Usage example:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>topic</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;smart-home/living-room/light&#39;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>payload</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;on&#39;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>qos</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>retain</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>;</span>

<span style=color:#000>Mqtt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>publish</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>topic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>qos</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>retain</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>The <code>publish</code> method allows you to send messages to an MQTT broker for transmitting information and controlling devices or the system as a whole in your <strong>Smart Home</strong> project.</p>
<hr>
<h3 id=mqtt-object>Mqtt object</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># Publish a message
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>Mqtt</span>
  <span style=color:#000;font-weight:700>.</span><span style=color:#000>publish</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>topic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>qos</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>retain</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>topic</td>
<td>Channel for the message</td>
</tr>
<tr>
<td>payload</td>
<td>JSON object intended for transmission</td>
</tr>
<tr>
<td>qos</td>
<td>Quality of Service (1, 2, 3)</td>
</tr>
<tr>
<td>retain</td>
<td>When publishing data with the retain flag set, the broker will store it. Upon the next subscription to this topic, the broker immediately sends the message with this flag. Only used in PUBLISH messages.</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=code-example>Code Example</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># mqtt
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#000>payload = </span><span style=color:#000>JSON</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>stringify</span><span style=color:#000;font-weight:700>({</span><span style=color:#4e9a06>&#34;state&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>actionName</span><span style=color:#000;font-weight:700>})</span>
<span style=color:#000>Mqtt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>publish</span><span style=color:#4e9a06>&#34;zigbee2mqtt/device/set&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>)</span>

</code></pre></div>
<div class="text-muted mt-5 pt-3 border-top">
Last modified January 8, 2024: <a href=https://github.com/e154/smart-home/commit/5d834c48fbdf35becba56d9f426ed5f3f8250563>Merge pull request #256 from e154/master (5d834c4)</a>
</div>
</div>
</main>
</div>
</div>
<footer class="bg-dark py-5 row d-print-none">
<div class="container-fluid mx-sm-5">
<div class=row>
<div class="col-6 col-sm-4 text-xs-center order-sm-2">
</div>
<div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub>
<a class=text-white target=_blank rel=noopener href=https://github.com/e154/smart-home aria-label=GitHub>
<i class="fab fa-github"></i>
</a>
</li>
</ul>
</div>
<div class="col-12 col-sm-4 text-center py-2 order-sm-2">
<small class=text-white>&copy; 2024 Powered by <a href=http://e154.ru>e154.ru</a></small>
<div><small class="ml-1 text-white"><a href=https://github.com/e154/smart-home/blob/master/LICENSE>MIT</a> License Code Documents <a href=http://creativecommons.org/licenses/by/3.0/>CC BY 3.0</a></small></div>
</div>
</div>
</div>
</footer>
</div>
<script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script>
<script src=/smart-home/js/tabpane-persist.js></script>
<script src=/smart-home/js/main.min.307d9740a83ff885dafd50af6ce4f79e2146b78e74ee078b11b627d0d02146a9.js integrity="sha256-MH2XQKg/+IXa/VCvbOT3niFGt4507geLEbYn0NAhRqk=" crossorigin=anonymous></script>
</body>
</html>