<!doctype html><html lang=en class=no-js>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=generator content="Hugo 0.89.4"><link rel=canonical type=text/html href=https://e154.github.io/smart-home/docs/plugins/>
<meta name=ROBOTS content="NOINDEX, NOFOLLOW">
<link rel="shortcut icon" href=/smart-home/favicons/favicon.ico>
<link rel=apple-touch-icon href=/smart-home/favicons/apple-touch-icon-180x180.png sizes=180x180>
<link rel=icon type=image/png href=/smart-home/favicons/favicon-16x16.png sizes=16x16>
<link rel=icon type=image/png href=/smart-home/favicons/favicon-32x32.png sizes=32x32>
<link rel=icon type=image/png href=/smart-home/favicons/android-36x36.png sizes=36x36>
<link rel=icon type=image/png href=/smart-home/favicons/android-48x48.png sizes=48x48>
<link rel=icon type=image/png href=/smart-home/favicons/android-72x72.png sizes=72x72>
<link rel=icon type=image/png href=/smart-home/favicons/android-96x96.png sizes=96x96>
<link rel=icon type=image/png href=/smart-home/favicons/android-144x144.png sizes=144x144>
<link rel=icon type=image/png href=/smart-home/favicons/android-192x192.png sizes=192x192>
<title>Plugins | Smart home</title>
<meta name=description content="The Smart Home project also supports a plugin system, which allows for easy extension of its functionality and integration of third-party components. …">
<meta property="og:title" content="Plugins">
<meta property="og:description" content="The program complex">
<meta property="og:type" content="website">
<meta property="og:url" content="https://e154.github.io/smart-home/docs/plugins/"><meta property="og:site_name" content="Smart home">
<meta itemprop=name content="Plugins">
<meta itemprop=description content="The program complex"><meta name=twitter:card content="summary">
<meta name=twitter:title content="Plugins">
<meta name=twitter:description content="The program complex">
<link rel=preload href=/smart-home/scss/main.min.bd5285b713d3061549a6bfd34e5f4ec6775ede36672a3088260f0d420050647f.css as=style>
<link href=/smart-home/scss/main.min.bd5285b713d3061549a6bfd34e5f4ec6775ede36672a3088260f0d420050647f.css rel=stylesheet integrity>
<script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script>
</head>
<body class=td-section>
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
<a class=navbar-brand href=/smart-home/>
<span class=navbar-logo></span><span class="text-uppercase font-weight-bold">Smart home</span>
</a>
<div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar>
<ul class="navbar-nav mt-2 mt-lg-0">
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link active" href=/smart-home/docs/><span class=active>Documentation</span></a>
</li>
<li class="nav-item dropdown mr-4 d-none d-lg-block">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
English
</a>
<div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink>
<a class=dropdown-item href=/smart-home/ru/docs/plugins/>Русский</a>
</div>
</li>
</ul>
</div>
<div class="navbar-nav d-none d-lg-block">
</div>
</nav>
</header>
<div class="container-fluid td-outer">
<div class=td-main>
<div class="row flex-xl-nowrap">
<div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
</div>
<div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
</div>
<main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main>
<div class=td-content>
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.
</p><p>
<a href=/smart-home/docs/plugins/>Return to the regular view of this page</a>.
</p>
</div>
<h1 class=title>Plugins</h1>
<ul>
<li>1: <a href=#pg-ca2fd0a932eee66a200558a82ca847ea>Webdav</a></li>
<li>2: <a href=#pg-53957103549e682ab1b0aa2bb65ce6fe>MQTT bridge</a></li>
<li>3: <a href=#pg-271c67f1de2b18fc5b0634b92a8c27c8>Onvif</a></li>
<li>4: <a href=#pg-e8b319a66335a30c657903345ca1d698>Speedtest</a></li>
<li>5: <a href=#pg-421d1625cd3fc0768a5e9395096f9ba0>Modbus</a></li>
<ul>
<li>5.1: <a href=#pg-83ccc62bb21aa1015dc85c4aa89b620d>Modbus rtu</a></li>
<li>5.2: <a href=#pg-2ab89625f67635397c493f87afe8c5f2>Modbus tcp</a></li>
</ul>
<li>6: <a href=#pg-0369b4decf3a671c6e8e5d18b35ebcef>Alexa</a></li>
<li>7: <a href=#pg-ef2b94f1a2a793c6662e60a76d3c9154>Cgminer</a></li>
<ul>
<li>7.1: <a href=#pg-e8459aa132552732476b3a393a8246c7>Bitmine</a></li>
</ul>
<li>8: <a href=#pg-2cd4f07024ce46a2072e53614567c7fb>CPU</a></li>
<li>9: <a href=#pg-d57edab1df39efff0606d11217501497>HDD</a></li>
<li>10: <a href=#pg-ad72d5bfe8ed58703be4f95c5433bbbb>Memory</a></li>
<li>11: <a href=#pg-646b43ce7e0c9ecd76b7e1b081534840>Memory app</a></li>
<li>12: <a href=#pg-95c950e340c5f9306b492b322325c66d>Moon</a></li>
<li>13: <a href=#pg-75a67472ccb2a758f48c263d48be08d3>MQTT</a></li>
<li>14: <a href=#pg-98e5f3c64adb1e62039387bca695fb54>Node</a></li>
<li>15: <a href=#pg-25150d443099ad5064f1a3a39214945d>Отправка сообщений</a></li>
<ul>
<li>15.1: <a href=#pg-c757c4a3128c020469fa7e844a0b07d1>EMAIL</a></li>
<li>15.2: <a href=#pg-db0e74844d4ec70b97b7eed2dcaa6fde>Push уведомления</a></li>
<li>15.3: <a href=#pg-b9e7dc050746e93f66a3fcdc54072720>HTML5 Уведомления</a></li>
<li>15.4: <a href=#pg-ffcf992bf86dcf75fc98ea391689be36>Messagebird</a></li>
<li>15.5: <a href=#pg-ae8769291a804111fe0f11577b37bb14>Slack</a></li>
<li>15.6: <a href=#pg-3474b889257fbfc72d90e2b2883e468a>Telegram</a></li>
<li>15.7: <a href=#pg-56027f5b7f86e356eca9778287b4e9b7>Templates</a></li>
<li>15.8: <a href=#pg-8d473157f65e8e52157febb9c1671a23>Twilio</a></li>
</ul>
<li>16: <a href=#pg-c611e1f9047c1d78be304f536e42a8a9>Scene</a></li>
<li>17: <a href=#pg-0a07d6aae278970d2834de3c5c8ba6fd>Sensor</a></li>
<li>18: <a href=#pg-07071769f18bcd958fb6807bfc051634>Sun</a></li>
<li>19: <a href=#pg-e2fff1dd07e3240d15c8fe3dda77a94e>Triggers</a></li>
<li>20: <a href=#pg-4183e9971a270328fbc64107268e1231>Updater</a></li>
<li>21: <a href=#pg-d3da1ca7f3ff8128df9b7a16dfe42fe6>Uptime</a></li>
<li>22: <a href=#pg-50e5123a4407c924b74ee84b77d3efbf>Version</a></li>
<li>23: <a href=#pg-64ab3664ef92bf81dcd376de6083e938>Weather</a></li>
<ul>
<li>23.1: <a href=#pg-4e6b5c2d397c558708e54206184aa268>MET</a></li>
<li>23.2: <a href=#pg-b2af757d2aed5c975040722fd880df27>OWM</a></li>
</ul>
<li>24: <a href=#pg-61b4e27718e29c034a152d0ee2706628>Zigbee2mqtt</a></li>
</ul>
<div class=content>
<p>The <strong>Smart Home</strong> project also supports a plugin system, which allows for easy extension of its functionality and integration of third-party components. The plugin system provides flexibility and modularity, enabling users to add new capabilities and customize the project according to their needs.</p>
<p>Plugins in the <strong>Smart Home</strong> project are individual modules written in Go that can be connected and used to add new features and integrate with various devices and services. Each plugin provides specific functionality, such as support for a specific type of devices, integration with external services, or implementation of specific automation rules.</p>
<p>The plugin system in the <strong>Smart Home</strong> project provides standard interfaces and conventions that facilitate the development and integration of plugins. It allows developers to create plugins that can interact with the core system of the project, access data and devices, and add their own functions and capabilities.</p>
<p>Using the plugin system in the <strong>Smart Home</strong> project allows users to choose and configure only the functions they need, avoiding redundancy or unnecessary complexity. They can add new plugins or disable existing ones to create a customized solution that fully meets their requirements.</p>
<p>Thanks to the plugin system, the <strong>Smart Home</strong> project becomes more flexible and extensible, allowing users to adapt it to their unique needs. It also fosters an active community of developers and enhances opportunities for collaboration and plugin sharing, contributing to the further development of the project and the expansion of its ecosystem.</p>
<p>In the documentation of the <strong>Smart Home</strong> project, you will find detailed instructions on creating, installing, and configuring plugins, as well as usage examples. This will help you get started with developing your own plugins and customize the <strong>Smart Home</strong> project according to your needs and preferences.</p>
</div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-ca2fd0a932eee66a200558a82ca847ea>1 - Webdav</h1>
<h3 id=integration-of-webdav-plugin-for-scripting-in-smart-home-system>Integration of WebDAV Plugin for Scripting in Smart Home System</h3>
<p>In the Smart Home system, the WebDAV plugin has been successfully added and integrated, providing convenient access to
scripts through any IDE that supports this protocol. This opens up new possibilities for script development and
configuration, making the process more flexible and convenient.</p>
<h4 id=key-features-of-the-webdav-plugin>Key Features of the WebDAV Plugin:</h4>
<ol>
<li>
<p><strong>Access to Scripts from Any IDE:</strong></p>
<ul>
<li>The WebDAV plugin allows connecting to the Smart Home system from any IDE compatible with the WebDAV protocol.
This simplifies the process of creating, editing, and testing scripts.</li>
</ul>
</li>
<li>
<p><strong>Development Flexibility:</strong></p>
<ul>
<li>Developers can use their preferred tools and IDEs to work with JavaScript scripts in the Smart Home system. This
includes debugging, autocompletion, and other features provided by the chosen development environment.</li>
</ul>
</li>
<li>
<p><strong>Remote Script Management:</strong></p>
<ul>
<li>The WebDAV plugin enables remote management of scripts in the Smart Home system, including uploading new scripts,
updating existing ones, and performing other operations from the selected IDE.</li>
</ul>
</li>
<li>
<p><strong>Security and Data Protection:</strong></p>
<ul>
<li>All operations through the WebDAV protocol are secured, ensuring data integrity and preventing unauthorized
access.</li>
</ul>
</li>
</ol>
<h4 id=example-of-connection-from-a-webdav-supported-ide>Example of Connection from a WebDAV-Supported IDE:</h4>
<ol>
<li>
<p><strong>Connection Setup:</strong></p>
<ul>
<li>In the IDE, select the option to connect to a remote repository or file system via the WebDAV protocol.</li>
</ul>
</li>
<li>
<p><strong>Specify Address and Credentials:</strong></p>
<ul>
<li>Specify the address of the Smart Home system using the WebDAV protocol, and provide credentials for access.</li>
</ul>
</li>
<li>
<p><strong>View and Edit Scripts:</strong></p>
<ul>
<li>After a successful connection, scripts in the Smart Home system will be available for viewing and editing directly
from your IDE.</li>
</ul>
</li>
<li>
<p><strong>Unload and Load Scripts:</strong></p>
<ul>
<li>You can unload existing scripts, make changes, and upload them back to the Smart Home system without the need to
interact directly with the system&rsquo;s interface.</li>
</ul>
</li>
</ol>
<h4 id=conclusion>Conclusion:</h4>
<p>The integration of the WebDAV plugin into the Smart Home system significantly improves the process of script development
and management, making it more convenient, flexible, and accessible for developers.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-53957103549e682ab1b0aa2bb65ce6fe>2 - MQTT bridge</h1>
<p>The MQTT Bridge plugin provides functionality for integrating devices through the MQTT protocol. This plugin allows efficient data exchange between devices and the Smart Home system using an MQTT broker.</p>
<h4 id=device-settings>Device Settings</h4>
<p>Each device created using the MQTT Bridge plugin has the following settings:</p>
<ul>
<li>
<p><strong><code>keepAlive</code> (type: Int)</strong>: The time in seconds after which the device sends a ping to maintain an active connection with the broker.</p>
</li>
<li>
<p><strong><code>pingTimeout</code> (type: Int)</strong>: The time in seconds expected to receive a response to the ping from the broker.</p>
</li>
<li>
<p><strong><code>broker</code> (type: String)</strong>: The address of the MQTT broker to which the device will connect.</p>
</li>
<li>
<p><strong><code>clientID</code> (type: String)</strong>: The client identifier used when connecting to the broker.</p>
</li>
<li>
<p><strong><code>connectTimeout</code> (type: Int)</strong>: The time in seconds allocated for establishing a connection with the broker.</p>
</li>
<li>
<p><strong><code>cleanSession</code> (type: Bool)</strong>: A flag indicating whether to use a &ldquo;clean&rdquo; session when connecting.</p>
</li>
<li>
<p><strong><code>username</code> (type: String)</strong>: The username for authentication when connecting to the broker.</p>
</li>
<li>
<p><strong><code>password</code> (type: Encrypted)</strong>: The encrypted password for authentication when connecting to the broker.</p>
</li>
<li>
<p><strong><code>qos</code> (type: Int)</strong>: The Quality of Service level for interacting with the broker.</p>
</li>
<li>
<p><strong><code>direction</code> (type: String)</strong>: The direction of interaction (e.g., &ldquo;inbound&rdquo; or &ldquo;outbound&rdquo;).</p>
</li>
<li>
<p><strong><code>topics</code> (type: String)</strong>: A list of topics with which the device will interact.</p>
</li>
</ul>
<h4 id=device-statuses>Device Statuses</h4>
<p>Each device created using the MQTT Bridge plugin can have the following statuses:</p>
<ul>
<li>
<p><strong><code>connected</code></strong>: The device is successfully connected to the MQTT broker and ready for data exchange.</p>
</li>
<li>
<p><strong><code>offline</code></strong>: The device is not connected to the broker or has lost the connection.</p>
</li>
</ul>
<p>These settings and statuses provide flexibility in integrating devices through the MQTT protocol, allowing easy configuration and monitoring of their state within the Smart Home system.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-271c67f1de2b18fc5b0634b92a8c27c8>3 - Onvif</h1>
<p>The Smart Home project provides the ONVIF plugin, enabling interaction with surveillance cameras using the ONVIF protocol. This plugin implements several JavaScript methods for camera control and snapshot retrieval.</p>
<h4 id=javascript-methods>JavaScript Methods</h4>
<ol>
<li>
<p><strong><code>Camera.continuousMove(X, Y)</code></strong>: This method allows for smooth camera movement to the specified coordinates X and Y.</p>
</li>
<li>
<p><strong><code>Camera.stopContinuousMove()</code></strong>: This method stops continuous camera movement.</p>
</li>
<li>
<p><strong><code>OnvifGetSnapshotUri(entityId)</code></strong>: Method for obtaining the snapshot URI for the specified device identifier.</p>
</li>
<li>
<p><strong><code>DownloadSnapshot(entityId)</code></strong>: Method for downloading a snapshot from the device based on its identifier.</p>
</li>
</ol>
<h4 id=device-status>Device Status</h4>
<ul>
<li><strong><code>motion</code> (type: Boolean)</strong>: Status indicating the presence of motion detected by the surveillance camera.</li>
</ul>
<h4 id=device-settings>Device Settings</h4>
<ul>
<li>
<p><strong><code>address</code> (type: String)</strong>: IP address of the surveillance camera.</p>
</li>
<li>
<p><strong><code>onvifPort</code> (type: Int)</strong>: Port for connecting to the camera via the ONVIF protocol.</p>
</li>
<li>
<p><strong><code>rtspPort</code> (type: Int)</strong>: Port for video transmission via the RTSP protocol.</p>
</li>
<li>
<p><strong><code>userName</code> (type: String)</strong>: User name for authentication when accessing the camera.</p>
</li>
<li>
<p><strong><code>password</code> (type: Encrypted)</strong>: Encrypted password for authentication.</p>
</li>
<li>
<p><strong><code>requireAuthorization</code> (type: Bool)</strong>: Flag indicating whether authorization is required for interacting with the camera.</p>
</li>
</ul>
<h4 id=control-commands>Control Commands</h4>
<ul>
<li>
<p><strong><code>continuousMove</code></strong>: Command to initiate continuous camera movement.</p>
</li>
<li>
<p><strong><code>stopContinuousMove</code></strong>: Command to stop continuous camera movement.</p>
</li>
</ul>
<h4 id=device-statuses>Device Statuses</h4>
<ul>
<li>
<p><strong><code>connected</code></strong>: The device is successfully connected and ready to operate.</p>
</li>
<li>
<p><strong><code>offline</code></strong>: The device is unavailable or disconnected from the system.</p>
</li>
</ul>
<p>These functions allow the integration of surveillance cameras into the Smart Home system and efficient management through the ONVIF plugin.</p>
<p>Example of using the &ldquo;onvif&rdquo; plugin to implement camera control:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>continuousMove</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>function</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>args</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>X</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Y</span><span style=color:#000;font-weight:700>;</span>
    <span style=color:#000>X</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>args</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;X&#39;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>||</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span>
    <span style=color:#000>Y</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>args</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;Y&#39;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>||</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span>
    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87>Math</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>abs</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>X</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#204a87>Math</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>abs</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Y</span><span style=color:#000;font-weight:700>))</span> <span style=color:#000;font-weight:700>{</span>
        <span style=color:#000>Y</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span>
    <span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>else</span> <span style=color:#000;font-weight:700>{</span>
        <span style=color:#000>X</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span>
    <span style=color:#000;font-weight:700>}</span>
    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>Camera</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>continuousMove</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>X</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Y</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000;font-weight:700>};</span>

<span style=color:#000>stopStop</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>function</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>args</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>Camera</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>stopContinuousMove</span><span style=color:#000;font-weight:700>();</span>
<span style=color:#000;font-weight:700>};</span>

</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-e8b319a66335a30c657903345ca1d698>4 - Speedtest</h1>
<p>The Speedtest plugin provides the capability to measure internet connection speed directly from the Smart Home system. This plugin allows users to check the quality of their internet connection and use the obtained data to make decisions regarding network optimization.</p>
<h4 id=device-properties>Device Properties</h4>
<p>Each device created using the Speedtest plugin has the following properties:</p>
<ul>
<li>
<p><strong><code>Point</code></strong>: Geographical coordinates of the Speedtest node.</p>
</li>
<li>
<p><strong><code>Name</code> (type: String)</strong>: Name of the conducted Speedtest.</p>
</li>
<li>
<p><strong><code>Country</code> (type: String)</strong>: Country where the test is conducted.</p>
</li>
<li>
<p><strong><code>Sponsor</code> (type: String)</strong>: Name of the Speedtest sponsor.</p>
</li>
<li>
<p><strong><code>Distance</code> (type: Float)</strong>: Distance to the Speedtest server in kilometers.</p>
</li>
<li>
<p><strong><code>Latency</code> (type: String)</strong>: Latency (ping) to the Speedtest server.</p>
</li>
<li>
<p><strong><code>Jitter</code> (type: String)</strong>: Indicator of internet connection stability.</p>
</li>
<li>
<p><strong><code>DLSpeed</code> (type: Float)</strong>: Download Speed in megabits per second.</p>
</li>
<li>
<p><strong><code>ULSpeed</code> (type: Float)</strong>: Upload Speed in megabits per second.</p>
</li>
<li>
<p><strong><code>location</code> (type: Point)</strong>: Geographical coordinates of the device location.</p>
</li>
</ul>
<h4 id=device-settings>Device Settings</h4>
<p>Each device created using the Speedtest plugin contains the following settings:</p>
<ul>
<li>
<p><strong><code>location</code> (type: Point)</strong>: Geographical coordinates indicating the device location for conducting the Speedtest.</p>
</li>
<li>
<p><strong><code>city</code> (type: String)</strong>: Name of the city where the testing will take place.</p>
</li>
</ul>
<h4 id=device-statuses>Device Statuses</h4>
<p>Each device created using the Speedtest plugin can have the following statuses:</p>
<ul>
<li>
<p><strong><code>completed</code></strong>: Testing has been successfully completed, and the data is available for analysis.</p>
</li>
<li>
<p><strong><code>in process</code></strong>: Testing is currently in progress.</p>
</li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-421d1625cd3fc0768a5e9395096f9ba0>5 - Modbus</h1>
<p>Extension for working with devices using the open Modbus communication protocol based on the master-slave architecture. It uses RS-485, RS-422, RS-232 interfaces for data transmission, as well as Ethernet TCP/IP networks (Modbus TCP protocol).</p>
<p><a href=https://en.wikipedia.org/wiki/Modbus>wiki</a></p>
</div>
<div class=td-content>
<h1 id=pg-83ccc62bb21aa1015dc85c4aa89b620d>5.1 - Modbus rtu</h1>
<p>In the <strong>Smart Home</strong> system, there is a Modbus RTU plugin implemented that enables interaction with devices using the Modbus RTU protocol. The plugin provides the <code>ModbusRtu(FUNC, ADDRESS, COUNT, COMMAND)</code> method, which allows sending commands and receiving data using the specified protocol.</p>
<p>Arguments of the <code>ModbusRtu</code> method:</p>
<ol>
<li><code>FUNC</code>: Modbus function code indicating the type of operation to perform with the device.</li>
<li><code>ADDRESS</code>: Modbus device address to which the command is sent.</li>
<li><code>COUNT</code>: Number of registers or bits to read or write.</li>
<li><code>COMMAND</code>: Command to be executed, indicating additional parameters and settings.</li>
</ol>
<p>Usage example:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>COMMAND</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[]</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>FUNC</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;ReadHoldingRegisters&#39;</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>ADDRESS</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>COUNT</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>16</span>

<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>response</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>ModbusRtu</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>FUNC</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>ADDRESS</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>COUNT</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>COMMAND</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>response</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>The <code>ModbusRtu</code> method allows sending Modbus RTU commands, performing register reads or writes, and retrieving data from devices. You can use this method in your <strong>Smart Home</strong> project to interact with devices that support the Modbus RTU protocol.</p>
<div class="alert alert-warning" role=alert>
To work with a Modbus RTU device, a configured <strong>node</strong> is required.
</div>
<h3 id=configuration>Configuration:</h3>
<ul>
<li>slave_id <code>1-32</code></li>
<li>baud <code>9600, 19200</code></li>
<li>data_bits <code>5-9</code></li>
<li>timeout <code>milliseconds</code></li>
<li>stop_bits <code>1-2</code></li>
<li>sleep <code>milliseconds</code></li>
<li>parity <code>none, odd, even</code></li>
</ul>
<h3 id=commands>Commands:</h3>
<ul>
<li>Custom set</li>
</ul>
<h3 id=attributes>Attributes:</h3>
<ul>
<li>Custom set</li>
</ul>
<h3 id=status>Status:</h3>
<ul>
<li>Custom set</li>
</ul>
<hr>
<h3 id=available-functions>Available Functions</h3>
<p><strong>1-bit functions</strong></p>
<p>ReadCoils
ReadDiscreteInputs
WriteSingleCoil
WriteMultipleCoils</p>
<p><strong>16-bit functions</strong></p>
<p>ReadInputRegisters
ReadHoldingRegisters
ReadWriteMultipleRegisters
WriteSingleRegister
WriteMultipleRegisters</p>
<hr>
<h3 id=javascript-properties>JavaScript Properties</h3>
<ul>
<li>ENTITY_ID</li>
<li>ModbusRtu</li>
<li>entityAction</li>
<li>Action</li>
</ul>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># Constant with a unique device ID
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>const</span> <span style=color:#000>ENTITY_ID</span>
</code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># Execute a command (function) on the device:
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>result = </span><span style=color:#000>ModbusRtu</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>func</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>addr</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>count</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>command</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>func</td>
<td>Function to be executed on the device</td>
</tr>
<tr>
<td>addr</td>
<td>Address of the first register (40108-40001 = 107 = 6B hex)</td>
</tr>
<tr>
<td>count</td>
<td>Number of registers to read (reading 3 registers from 40108 to 40110)</td>
</tr>
<tr>
<td>command</td>
<td>Command</td>
</tr>
</tbody>
</table>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># Event handler function for actions:
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>entityAction = </span><span style=color:#000>(entityId, actionName, args)-&gt;</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>entityId</td>
<td>Unique ID of the device</td>
</tr>
<tr>
<td>actionName</td>
<td>System name of the action</td>
</tr>
<tr>
<td>args</td>
<td>Type: map[string]any</td>
</tr>
</tbody>
</table>
<div class="alert alert-warning" role=alert>
The <strong>Action</strong> object is available in action scripts and scripts attached to the device.
</div>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>state = </span><span style=color:#000;font-weight:700>{</span>
  <span style=color:#000>new_state: </span><span style=color:#4e9a06>&#39;ENABLED&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000>attribute_values: </span><span style=color:#000;font-weight:700>{</span>
    <span style=color:#000>heat: </span><span style=color:#204a87;font-weight:700>false</span>
  <span style=color:#000;font-weight:700>},</span>
  <span style=color:#000>settings_value: </span><span style=color:#000;font-weight:700>{},</span>
  <span style=color:#000>storage_save: </span><span style=color:#204a87;font-weight:700>true</span>
<span style=color:#000;font-weight:700>}</span> 
<span style=color:#8f5902;font-style:italic># Save the state 
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>EntitySetState</span> <span style=color:#000>ENTITY_ID</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>state</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>new_state</td>
<td>Unique system name of the state</td>
</tr>
<tr>
<td>attribute_values</td>
<td>Values of attributes previously defined for the device</td>
</tr>
<tr>
<td>settings_value</td>
<td>Values of settings previously defined for the device</td>
</tr>
<tr>
<td>storage_save</td>
<td>Flag indicating whether to save the state</td>
</tr>
</tbody>
</table>
<p>snapshot in the database |</p>
<hr>
<h3 id=example-coffeescript-code>Example CoffeeScript code</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># ModbusRtu
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#4e9a06>&#34;use strict&#34;</span><span style=color:#000;font-weight:700>;</span>

<span style=color:#000>checkStatus = </span><span style=color:#000>-&gt;</span>
  <span style=color:#000>COMMAND = </span><span style=color:#000;font-weight:700>[]</span>
  <span style=color:#000>FUNC = </span><span style=color:#4e9a06>&#39;ReadHoldingRegisters&#39;</span>
  <span style=color:#000>ADDRESS = </span><span style=color:#0000cf;font-weight:700>0</span>
  <span style=color:#000>COUNT = </span><span style=color:#0000cf;font-weight:700>16</span>
  
  <span style=color:#000>res = </span><span style=color:#000>ModbusRtu</span> <span style=color:#000>FUNC</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>ADDRESS</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>COUNT</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>COMMAND</span>
  <span style=color:#000>print</span> <span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>error</span>
  <span style=color:#000>print</span> <span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>result</span>
  <span style=color:#000>print</span> <span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>time</span>

<span style=color:#000>entityAction = </span><span style=color:#000>(entityId, actionName, args)-&gt;</span>
  <span style=color:#204a87;font-weight:700>switch</span> <span style=color:#000>actionName</span>
    <span style=color:#204a87;font-weight:700>when</span> <span style=color:#4e9a06>&#39;ON&#39;</span> <span style=color:#204a87;font-weight:700>then</span> <span style=color:#000>doOnAction</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#204a87;font-weight:700>when</span> <span style=color:#4e9a06>&#39;OFF&#39;</span> <span style=color:#204a87;font-weight:700>then</span> <span style=color:#000>doOffAction</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#204a87;font-weight:700>when</span> <span style=color:#4e9a06>&#39;CHECK&#39;</span> <span style=color:#204a87;font-weight:700>then</span> <span style=color:#000>checkStatus</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#204a87;font-weight:700>when</span> <span style=color:#4e9a06>&#39;ON_WITH_ERR&#39;</span> <span style=color:#204a87;font-weight:700>then</span> <span style=color:#000>doOnErrAction</span><span style=color:#000;font-weight:700>()</span>

</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-2ab89625f67635397c493f87afe8c5f2>5.2 - Modbus tcp</h1>
<p>In the <strong>Smart Home</strong> system, there is a Modbus TCP plugin implemented that enables interaction with devices using the Modbus TCP protocol. The plugin provides the <code>ModbusTcp(func, addr, count, command)</code> method, which allows sending commands and receiving data using the specified protocol.</p>
<p>Arguments of the <code>ModbusTcp</code> method:</p>
<ol>
<li><code>func</code>: Modbus function code indicating the type of operation to perform with the device.</li>
<li><code>addr</code>: Modbus device address to which the command is sent.</li>
<li><code>count</code>: Number of registers or bits to read or write.</li>
<li><code>command</code>: Command to be executed, indicating additional parameters and settings.</li>
</ol>
<p>Usage example:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>COMMAND</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[]</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>FUNC</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;ReadHoldingRegisters&#39;</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>ADDRESS</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>COUNT</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>16</span>

<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>response</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>ModbusTcp</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>FUNC</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>ADDRESS</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>COUNT</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>COMMAND</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>response</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>The <code>ModbusTcp</code> method allows sending Modbus TCP commands, performing register reads or writes, and retrieving data from devices. You can use this method in your <strong>Smart Home</strong> project to interact with devices that support the Modbus TCP protocol.</p>
<div class="alert alert-warning" role=alert>
To work with a Modbus RTU device, a configured <strong>node</strong> is required.
</div>
<h3 id=configuration>Configuration:</h3>
<ul>
<li>slave_id <code>1-32</code></li>
<li>address_port <code>localhost:502</code></li>
</ul>
<h3 id=commands>Commands:</h3>
<ul>
<li>Custom set</li>
</ul>
<h3 id=attributes>Attributes:</h3>
<ul>
<li>Custom set</li>
</ul>
<h3 id=status>Status:</h3>
<ul>
<li>Custom set</li>
</ul>
<hr>
<h3 id=available-functions>Available Functions</h3>
<p><strong>1-bit functions</strong></p>
<p>ReadCoils
ReadDiscreteInputs
WriteSingleCoil
WriteMultipleCoils</p>
<p><strong>16-bit functions</strong></p>
<p>ReadInputRegisters
ReadHoldingRegisters
ReadWriteMultipleRegisters
WriteSingleRegister
WriteMultipleRegisters</p>
<hr>
<h3 id=javascript-properties>JavaScript Properties</h3>
<ul>
<li>ENTITY_ID</li>
<li>ModbusRtu</li>
<li>entityAction</li>
<li>Action</li>
</ul>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># Constant with a unique device ID
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>const</span> <span style=color:#000>ENTITY_ID</span>
</code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># Execute a command (function) on the device:
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>result = </span><span style=color:#000>ModbusTcp</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>func</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>addr</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>count</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>command</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>func</td>
<td>Function to be executed on the device</td>
</tr>
<tr>
<td>addr</td>
<td>Address of the first register (40108-40001 = 107 = 6B hex)</td>
</tr>
<tr>
<td>count</td>
<td>Number of registers to read (reading 3 registers from 40108 to 40110)</td>
</tr>
<tr>
<td>command</td>
<td>Command</td>
</tr>
</tbody>
</table>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># Event handler function for actions:
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>entityAction = </span><span style=color:#000>(entityId, actionName, args)-&gt;</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>entityId</td>
<td>Unique ID of the device</td>
</tr>
<tr>
<td>actionName</td>
<td>System name of the action</td>
</tr>
<tr>
<td>args</td>
<td>Type: map[string]any</td>
</tr>
</tbody>
</table>
<div class="alert alert-warning" role=alert>
The <strong>Action</strong> object is available in action scripts and scripts attached to the device.
</div>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>state = </span><span style=color:#000;font-weight:700>{</span>
  <span style=color:#000>new_state: </span><span style=color:#4e9a06>&#39;ENABLED&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000>attribute_values: </span><span style=color:#000;font-weight:700>{</span>
    <span style=color:#000>heat: </span><span style=color:#204a87;font-weight:700>false</span>
  <span style=color:#000;font-weight:700>},</span>
  <span style=color:#000>settings_value: </span><span style=color:#000;font-weight:700>{},</span>
  <span style=color:#000>storage_save: </span><span style=color:#204a87;font-weight:700>true</span>
<span style=color:#000;font-weight:700>}</span> 
<span style=color:#8f5902;font-style:italic># Save the state 
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>EntitySetState</span> <span style=color:#000>ENTITY_ID</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>state</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>new_state</td>
<td>Unique system name of the state</td>
</tr>
<tr>
<td>attribute_values</td>
<td>Values of attributes previously defined for the device</td>
</tr>
<tr>
<td>settings_value</td>
<td>Values of settings previously defined for the device</td>
</tr>
<tr>
<td>storage_save</td>
<td>Flag indicating whether to save the state</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=example-coffeescript-code>Example CoffeeScript code</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># ModbusTcp
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#4e9a06>&#34;use strict&#34;</span><span style=color:#000;font-weight:700>;</span>

<span style=color:#000>checkStatus = </span><span style=color:#000>-&gt;</span>
  <span style=color:#000>COMMAND = </span><span style=color:#000;font-weight:700>[]</span>
  <span style=color:#000>FUNC = </span><span style=color:#4e9a06>&#39;ReadHoldingRegisters&#39;</span>
  <span style=color:#000>ADDRESS = </span><span style=color:#0000cf;font-weight:700>0</span>
  <span style=color:#000>COUNT = </span><span style=color:#0000cf;font-weight:700>16</span>

  <span style=color:#000>res = </span><span style=color:#000>ModbusTcp</span> <span style=color:#000>FUNC</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>ADDRESS</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>COUNT</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>COMMAND</span>
  <span style=color:#000>print</span> <span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>error</span>
  <span style=color:#000>print</span> <span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>result</span>
  <span style=color:#000>print</span> <span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>time</span>

<span style=color:#000>entityAction = </span><span style=color:#000>(entityId, actionName, args)-&gt;</span>
  <span style=color:#204a87;font-weight:700>switch</span> <span style=color:#000>actionName</span>
    <span style=color:#204a87;font-weight:700>when</span> <span style=color:#4e9a06>&#39;ON&#39;</span> <span style=color:#204a87;font-weight:700>then</span> <span style=color:#000>doOnAction</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#204a87;font-weight:700>when</span> <span style=color:#4e9a06>&#39;OFF&#39;</span> <span style=color:#204a87;font-weight:700>then</span> <span style=color:#000>doOffAction</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#204a87;font-weight:700>when</span> <span style=color:#4e9a06>&#39;CHECK&#39;</span> <span style=color:#204a87;font-weight:700>then</span> <span style=color:#000>checkStatus</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#204a87;font-weight:700>when</span> <span style=color:#4e9a06>&#39;ON_WITH_ERR&#39;</span> <span style=color:#204a87;font-weight:700>then</span> <span style=color:#000>doOnErrAction</span><span style=color:#000;font-weight:700>()</span>

</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-0369b4decf3a671c6e8e5d18b35ebcef>6 - Alexa</h1>
<div class="alert alert-warning" role=alert>
Incomplete article
</div>
<p>In the <strong>Smart Home</strong> system, there is an Amazon Alexa plugin that provides integration with the Amazon Alexa voice assistant. This plugin allows you to control devices and perform various operations in your smart home using voice commands.</p>
<p>The Amazon Alexa plugin offers the following functionality:</p>
<ol>
<li>
<p>Voice command recognition and processing: The plugin can receive voice commands from the user sent through the Amazon Alexa voice assistant. It recognizes the commands, analyzes them, and performs the corresponding actions in your smart home.</p>
</li>
<li>
<p>Device control: The plugin enables you to control devices in your smart home using voice commands. For example, you can say &ldquo;Alexa, turn on the lights in the living room&rdquo; or &ldquo;Alexa, set the temperature to 25 degrees.&rdquo;</p>
</li>
<li>
<p>Integration with other system features: The Amazon Alexa plugin integrates with other features of the <strong>Smart Home</strong> system. For instance, you can use voice commands to trigger scenarios, control automated tasks, or obtain information about device status.</p>
</li>
</ol>
<p>To use the Amazon Alexa plugin in your <strong>Smart Home</strong> project, you need to set it up and connect it to your Amazon Alexa account. After that, you can configure voice commands and actions to control your smart home through the Amazon Alexa voice assistant.</p>
<p>The Amazon Alexa plugin for the <strong>Smart Home</strong> system includes the following JavaScript handlers:</p>
<ol>
<li><code>skillOnLaunch</code>: This handler is called when the skill is launched on an Amazon Alexa device. It is intended to handle the initial skill launch event. You can define logic or perform necessary actions when the skill is launched. Example usage:</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>skillOnLaunch</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#8f5902;font-style:italic>// Logic for handling the skill launch event
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>};</span>
</code></pre></div><ol start=2>
<li><code>skillOnSessionEnd</code>: This handler is called when the session with the skill ends. It allows you to perform specific actions when the session with the user is terminated. For example, you can save state or perform final operations. Example usage:</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>skillOnSessionEnd</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#8f5902;font-style:italic>// Logic for session end
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>};</span>
</code></pre></div><ol start=3>
<li><code>skillOnIntent</code>: This handler is called when the skill receives intents from the user. It is intended to handle different intents and perform corresponding actions. You can define logic for intent handling and interaction with your smart home. Example usage:</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>skillOnIntent</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#8f5902;font-style:italic>// Logic for handling intents
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>};</span>
</code></pre></div><p>These handlers provide the ability to handle skill launch events, session termination, and user intents within the context of the Amazon Alexa plugin. You can define your own logic and perform necessary actions in each of these handlers according to your project requirements.</p>
<h3 id=code-example>Code Example</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>skillOnLaunch = </span><span style=color:#000>-&gt;</span>
<span style=color:#8f5902;font-style:italic>#print &#39;---action onLaunch---&#39;
</span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>Done</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;skillOnLaunch&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>skillOnSessionEnd = </span><span style=color:#000>-&gt;</span>
<span style=color:#8f5902;font-style:italic>#print &#39;---action onSessionEnd---&#39;
</span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>Done</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;skillOnSessionEnd&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>skillOnIntent = </span><span style=color:#000>-&gt;</span>
<span style=color:#8f5902;font-style:italic>#print &#39;---action onIntent---&#39;
</span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>state = </span><span style=color:#4e9a06>&#39;on&#39;</span>
  <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>Alexa</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>slots</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;state&#39;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#39;off&#39;</span>
    <span style=color:#000>state = </span><span style=color:#4e9a06>&#39;off&#39;</span>

  <span style=color:#000>place = </span><span style=color:#000>Alexa</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>slots</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;place&#39;</span><span style=color:#000;font-weight:700>]</span>

  <span style=color:#000>Done</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;</span><span style=color:#4e9a06>#{</span><span style=color:#000>place</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>_</span><span style=color:#4e9a06>#{</span><span style=color:#000>state</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>&#34;</span><span style=color:#000;font-weight:700>)</span>

  <span style=color:#000>Alexa</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>sendMessage</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;</span><span style=color:#4e9a06>#{</span><span style=color:#000>place</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>_</span><span style=color:#4e9a06>#{</span><span style=color:#000>state</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>&#34;</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-ef2b94f1a2a793c6662e60a76d3c9154>7 - Cgminer</h1>
<p>Extension for <strong>ASIC</strong> Device Monitoring</p>
<p>Available Brands:</p>
<ul>
<li>Bitmine Antminer</li>
</ul>
<h3 id=configuration>Configuration:</h3>
<ul>
<li>host</li>
<li>port</li>
<li>timeout</li>
<li>user</li>
<li>pass</li>
<li>manufacturer</li>
<li>model</li>
</ul>
<h3 id=commands>Commands:</h3>
<ul>
<li>custom set</li>
</ul>
<h3 id=attributes>Attributes:</h3>
<ul>
<li>custom set</li>
</ul>
<h3 id=status>Status:</h3>
<ul>
<li>custom set</li>
</ul>
</div>
<div class=td-content>
<h1 id=pg-e8459aa132552732476b3a393a8246c7>7.1 - Bitmine</h1>
<p>Working with Bitmine Antminer ASIC devices.</p>
<p>Supported devices:</p>
<ul>
<li>S9</li>
<li>S7</li>
<li>L3</li>
<li>L3</li>
<li>D3</li>
<li>T9</li>
</ul>
<h3 id=javascript-properties>JavaScript Properties</h3>
<hr>
<h3 id=miner-base-entity>Miner Base Entity</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#8f5902;font-style:italic>// Constant with the unique device ID
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>ENTITY_ID</span><span style=color:#000;font-weight:700>;</span>
</code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>result</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Miner</span>
    <span style=color:#000;font-weight:700>.</span><span style=color:#000>stats</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#000;font-weight:700>.</span><span style=color:#000>devs</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#000;font-weight:700>.</span><span style=color:#000>summary</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#000;font-weight:700>.</span><span style=color:#000>pools</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#000;font-weight:700>.</span><span style=color:#000>addPool</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>url</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000;font-weight:700>.</span><span style=color:#000>version</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#000;font-weight:700>.</span><span style=color:#000>enable</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>poolId</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000;font-weight:700>.</span><span style=color:#000>disable</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>poolId</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000;font-weight:700>.</span><span style=color:#204a87;font-weight:700>delete</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>poolId</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000;font-weight:700>.</span><span style=color:#000>switchPool</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>poolId</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000;font-weight:700>.</span><span style=color:#000>restart</span><span style=color:#000;font-weight:700>();</span>
</code></pre></div><table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>Type: Object (Result)</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>stats</td>
<td>Type: Method, statistics</td>
</tr>
<tr>
<td>devs</td>
<td>Type: Method, statistics</td>
</tr>
<tr>
<td>summary</td>
<td>Type: Method, statistics</td>
</tr>
<tr>
<td>pools</td>
<td>Type: Method, server list</td>
</tr>
<tr>
<td>addPool</td>
<td>Type: Method, add server</td>
</tr>
<tr>
<td>version</td>
<td>Type: Method, firmware version</td>
</tr>
<tr>
<td>enable</td>
<td>Type: Method, enable server</td>
</tr>
<tr>
<td>disable</td>
<td>Type: Method, disable server</td>
</tr>
<tr>
<td>delete</td>
<td>Type: Method, delete server</td>
</tr>
<tr>
<td>switchPool</td>
<td>Type: Method, switch server</td>
</tr>
<tr>
<td>restart</td>
<td>Type: Method, soft device restart</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=result-object>Result Object</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>result</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{</span>
  <span style=color:#000>error</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000>errMessage</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000>result</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span>
<span style=color:#000;font-weight:700>};</span>
</code></pre></div><table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>error</td>
<td>Type: boolean, error indicator</td>
</tr>
<tr>
<td>errMessage</td>
<td>Type: string, human-readable error message</td>
</tr>
<tr>
<td>result</td>
<td>Type: string, JSON object in string format, if the request is completed without errors</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=entityaction-function>entityAction Function</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>entityAction</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>entityId</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>actionName</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>args</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>entityId</td>
<td>Type: string, ID of the entity sending the message</td>
</tr>
<tr>
<td>actionName</td>
<td>Type: string, name of the action, in uppercase without the &lsquo;/&rsquo; symbol</td>
</tr>
<tr>
<td>args</td>
<td>Type: map[string]any</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=entitystateparams-object>EntityStateParams Object</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>entityStateParams</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;new_state&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#34;attribute_values&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{},</span>
  <span style=color:#4e9a06>&#34;settings_value&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{},</span>
  <span style=color:#4e9a06>&#34;storage_save&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span>
<span style=color:#000;font-weight:700>};</span>
</code></pre></div><table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>new_state</td>
<td>Type: *string, name of the new state</td>
</tr>
<tr>
<td>attribute_values</td>
<td>Type: Object, new state of the entity&rsquo;s attributes</td>
</tr>
<tr>
<td>settings_value</td>
<td>Type: Object, new state of the entity&rsquo;s settings</td>
</tr>
<tr>
<td>storage_save</td>
<td>Type: boolean, indicator to save the new state to the database</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=code-example>Code Example</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># cgminer
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#000>ifError</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>(res)-&gt;</span>
  <span style=color:#204a87;font-weight:700>return</span> <span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>res</span> <span style=color:#ce5c00;font-weight:700>||</span> <span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>error</span> <span style=color:#ce5c00;font-weight:700>||</span> <span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#204a87>Error</span>

<span style=color:#000>checkStatus</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>(args)-&gt;</span>
  <span style=color:#000>stats = </span><span style=color:#000>Miner</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>stats</span><span style=color:#000;font-weight:700>()</span>
  <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>ifError</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>stats</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000>EntitySetState</span> <span style=color:#000>ENTITY_ID</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#4e9a06>&#39;new_state&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;ERROR&#39;</span>
    <span style=color:#204a87;font-weight:700>return</span>
  <span style=color:#000>p = </span><span style=color:#000>JSON</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>parse</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>stats</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>result</span><span style=color:#000;font-weight:700>)</span>
  <span style=color:#000>print</span> <span style=color:#000>p</span>

<span style=color:#000>checkSum</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>(args)-&gt;</span>
  <span style=color:#000>summary = </span><span style=color:#000>Miner</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>summary</span><span style=color:#000;font-weight:700>()</span>
  <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>ifError</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>summary</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000>EntitySetState</span> <span style=color:#000>ENTITY_ID</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#4e9a06>&#39;new_state&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;ERROR&#39;</span>
    <span style=color:#204a87;font-weight:700>return</span>
  <span style=color:#000>p = </span><span style=color:#000>JSON</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>parse</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>summary</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>result</span><span style=color:#000;font-weight:700>)</span>
  <span style=color:#000>print</span> <span style=color:#000>p</span>

<span style=color:#000>entityAction = </span><span style=color:#000>(entityId, actionName, args)-&gt;</span>
  <span style=color:#204a87;font-weight:700>switch</span> <span style=color:#000>actionName</span>
    <span style=color:#204a87;font-weight:700>when</span> <span style=color:#4e9a06>&#39;CHECK&#39;</span> <span style=color:#204a87;font-weight:700>then</span> <span style=color:#000>checkStatus</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>args</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#204a87;font-weight:700>when</span> <span style=color:#4e9a06>&#39;SUM&#39;</span> <span style=color:#204a87;font-weight:700>then</span> <span style=color:#000>checkSum</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>args</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-2cd4f07024ce46a2072e53614567c7fb>8 - CPU</h1>
<figure>
<img src=/smart-home/cpuspeed1.png width=300>
</figure>
<p> </p>
<p> </p>
<p>In the <strong>Smart Home</strong> system, there is a &ldquo;cpuspeed&rdquo; plugin that provides CPU parameter display. The plugin grants access to the following parameters:</p>
<ol>
<li>
<p><code>cores</code>: This parameter allows you to retrieve information about the number of CPU cores. It returns a number indicating the total number of CPU cores.</p>
</li>
<li>
<p><code>mhz</code>: This parameter provides information about the current CPU frequency. It returns a value in megahertz (MHz) indicating the current operating frequency of the CPU.</p>
</li>
<li>
<p><code>all</code>: The <code>all</code> parameter provides information about the weighted average CPU load in percentage.</p>
</li>
<li>
<p><code>load_min</code>: This parameter displays the minimum CPU load over a specified period of time. It allows you to obtain information about the minimum CPU load and can be useful for monitoring and analyzing CPU load.</p>
</li>
<li>
<p><code>load_max</code>: The <code>load_max</code> parameter provides information about the maximum CPU load over a specified period of time. It allows you to obtain information about the maximum CPU load and can be useful for analyzing system performance.</p>
</li>
</ol>
<p>Here&rsquo;s an example of using the &ldquo;cpuspeed&rdquo; plugin to retrieve CPU parameters:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>cpuParams</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>EntityGetAttributes</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;cpuspeed.cpuspeed&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>cpuParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>cores</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>cpuParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>mhz</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>cpuParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>all</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>cpuParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>load_min</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>cpuParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>load_max</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>You can use these parameters to display and monitor CPU information in your <strong>Smart Home</strong> project.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-d57edab1df39efff0606d11217501497>9 - HDD</h1>
<figure>
<img src=/smart-home/hdd1.png width=300>
</figure>
<p> </p>
<p> </p>
<p>In the <strong>Smart Home</strong> system, there is a &ldquo;hdd&rdquo; plugin that provides the display of hard disk parameters. This plugin allows you to obtain information about various characteristics of the hard disk. Here are some of these parameters:</p>
<ol>
<li>
<p><code>path</code>: The <code>path</code> parameter contains the path to the mount point of the hard disk.</p>
</li>
<li>
<p><code>fstype</code>: The <code>fstype</code> parameter indicates the file system type used on the hard disk.</p>
</li>
<li>
<p><code>total</code>: The <code>total</code> parameter displays the total size of the hard disk in bytes.</p>
</li>
<li>
<p><code>free</code>: The <code>free</code> parameter shows the amount of free space on the hard disk in bytes.</p>
</li>
<li>
<p><code>used</code>: The <code>used</code> parameter indicates the used space on the hard disk in bytes.</p>
</li>
<li>
<p><code>used_percent</code>: The <code>used_percent</code> parameter shows the percentage of space used on the hard disk.</p>
</li>
<li>
<p><code>inodes_total</code>: The <code>inodes_total</code> parameter displays the total number of inodes on the hard disk.</p>
</li>
<li>
<p><code>inodes_used</code>: The <code>inodes_used</code> parameter indicates the number of used inodes on the hard disk.</p>
</li>
<li>
<p><code>inodes_free</code>: The <code>inodes_free</code> parameter shows the number of free inodes on the hard disk.</p>
</li>
<li>
<p><code>inodes_used_percent</code>: The <code>inodes_used_percent</code> parameter indicates the percentage of inodes used on the hard disk.</p>
</li>
</ol>
<p>Additionally, the &ldquo;hdd&rdquo; plugin has a <code>mount_point</code> settings option that allows you to specify the mount point to display parameters for a specific hard disk.</p>
<p>Here&rsquo;s an example of using the &ldquo;hdd&rdquo; plugin to retrieve hard disk parameters:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>hddParams</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>EntityGetAttributes</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;hdd.hdd1&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>hddSettings</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>EntityGetSettings</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;hdd.hdd1&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hddSettings</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>mount_point</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hddParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>path</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hddParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>fstype</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hddParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>total</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hddParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>free</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hddParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>used</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hddParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>used_percent</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hddParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>inodes_total</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hddParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>inodes_used</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hddParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>inodes_free</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hddParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>inodes_used_percent</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>You can use these parameters to display information about the hard disk in your <strong>Smart Home</strong> project.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-ad72d5bfe8ed58703be4f95c5433bbbb>10 - Memory</h1>
<figure>
<img src=/smart-home/ram1.png width=300>
</figure>
<p> </p>
<p> </p>
<p>In the <strong>Smart Home</strong> system, there is a &ldquo;memory&rdquo; plugin that allows you to display the parameters of the RAM (random access memory). This plugin provides access to the following parameters:</p>
<ol>
<li>
<p><code>total</code>: The <code>total</code> parameter displays the total amount of system memory in bytes.</p>
</li>
<li>
<p><code>free</code>: The <code>free</code> parameter indicates the amount of free memory in bytes.</p>
</li>
<li>
<p><code>used_percent</code>: The <code>used_percent</code> parameter shows the percentage of memory usage.</p>
</li>
</ol>
<p>Here&rsquo;s an example of using the &ldquo;memory&rdquo; plugin to retrieve RAM parameters:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>ramParams</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>EntityGetAttributes</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;memory.memory&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ramParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>total</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ramParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>free</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ramParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>used_percent</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>You can use these parameters to display information about the RAM in your <strong>Smart Home</strong> project.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-646b43ce7e0c9ecd76b7e1b081534840>11 - Memory app</h1>
<figure>
<img src=/smart-home/memory_app.png width=300>
</figure>
<p> </p>
<p> </p>
<p>In the <strong>Smart Home</strong> system, there is a &ldquo;memory_app&rdquo; plugin that provides the display of application memory parameters. This plugin allows you to obtain information about various characteristics of the application memory. Here are some of these parameters:</p>
<ol>
<li>
<p><code>alloc</code>: The <code>alloc</code> parameter displays the amount of memory allocated for the application in bytes. It indicates the current value of allocated memory.</p>
</li>
<li>
<p><code>heap_alloc</code>: The <code>heap_alloc</code> parameter shows the amount of memory allocated in the heap for the application in bytes. This value indicates the current allocation of memory in the heap.</p>
</li>
<li>
<p><code>total_alloc</code>: The <code>total_alloc</code> parameter indicates the total amount of memory allocated for the application since its launch in bytes. It reflects the overall memory volume allocated to the application.</p>
</li>
<li>
<p><code>sys</code>: The <code>sys</code> parameter shows the amount of system memory used by the application. It indicates the current value of system memory usage.</p>
</li>
<li>
<p><code>num_gc</code>: The <code>num_gc</code> parameter displays the number of garbage collections that have occurred since the application was launched.</p>
</li>
<li>
<p><code>last_gc</code>: The <code>last_gc</code> parameter indicates the time of the last garbage collection. It provides information about the time of the last garbage collection performed in the application.</p>
</li>
</ol>
<p>Here&rsquo;s an example of using the &ldquo;memory_app&rdquo; plugin to retrieve application memory parameters:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>memoryParams</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>EntityGetAttributes</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;memory.memory&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>memoryParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>alloc</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>memoryParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>heap_alloc</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>memoryParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>total_alloc</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>memoryParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>sys</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>memoryParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>num_gc</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>memoryParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>last_gc</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>You can use these parameters to display information about the application memory in your <strong>Smart Home</strong> project.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-95c950e340c5f9306b492b322325c66d>12 - Moon</h1>
<figure>
<img src=/smart-home/moon1.png width=300>
</figure>
<p> </p>
<p> </p>
<p>In the <strong>Smart Home</strong> system, there is a &ldquo;moon&rdquo; plugin that allows displaying various parameters related to the phases of the moon and its position in the sky. This plugin provides access to the following parameters:</p>
<ol>
<li>
<p><code>horizonState</code>: The <code>horizonState</code> parameter indicates the moon&rsquo;s state relative to the horizon. It can be either &ldquo;aboveHorizon&rdquo; or &ldquo;belowHorizon&rdquo;.</p>
</li>
<li>
<p><code>phase</code>: The <code>phase</code> parameter displays the current phase of the moon. For example, &ldquo;new_moon&rdquo;, &ldquo;waxing_crescent&rdquo;, &ldquo;first_quarter&rdquo;, &ldquo;waxing_gibbous&rdquo;, &ldquo;full_moon&rdquo;, &ldquo;waning_gibbous&rdquo;, &ldquo;third_quarter&rdquo;, &ldquo;waning_crescent&rdquo;.</p>
</li>
<li>
<p><code>azimuth</code>: The <code>azimuth</code> parameter indicates the azimuthal position of the moon in degrees.</p>
</li>
<li>
<p><code>elevation</code>: The <code>elevation</code> parameter displays the angle of elevation of the moon above the horizon.</p>
</li>
<li>
<p><code>aboveHorizon</code>: The <code>aboveHorizon</code> parameter indicates whether the moon is above the horizon (true/false).</p>
</li>
<li>
<p><code>belowHorizon</code>: The <code>belowHorizon</code> parameter indicates whether the moon is below the horizon (true/false).</p>
</li>
</ol>
<p>Additionally, the &ldquo;moon&rdquo; plugin has settings <code>lat</code> and <code>lon</code>, which allow specifying the latitude and longitude for determining the moon&rsquo;s position in the sky.</p>
<p>Here&rsquo;s an example of using the &ldquo;moon&rdquo; plugin to retrieve moon parameters:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>moonParams</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>EntityGetAttributes</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;moon.moon1&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>moonParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>horizonState</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>moonParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>phase</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>moonParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>azimuth</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>moonParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>elevation</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>moonParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>aboveHorizon</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>moonParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>belowHorizon</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>You can use these parameters to display information about the moon in your <strong>Smart Home</strong> project.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-75a67472ccb2a758f48c263d48be08d3>13 - MQTT</h1>
<p>The &ldquo;mqtt&rdquo; plugin is an extended version of the &ldquo;sensor&rdquo; plugin that provides MQTT protocol functionality. Here are some settings available for the &ldquo;mqtt&rdquo; plugin:</p>
<ol>
<li><code>subscribe_topic</code>: The MQTT topic to subscribe to for receiving data.</li>
<li><code>mqtt_login</code>: The login for authentication when connecting to the MQTT broker.</li>
<li><code>mqtt_pass</code>: The password for authentication when connecting to the MQTT broker.</li>
</ol>
<p>These settings allow you to specify the connection parameters for the MQTT broker and define the topic to subscribe to for receiving data. Thus, the &ldquo;mqtt&rdquo; plugin enables integration with MQTT messages, allowing you to receive data from devices using this protocol and use them in automation systems or other components.</p>
<p>The &ldquo;sensor&rdquo; plugin also implements a JavaScript handler called <code>entityAction</code>. This handler is designed to process actions related to &ldquo;entity&rdquo; type devices based on the &ldquo;sensor&rdquo; plugin.</p>
<p>Here&rsquo;s an example implementation of the <code>entityAction</code> handler:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>entityAction</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>entityId</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>actionName</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>args</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
  <span style=color:#8f5902;font-style:italic>// Action handling code
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>};</span>
</code></pre></div><p>It also implements a JavaScript handler called <code>mqttEvent</code>. This handler is designed to process actions related to &ldquo;entity&rdquo; type devices based on the &ldquo;sensor&rdquo; plugin.</p>
<p>Here&rsquo;s an example implementation of the <code>mqttEvent</code> handler:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>mqttEvent</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>message</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
  <span style=color:#8f5902;font-style:italic>// Action handling code
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>};</span>
</code></pre></div><p>Example usage of the <code>mqttEvent</code> handler:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>mqttEvent</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>(message)-&gt;</span>
  <span style=color:#8f5902;font-style:italic>#print &#39;---mqtt new event from plug---&#39;
</span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>if</span> <span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>message</span> <span style=color:#ce5c00;font-weight:700>||</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>topic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>includes</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;/set&#39;</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#204a87;font-weight:700>return</span>
  <span style=color:#000>payload = </span><span style=color:#000>unmarshal</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>payload</span>
  <span style=color:#000>attrs =
</span><span style=color:#000></span>    <span style=color:#4e9a06>&#39;consumption&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>consumption</span>
    <span style=color:#4e9a06>&#39;linkquality&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>linkquality</span>
    <span style=color:#4e9a06>&#39;power&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>power</span>
    <span style=color:#4e9a06>&#39;state&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>state</span>
    <span style=color:#4e9a06>&#39;temperature&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>temperature</span>
    <span style=color:#4e9a06>&#39;voltage&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>voltage</span>
  <span style=color:#000>EntitySetState</span> <span style=color:#000>ENTITY_ID</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#4e9a06>&#39;new_state&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>state</span>
    <span style=color:#4e9a06>&#39;attribute_values&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>attrs</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-98e5f3c64adb1e62039387bca695fb54>14 - Node</h1>
<p>The Node plugin is designed for the integration of external Node agents, providing the ability to work with Modbus devices on remote servers in the network or from other subnets. This plugin simplifies the connection and interaction with remote Modbus agents, expanding the functionality of the Smart Home system.</p>
<h4 id=device-properties>Device Properties</h4>
<ul>
<li>
<p><strong><code>thread</code> (type: Int)</strong>: Identifier of the thread in which the Node agent is operating.</p>
</li>
<li>
<p><strong><code>rps</code> (type: Int)</strong>: Number of requests per second (Requests Per Second) processed by the agent.</p>
</li>
<li>
<p><strong><code>min</code> (type: Int)</strong>: Minimum response time from the agent in milliseconds.</p>
</li>
<li>
<p><strong><code>max</code> (type: Int)</strong>: Maximum response time from the agent in milliseconds.</p>
</li>
<li>
<p><strong><code>latency</code> (type: Int)</strong>: Delay between the request and response from the agent in milliseconds.</p>
</li>
<li>
<p><strong><code>startedAt</code> (type: Time)</strong>: Time when the Node agent was started.</p>
</li>
</ul>
<h4 id=device-settings>Device Settings</h4>
<ul>
<li>
<p><strong><code>node_login</code> (type: String)</strong>: Login for authentication on the Node agent.</p>
</li>
<li>
<p><strong><code>node_pass</code> (type: String)</strong>: Password for authentication on the Node agent.</p>
</li>
</ul>
<h4 id=device-statuses>Device Statuses</h4>
<ul>
<li>
<p><strong><code>wait</code> (type: String)</strong>: The agent is waiting for connections and requests from the Smart Home system.</p>
</li>
<li>
<p><strong><code>connected</code> (type: String)</strong>: Successful connection established with the Node agent.</p>
</li>
<li>
<p><strong><code>error</code> (type: String)</strong>: An error occurred during the interaction with the Node agent.</p>
</li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-25150d443099ad5064f1a3a39214945d>15 - Отправка сообщений</h1>
<p>The system has a plugin called &ldquo;notifr&rdquo; that provides notification capabilities. It supports methods for sending notifications through various channels, including SMS, push notifications, email, Telegram, and HTML5 notifications.</p>
<p>Here are the supported notification methods provided by the &ldquo;notifr&rdquo; plugin:</p>
<ol>
<li>SMS: Allows sending SMS notifications.</li>
<li>Push: Enables sending push notifications to mobile devices.</li>
<li>Email: Supports sending email notifications.</li>
<li>Telegram: Provides the ability to send notifications through Telegram messenger.</li>
<li>HTML5 notifications: Allows displaying notifications using HTML5 capabilities.</li>
</ol>
<p>With the &ldquo;notifr&rdquo; plugin, you can utilize these methods to send notifications to users through different channels based on their preferences or the nature of the notification.</p>
<p>Please note that the specific implementation and usage details of each method may vary based on the configuration and setup of the &ldquo;notifr&rdquo; plugin in your system.</p>
<h3 id=javascript-свойства>javascript свойства</h3>
<hr>
<h3 id=new-message>New message</h3>
<p>Create message object</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript>  <span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
</code></pre></div><table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>newMessage()</td>
<td>метод</td>
</tr>
<tr>
<td>msg</td>
<td>type: Object <a href=#%D0%BE%D0%B1%D1%8A%D0%B5%D0%BA%D1%82-message>Message</a></td>
</tr>
</tbody>
</table>
<hr>
<h3 id=send-message>Send message</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript>  <span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>send</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>msg</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>send()</td>
<td>метод</td>
</tr>
<tr>
<td>msg</td>
<td>type: Object (Message)</td>
</tr>
</tbody>
</table>
<h3 id=object-message>Object Message</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript>  <span style=color:#000>message = </span><span style=color:#000;font-weight:700>{</span>
  <span style=color:#000>from: </span><span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000>type: </span><span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000>attributes: </span><span style=color:#000;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;key&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;vlue&#34;</span>
  <span style=color:#000;font-weight:700>}</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>from</td>
<td>type: string</td>
</tr>
<tr>
<td>type</td>
<td>type: string</td>
</tr>
<tr>
<td>attributes</td>
<td>type: map[string]string</td>
</tr>
</tbody>
</table>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-c757c4a3128c020469fa7e844a0b07d1>15.1 - EMAIL</h1>
<p>The Email plugin provides the ability to integrate email sending functionality into the Smart Home system. This plugin allows users to configure email parameters and send notifications or messages from devices within the smart home.</p>
<h4 id=device-settings>Device Settings</h4>
<ul>
<li>
<p><strong><code>email</code> (type: String)</strong>: The email through which messages are sent.</p>
</li>
<li>
<p><strong><code>auth</code> (type: String)</strong>: Authentication method for accessing the mail server (e.g., &ldquo;PLAIN&rdquo; or &ldquo;LOGIN&rdquo;).</p>
</li>
<li>
<p><strong><code>pass</code> (type: Encrypted)</strong>: Encrypted password for authentication when accessing the mail server.</p>
</li>
<li>
<p><strong><code>smtp</code> (type: String)</strong>: Outgoing mail server (SMTP) address.</p>
</li>
<li>
<p><strong><code>port</code> (type: Int)</strong>: Outgoing mail server port (e.g., 587 for TLS or 465 for SSL).</p>
</li>
<li>
<p><strong><code>sender</code> (type: String)</strong>: Sender&rsquo;s email address.</p>
</li>
</ul>
<h4 id=message-attributes>Message Attributes</h4>
<ul>
<li>
<p><strong><code>addresses</code> (type: String)</strong>: A list of recipient email addresses, separated by commas.</p>
</li>
<li>
<p><strong><code>subject</code> (type: String)</strong>: The subject of the email message.</p>
</li>
<li>
<p><strong><code>body</code> (type: String)</strong>: The body text of the email message.</p>
</li>
</ul>
<h4 id=example-in-coffeescript>Example in Coffeescript</h4>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
<span style=color:#000>msg.entity_id = </span><span style=color:#4e9a06>&#39;email.google&#39;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
  <span style=color:#4e9a06>&#39;body&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;some text msg&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#39;addresses&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;john.smith@example.com,jane.doe@example.com&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#39;subject&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;Important Notification&#39;</span><span style=color:#000;font-weight:700>,</span>
<span style=color:#000;font-weight:700>};</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-db0e74844d4ec70b97b7eed2dcaa6fde>15.2 - Push уведомления</h1>
<p>Web push notifications are short messages that Smart Home sends to the browser to convey important information. They are displayed even to users who have left the website and do not require email or phone number input.</p>
<h3 id=configuration>Configuration:</h3>
<ul>
<li>Public Key</li>
<li>Private Key</li>
</ul>
<h3 id=attributes>Attributes:</h3>
<ul>
<li>userIDS</li>
<li>title</li>
<li>body</li>
</ul>
<h3 id=javascript-properties>JavaScript Properties:</h3>
<hr>
<h3 id=new-message>New Message</h3>
<p>Creates a message object</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
<span style=color:#000>msg.type = </span><span style=color:#4e9a06>&#39;webpush&#39;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
  <span style=color:#4e9a06>&#39;userIDS&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;14&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#39;title&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;Lorem Ipsum is simply&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#39;body&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum&#39;</span>
<span style=color:#000;font-weight:700>};</span>

</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>newMessage()</td>
<td>Method</td>
</tr>
<tr>
<td>msg</td>
<td>Type: Object (Message)</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=code-example>Code Example:</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># webpush
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>sendMsg</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>()-&gt;</span>
  <span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
  <span style=color:#000>msg.type = </span><span style=color:#4e9a06>&#39;webpush&#39;</span><span style=color:#000;font-weight:700>;</span>
  <span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
    <span style=color:#4e9a06>&#39;userIDS&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;14&#39;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#4e9a06>&#39;title&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;Lorem Ipsum is simply&#39;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#4e9a06>&#39;body&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum&#39;</span>
  <span style=color:#000;font-weight:700>};</span>
  <span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>send</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>msg</span><span style=color:#000;font-weight:700>);</span>

<span style=color:#000>sendMsg</span><span style=color:#000;font-weight:700>()</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-b9e7dc050746e93f66a3fcdc54072720>15.3 - HTML5 Уведомления</h1>
<p>HTML5 notifications are a way to display information to users on a web page without reloading or navigating to another page. Notifications can contain text, images, sound, or video and appear in the bottom-right corner of the screen. HTML5 notifications utilize an API that allows web applications to send notifications to the browser using JavaScript.</p>
<p>Attributes:</p>
<ul>
<li>userIDS: The user IDs associated with the notification.</li>
<li>title: The title of the notification.</li>
<li>body: The body or content of the notification.</li>
</ul>
<p>JavaScript Properties:</p>
<hr>
<h3 id=new-message>New Message:</h3>
<p>Creates a message object.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
<span style=color:#000>msg.type = </span><span style=color:#4e9a06>&#39;html5_notify&#39;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
  <span style=color:#4e9a06>&#39;userIDS&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;14&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#39;title&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;Lorem Ipsum is simply&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#39;body&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum&#39;</span>
<span style=color:#000;font-weight:700>};</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>newMessage()</td>
<td>Method</td>
</tr>
<tr>
<td>msg</td>
<td>Type: Object (Message)</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=code-example>Code Example:</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># html5_notify
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#000>sendMsg</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>()-&gt;</span>
  <span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
  <span style=color:#000>msg.type = </span><span style=color:#4e9a06>&#39;html5_notify&#39;</span><span style=color:#000;font-weight:700>;</span>
  <span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
    <span style=color:#4e9a06>&#39;userIDS&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;14&#39;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#4e9a06>&#39;title&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;Lorem Ipsum is simply&#39;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#4e9a06>&#39;body&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum&#39;</span>
  <span style=color:#000;font-weight:700>};</span>
  <span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>send</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>msg</span><span style=color:#000;font-weight:700>);</span>

<span style=color:#000>sendMsg</span><span style=color:#000;font-weight:700>()</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-ffcf992bf86dcf75fc98ea391689be36>15.4 - Messagebird</h1>
<p>To send SMS notifications through the MessageBird notification service provider, you&rsquo;ll need to register with MessageBird and have a positive balance.</p>
<h3 id=configuration>Configuration:</h3>
<ul>
<li>Access Key</li>
<li>Name</li>
</ul>
<h3 id=attributes>Attributes:</h3>
<ul>
<li>Payment</li>
<li>Type</li>
<li>Amount</li>
</ul>
<h3 id=javascript-properties>JavaScript Properties:</h3>
<hr>
<p>New Message:</p>
<p>Creates a message object.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
<span style=color:#000>msg.entity_id = </span><span style=color:#4e9a06>&#39;messagebird.name&#39;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
  <span style=color:#4e9a06>&#39;phone&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;+79990000001&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#39;body&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;some text&#39;</span>
<span style=color:#000;font-weight:700>};</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>newMessage()</td>
<td>Method</td>
</tr>
<tr>
<td>msg</td>
<td>Type: Object (Message)</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=code-example>Code Example:</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># messagebird
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#000>sendMsg</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>(body)-&gt;</span>
  <span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
  <span style=color:#000>msg.entity_id = </span><span style=color:#4e9a06>&#39;messagebird.name&#39;</span><span style=color:#000;font-weight:700>;</span>
  <span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
    <span style=color:#4e9a06>&#39;phone&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;+79990000001&#39;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#4e9a06>&#39;body&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;some text&#39;</span>
  <span style=color:#000;font-weight:700>};</span>
  <span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>send</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>msg</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-ae8769291a804111fe0f11577b37bb14>15.5 - Slack</h1>
<p>To send notifications to Slack chat, you&rsquo;ll need to configure the following settings:</p>
<h3 id=configuration>Configuration:</h3>
<ul>
<li>Token</li>
<li>User name</li>
</ul>
<h3 id=javascript-properties>JavaScript Properties:</h3>
<hr>
<p>New Message:</p>
<p>Creates a message object.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
<span style=color:#000>msg.entity_id = </span><span style=color:#4e9a06>&#39;slack.name&#39;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
  <span style=color:#4e9a06>&#39;channel&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;#ch&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#39;text&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;some text&#39;</span>
<span style=color:#000;font-weight:700>};</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>newMessage()</td>
<td>Method</td>
</tr>
<tr>
<td>msg</td>
<td>Type: Object (Message)</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=code-example>Code Example:</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># slack
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#000>sendMsg</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>(body)-&gt;</span>
  <span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
    <span style=color:#000>msg.entity_id = </span><span style=color:#4e9a06>&#39;slack.name&#39;</span><span style=color:#000;font-weight:700>;</span>
    <span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
      <span style=color:#4e9a06>&#39;channel&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;#ch&#39;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#4e9a06>&#39;text&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;some text&#39;</span>
  <span style=color:#000;font-weight:700>};</span>
  <span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>send</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>msg</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-3474b889257fbfc72d90e2b2883e468a>15.6 - Telegram</h1>
<p>To work with the Telegram API and handle interactive commands from clients or use event-based notifications, the system provides the following configuration:</p>
<h3 id=configuration>Configuration:</h3>
<ul>
<li>Token</li>
</ul>
<h3 id=commands>Commands:</h3>
<ul>
<li>Custom set of commands</li>
</ul>
<h3 id=attributes>Attributes:</h3>
<ul>
<li>Custom set of attributes</li>
</ul>
<h3 id=actions>Actions:</h3>
<p>There are two reserved commands in the system:</p>
<ul>
<li><strong>/start</strong> - Subscribe to notifications</li>
<li><strong>/quit</strong> - Unsubscribe from notifications</li>
</ul>
<p><strong>Action</strong> - It should be named in lowercase, without the &ldquo;/&rdquo; sign. A custom command will automatically be added to the list of available commands in the <strong>/help</strong> section. The custom command should be called in uppercase <strong>/ACTION</strong> -> <strong>/action</strong>.</p>
<h3 id=javascript-properties>JavaScript Properties:</h3>
<hr>
<h3 id=new-message>New Message:</h3>
<p>Creates a message object.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
<span style=color:#000>msg.entity_id = </span><span style=color:#4e9a06>&#39;telegram.name&#39;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
  <span style=color:#4e9a06>&#39;body&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;some text msg&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#39;chat_id&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>123456</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#39;keys&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;foo&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;bar&#39;</span><span style=color:#000;font-weight:700>],</span>
  <span style=color:#4e9a06>&#39;photo_uri&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;foo&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;bar&#39;</span><span style=color:#000;font-weight:700>],</span>
  <span style=color:#4e9a06>&#39;photo_path&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;foo&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;bar&#39;</span><span style=color:#000;font-weight:700>],</span>
  <span style=color:#4e9a06>&#39;file_path&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;foo&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;bar&#39;</span><span style=color:#000;font-weight:700>],</span>
  <span style=color:#4e9a06>&#39;file_uri&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;foo&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;bar&#39;</span><span style=color:#000;font-weight:700>]</span>
<span style=color:#000;font-weight:700>};</span>

</code></pre></div><table>
<thead>
<tr>
<th>значение</th>
<th>описание</th>
</tr>
</thead>
<tbody>
<tr>
<td>newMessage()</td>
<td>метод</td>
</tr>
<tr>
<td>msg</td>
<td>type: Object (Message)</td>
</tr>
</tbody>
</table>
<p>attributes:</p>
<table>
<thead>
<tr>
<th>значение</th>
<th>описание</th>
</tr>
</thead>
<tbody>
<tr>
<td>body</td>
<td>Type: string, message body</td>
</tr>
<tr>
<td>chat_id</td>
<td>Type: int64, user&rsquo;s id</td>
</tr>
<tr>
<td>keys</td>
<td>Type: []string, keyboard</td>
</tr>
<tr>
<td>photo_uri</td>
<td>Type: []string, image</td>
</tr>
<tr>
<td>photo_path</td>
<td>Type: []string, image</td>
</tr>
<tr>
<td>file_path</td>
<td>Type: []string, file</td>
</tr>
<tr>
<td>file_uri</td>
<td>Type: []string, file</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=telegramaction-function>telegramAction Function:</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>telegramAction = </span><span style=color:#000>(entityId, actionName, args)-&gt;</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>entityId</td>
<td>Type: string, ID of the entity sending the message</td>
</tr>
<tr>
<td>actionName</td>
<td>Type: string, name of the action in uppercase, without the &lsquo;/&rsquo; character</td>
</tr>
<tr>
<td>args</td>
<td>attributes</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=code-example>Code Example:</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># telegram
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>telegramSendReport</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>-&gt;</span>
  <span style=color:#000>entities = </span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;device.l3n1&#39;</span><span style=color:#000;font-weight:700>,</span><span style=color:#4e9a06>&#39;device.l3n2&#39;</span><span style=color:#000;font-weight:700>,</span><span style=color:#4e9a06>&#39;device.l3n3&#39;</span><span style=color:#000;font-weight:700>,</span><span style=color:#4e9a06>&#39;device.l3n4&#39;</span><span style=color:#000;font-weight:700>]</span>
  <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>entityId</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>i</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>entities</span>
    <span style=color:#000>entity = </span><span style=color:#000>GetEntity</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>entityId</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000>attr = </span><span style=color:#000>EntityGetAttributes</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>entityId</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000>sendMsg</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>format</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>entityId</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>entity</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>state</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>attr</span><span style=color:#000;font-weight:700>))</span>
  
<span style=color:#000>telegramAction = </span><span style=color:#000>(entityId, actionName)-&gt;</span>
<span style=color:#204a87;font-weight:700>switch</span> <span style=color:#000>actionName</span>
    <span style=color:#204a87;font-weight:700>when</span> <span style=color:#4e9a06>&#39;CHECK&#39;</span> <span style=color:#204a87;font-weight:700>then</span> <span style=color:#000>telegramSendReport</span><span style=color:#000;font-weight:700>()</span>

<span style=color:#000>sendMsg</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>(body)-&gt;</span>
  <span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
  <span style=color:#000>msg.entity_id = </span><span style=color:#4e9a06>&#39;telegram.testbot&#39;</span><span style=color:#000;font-weight:700>;</span>
  <span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
    <span style=color:#4e9a06>&#39;body&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>body</span>
  <span style=color:#000;font-weight:700>};</span>
  <span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>send</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>msg</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-56027f5b7f86e356eca9778287b4e9b7>15.7 - Templates</h1>
<p>The <strong>Template</strong> feature allows you to generate and distribute pre-defined messages. It offers the following advantages:</p>
<ul>
<li>Clean code</li>
<li>Different templates for different types</li>
<li>Convenient invocation</li>
</ul>
<h3 id=javascript-properties>JavaScript Properties:</h3>
<hr>
<h3 id=generate-message-from-template>Generate Message from Template</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>tpl = </span><span style=color:#000>template</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>render</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>params</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>Type: string, name of the template</td>
</tr>
<tr>
<td>params</td>
<td>Type: Object, template parameters (e.g., {&lsquo;key&rsquo;:&lsquo;val&rsquo;})</td>
</tr>
<tr>
<td>tpl</td>
<td>Type: string, generated message ready to be sent</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=code-example>Code Example:</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># telegram
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span>

<span style=color:#000>sendMsg</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>(body)-&gt;</span>
  <span style=color:#000>tpl = </span><span style=color:#000>template</span>
    <span style=color:#000;font-weight:700>.</span><span style=color:#000>render</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;name&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#39;key&#39;</span><span style=color:#ce5c00;font-weight:700>:</span><span style=color:#4e9a06>&#39;val&#39;</span><span style=color:#000;font-weight:700>})</span>
  
  <span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
  <span style=color:#000>msg.type = </span><span style=color:#4e9a06>&#39;telegram&#39;</span><span style=color:#000;font-weight:700>;</span>
  <span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
    <span style=color:#4e9a06>&#39;name&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;clavicus&#39;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#4e9a06>&#39;body&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>tpl</span>
  <span style=color:#000;font-weight:700>};</span>
  <span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>send</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>msg</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-8d473157f65e8e52157febb9c1671a23>15.8 - Twilio</h1>
<p>Sending SMS notifications through the notification service provider <a href=https://www.twilio.com/messaging>Twilio</a>. To be able to send messages, registration with <a href=https://www.twilio.com/messaging>Twilio</a> and a positive balance are required.</p>
<h3 id=configuration>Configuration:</h3>
<ul>
<li>Token</li>
<li>Sid</li>
<li>From</li>
</ul>
<h3 id=attributes>Attributes:</h3>
<ul>
<li>Amount</li>
<li>Sid</li>
<li>Currency</li>
</ul>
<h3 id=javascript-properties>JavaScript Properties:</h3>
<hr>
<h3 id=new-message>New Message</h3>
<p>Creates a message object</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
<span style=color:#000>msg.entity_id = </span><span style=color:#4e9a06>&#39;twilio.name&#39;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
  <span style=color:#4e9a06>&#39;phone&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;+79990000001&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#39;body&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;some text&#39;</span>
<span style=color:#000;font-weight:700>};</span>

</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>newMessage()</td>
<td>Method</td>
</tr>
<tr>
<td>msg</td>
<td>Type: Object (Message)</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=code-example>Code Example:</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># twilio
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#000>sendMsg</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>(body)-&gt;</span>
  <span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
  <span style=color:#000>msg.entity_id = </span><span style=color:#4e9a06>&#39;twilio.name&#39;</span><span style=color:#000;font-weight:700>;</span>
  <span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
    <span style=color:#4e9a06>&#39;phone&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;+79990000001&#39;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#4e9a06>&#39;body&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;some text&#39;</span>
  <span style=color:#000;font-weight:700>};</span>
  <span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>send</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>msg</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-c611e1f9047c1d78be304f536e42a8a9>16 - Scene</h1>
<p>The Scene plugin in the Smart Home system provides a powerful tool for creating and managing automation scenarios. This plugin does not have specific parameters but allows users to combine various actions and device states, creating intelligent scenarios for different events and needs.</p>
<h4 id=advantages-of-using-the-scene-plugin>Advantages of Using the Scene Plugin</h4>
<ol>
<li>
<p><strong>Customization Flexibility:</strong> Users can create scenarios considering different conditions and preferences to optimize the home environment.</p>
</li>
<li>
<p><strong>Integration with Devices:</strong> The Scene plugin allows the combination of various devices (lighting, thermostats, audio systems) for joint impact and the creation of harmonious scenarios.</p>
</li>
<li>
<p><strong>Time Management:</strong> Scenarios can be automated to activate at specific times of the day, making them convenient for daily routines.</p>
</li>
</ol>
<h4 id=examples-of-using-the-scene-plugin>Examples of Using the Scene Plugin</h4>
<ol>
<li>
<p><strong>&ldquo;Good Morning&rdquo; Scenario:</strong></p>
<ul>
<li><strong>Description:</strong> Activates every morning for a comfortable wake-up.</li>
<li><strong>Actions:</strong>
<ul>
<li>Turn on bedroom lights at 50% brightness.</li>
<li>Start morning music in the living room.</li>
<li>Set the thermostat temperature to the optimal level.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>&ldquo;Evening Mode&rdquo; Scenario:</strong></p>
<ul>
<li><strong>Description:</strong> Automatically sets the home for comfort before bedtime.</li>
<li><strong>Actions:</strong>
<ul>
<li>Dim the lighting in the living room and bedroom.</li>
<li>Turn on soft light in the hallway and kitchen.</li>
<li>Set the thermostat to a comfortable temperature.</li>
<li>Start background music for relaxation.</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id=integration-with-other-plugins>Integration with Other Plugins</h4>
<p>The Scene plugin easily integrates with other components of the Smart Home system, allowing the creation of more complex and intelligent scenarios.</p>
<p>These capabilities make the Scene plugin an integral part of the Smart Home automation system, providing users with convenience and intelligent features in their daily lives.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-0a07d6aae278970d2834de3c5c8ba6fd>17 - Sensor</h1>
<p>This &ldquo;sensor&rdquo; plugin allows you to create and manage various types of sensors that can measure and track various environmental parameters such as temperature, humidity, light intensity, and other physical quantities.</p>
<p>Creating an abstract device based on the &ldquo;sensor&rdquo; plugin simplifies the process of integrating different sensors into a smart home system. It provides a unified interface for working with different types of sensors, making it easy to retrieve data from them, set their state, and configure their operation parameters.</p>
<p>Thanks to the flexibility and versatility of the &ldquo;sensor&rdquo; plugin, it is suitable for most use cases where working with sensors and obtaining data about the environment&rsquo;s state is required.</p>
<p>The &ldquo;sensor&rdquo; plugin also implements a JavaScript handler called <code>entityAction</code>. This handler is designed to handle actions related to &ldquo;entity&rdquo; type devices based on the &ldquo;sensor&rdquo; plugin.</p>
<p>Example implementation of the <code>entityAction</code> handler:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>entityAction</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>entityId</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>actionName</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>args</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
  <span style=color:#8f5902;font-style:italic>// Action handling code
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>};</span>
</code></pre></div><p>In this example, the <code>entityAction</code> handler takes two parameters: <code>entityId</code>, representing the identifier of the &ldquo;entity&rdquo; type device, and <code>actionName</code>, representing the name of the action to be performed.</p>
<p>The <code>entityAction</code> handler allows you to perform the necessary logic in response to actions related to &ldquo;entity&rdquo; type devices. Inside the handler, you can access functions and methods of the &ldquo;sensor&rdquo; plugin to perform specific operations, update the devices' state, or interact with other components of the smart home system.</p>
<p>Example usage of the <code>entityAction</code> handler:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>EntityCallAction</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;sensor.sensor123&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;turnOn&#39;</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>In this example, the <code>entityAction</code> handler is called with the device identifier &ldquo;sensor123&rdquo; and the action name &ldquo;turnOn&rdquo;. Inside the handler, you can define the logic associated with executing the required action for the specified device.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-07071769f18bcd958fb6807bfc051634>18 - Sun</h1>
<figure>
<img src=/smart-home/sun1.png width=300>
</figure>
<p> </p>
<p> </p>
<p>The &ldquo;sun&rdquo; plugin allows you to retrieve information about the current position and time of the sun based on the specified coordinates (latitude and longitude). It provides various parameters related to the position of the sun throughout the day, as well as sunrise, sunset, twilight, and other moments. The plugin&rsquo;s state can indicate whether the sun is above or below the horizon.</p>
<p>Parameters:</p>
<ol>
<li><code>horizonState</code>: Horizon state</li>
<li><code>phase</code>: Sun phase</li>
<li><code>azimuth</code>: Sun azimuth</li>
<li><code>elevation</code>: Sun elevation above the horizon</li>
<li><code>sunrise</code>: Sunrise time</li>
<li><code>sunset</code>: Sunset time</li>
<li><code>sunriseEnd</code>: Sunrise end time</li>
<li><code>sunsetStart</code>: Sunset start time</li>
<li><code>dawn</code>: Dawn time</li>
<li><code>dusk</code>: Dusk time</li>
<li><code>nauticalDawn</code>: Nautical dawn time</li>
<li><code>nauticalDusk</code>: Nautical dusk time</li>
<li><code>nightEnd</code>: Night end time</li>
<li><code>night</code>: Night time</li>
<li><code>goldenHourEnd</code>: Golden hour end time</li>
<li><code>goldenHour</code>: Golden hour time</li>
<li><code>solarNoon</code>: Solar noon time</li>
<li><code>nadir</code>: Nadir (minimum sun elevation above the horizon)</li>
</ol>
<p>Settings:</p>
<ol>
<li><code>lat</code>: Latitude (geographic latitude)</li>
<li><code>lon</code>: Longitude (geographic longitude)</li>
</ol>
<p>States:</p>
<ol>
<li><code>aboveHorizon</code>: The sun is above the horizon</li>
<li><code>belowHorizon</code>: The sun is below the horizon</li>
</ol>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-e2fff1dd07e3240d15c8fe3dda77a94e>19 - Triggers</h1>
<p>The &ldquo;trigger&rdquo; plugin is part of the automation system and provides various types of triggers that initiate specific scenarios in response to specific events.</p>
<p>Please refer to the &ldquo;automation&rdquo; section for more information on how to use the &ldquo;trigger&rdquo; plugin and create automation scenarios.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-4183e9971a270328fbc64107268e1231>20 - Updater</h1>
<p>The &ldquo;updated&rdquo; plugin allows the system to check for updates and provides information about the latest version. This is useful for users who want to stay up to date with the latest updates and implement new features or bug fixes. It displays the following parameters:</p>
<ol>
<li><code>latest_version</code>: The number of the latest available version of the <strong>Smart Home</strong> system.</li>
<li><code>latest_version_time</code>: The date and time when the latest version was released.</li>
<li><code>latest_download_url</code>: The URL where the latest version of the system can be downloaded.</li>
<li><code>last_check</code>: The date and time of the last update check.</li>
</ol>
<p>Here&rsquo;s an example of using the &ldquo;updated&rdquo; plugin:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>updateInfo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>EntityGetAttributes</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;updater.updater&#39;</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Latest version:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>updateInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>latest_version</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Latest version time:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>updateInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>latest_version_time</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Latest download URL:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>updateInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>latest_download_url</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Last check:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>updateInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>last_check</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>This code retrieves the attributes of the &ldquo;updated&rdquo; entity and logs the latest version, release time, download URL, and the last update check time.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-d3da1ca7f3ff8128df9b7a16dfe42fe6>21 - Uptime</h1>
<figure>
<img src=/smart-home/uptime1.png width=300>
</figure>
<p> </p>
<p> </p>
<p>In the <strong>Smart Home</strong> system, there is a plugin called &ldquo;uptime&rdquo; that allows displaying the parameters related to the system and application uptime. This plugin provides access to the following parameters:</p>
<ol>
<li>
<p><code>total</code>: The <code>total</code> parameter displays the total uptime of the system or application. It indicates the amount of time that has passed since the start.</p>
</li>
<li>
<p><code>app_started</code>: The <code>app_started</code> parameter indicates the application&rsquo;s start time. It shows the date and time when the application was launched or restarted.</p>
</li>
</ol>
<p>Here&rsquo;s an example of using the &ldquo;uptime&rdquo; plugin to retrieve uptime parameters:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>uptimeParams</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>EntityGetAttributes</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;uptime.uptime&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>uptimeParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>total</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>uptimeParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>app_started</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>You can use these parameters to display information about the system or application uptime in your <strong>Smart Home</strong> project.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-50e5123a4407c924b74ee84b77d3efbf>22 - Version</h1>
<p>The &ldquo;version&rdquo; plugin in the system provides information about the version and build of the project. It displays the following parameters:</p>
<ol>
<li><code>version</code>: The project version.</li>
<li><code>revision</code>: The revision identifier (commit) in the version control system.</li>
<li><code>revision_url</code>: The URL where you can view the details of the revision.</li>
<li><code>generated</code>: The date and time of the project build generation.</li>
<li><code>developers</code>: The list of developers involved in the project.</li>
<li><code>build_num</code>: The project&rsquo;s build number.</li>
<li><code>docker_image</code>: The name of the Docker image associated with the project.</li>
<li><code>go_version</code>: The version of the Go programming language used for project development.</li>
</ol>
<p>The &ldquo;version&rdquo; plugin provides access to this information, which is useful for tracking versions and monitoring the development process.</p>
<p>Here&rsquo;s an example of using the &ldquo;version&rdquo; plugin:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>versionInfo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>EntityGetAttributes</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;version.version&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Project version:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>versionInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>version</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Revision:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>versionInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>revision</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Revision URL:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>versionInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>revision_url</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Generated:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>versionInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>generated</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Developers:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>versionInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>developers</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Build number:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>versionInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>build_num</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Docker image:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>versionInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>docker_image</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Go version:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>versionInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>go_version</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>This plugin allows you to obtain up-to-date information about the project version and use it for various purposes such as displaying the version in the user interface or logging.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-64ab3664ef92bf81dcd376de6083e938>23 - Weather</h1>
<figure>
<img src=/smart-home/weather1.png width=300>
</figure>
<p> </p>
<p> </p>
<p>In the <strong>Smart Home</strong> system, there is a basic &ldquo;weather&rdquo; plugin that provides the foundation for implementing weather plugins. This plugin enables access to weather information and allows the creation and integration of specific weather plugins for different data sources.</p>
<p>The &ldquo;weather&rdquo; plugin includes a list of weather conditions that can be used to display current weather conditions. Here is the list of weather conditions supported by the &ldquo;weather&rdquo; plugin:</p>
<ol>
<li><code>clearSky</code>: Clear sky.</li>
<li><code>fair</code>: Fair weather.</li>
<li><code>partlyCloudy</code>: Partly cloudy.</li>
<li><code>cloudy</code>: Cloudy.</li>
<li><code>lightRainShowers</code>: Light rain showers.</li>
<li><code>rainShowers</code>: Rain showers.</li>
<li><code>heavyRainShowers</code>: Heavy rain showers.</li>
<li><code>lightRainShowersAndThunder</code>: Light rain showers and thunder.</li>
<li><code>rainShowersAndThunder</code>: Rain showers and thunder.</li>
<li><code>heavyRainShowersAndThunder</code>: Heavy rain showers and thunder.</li>
<li><code>lightSleetShowers</code>: Light sleet showers.</li>
<li><code>sleetShowers</code>: Sleet showers.</li>
<li><code>heavySleetShowers</code>: Heavy sleet showers.</li>
<li><code>lightSleetShowersAndThunder</code>: Light sleet showers and thunder.</li>
<li><code>sleetShowersAndThunder</code>: Sleet showers and thunder.</li>
<li><code>heavySleetShowersAndThunder</code>: Heavy sleet showers and thunder.</li>
<li><code>lightSnowShowers</code>: Light snow showers.</li>
<li><code>snowShowers</code>: Snow showers.</li>
<li><code>heavySnowShowers</code>: Heavy snow showers.</li>
<li><code>lightSnowShowersAndThunder</code>: Light snow showers and thunder.</li>
<li><code>snowShowersAndThunder</code>: Snow showers and thunder.</li>
<li><code>heavySnowShowersAndThunder</code>: Heavy snow showers and thunder.</li>
<li><code>lightRain</code>: Light rain.</li>
<li><code>rain</code>: Rain.</li>
<li><code>heavyRain</code>: Heavy rain.</li>
<li><code>lightRainAndThunder</code>: Light rain and thunder.</li>
<li><code>rainAndThunder</code>: Rain and thunder.</li>
<li><code>heavyRainAndThunder</code>: Heavy rain and thunder.</li>
<li><code>lightSleet</code>: Light sleet.</li>
<li><code>sleet</code>: Sleet.</li>
<li><code>heavySleet</code>: Heavy sleet.</li>
</ol>
<p>The &ldquo;weather&rdquo; plugin has basic settings that allow you to configure its behavior and the display of weather information. Here is a description of the basic settings of the &ldquo;weather&rdquo; plugin:</p>
<ol>
<li><code>lat</code>: Latitude - a numerical value indicating the geographic latitude of the location for retrieving weather data. Providing the correct latitude allows obtaining up-to-date weather for the specified region.</li>
<li><code>lon</code>: Longitude - a numerical value indicating the geographic longitude of the location for retrieving weather data. Providing the correct longitude helps obtain up-to-date weather for the specified region.</li>
<li><code>theme</code>: Theme - a parameter that determines the appearance and style of displaying weather data. Possible values may vary depending on the implementation of the plugin and user settings.</li>
<li><code>winter</code>: Winter - a boolean value indicating which type of weather to display for the winter season. This setting allows adapting the display of weather depending on the time of year.</li>
</ol>
<p>Please note that specific settings and their values may vary depending on the implementation of the &ldquo;weather&rdquo; plugin.</p>
<p>The &ldquo;weather&rdquo; plugin implements the following basic properties for displaying weather:</p>
<ol>
<li><code>main</code>: Main weather description (e.g., &ldquo;Clear&rdquo;, &ldquo;Cloudy&rdquo;, &ldquo;Rain&rdquo;, etc.).</li>
<li><code>datetime</code>: Date and time of the weather data.</li>
<li><code>humidity</code>: Air humidity.</li>
<li><code>max_temperature</code>: Maximum temperature.</li>
<li><code>min_temperature</code>: Minimum temperature.</li>
<li><code>pressure</code>: Atmospheric pressure.</li>
<li><code>wind_bearing</code>: Wind direction.
8</li>
</ol>
<p>. <code>wind_speed</code>: Wind speed.</p>
<p>For each of the five days of weather forecast (day1, day2, day3, day4, day5), similar properties are available, with the corresponding day prefix. For example, for the first day of the forecast, properties like <code>day1_main</code>, <code>day1_datetime</code>, <code>day1_humidity</code>, etc., are accessible.</p>
<p>Example usage of the &ldquo;weather&rdquo; plugin&rsquo;s basic properties:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>weatherPlugin</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>WeatherPlugin</span><span style=color:#000;font-weight:700>();</span>

<span style=color:#8f5902;font-style:italic>// Get current weather data
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>currentWeather</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>EntityGetAttributes</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;weather_owm.weather1&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>currentWeather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>main</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>currentWeather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>datetime</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>currentWeather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>humidity</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>currentWeather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>max_temperature</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>currentWeather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>min_temperature</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>currentWeather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pressure</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>currentWeather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>wind_bearing</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>currentWeather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>wind_speed</span><span style=color:#000;font-weight:700>);</span>

<span style=color:#8f5902;font-style:italic>// Get weather data for the first day of the forecast
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>day1Weather</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>EntityGetAttributes</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;weather_owm.weather1&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>day1Weather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>day1_main</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>day1Weather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>day1_datetime</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>day1Weather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>day1_humidity</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>day1Weather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>day1_max_temperature</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>day1Weather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>day1_min_temperature</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>day1Weather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>day1_pressure</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>day1Weather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>day1_wind_bearing</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>day1Weather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>day1_wind_speed</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>Please note that specific properties and their values may vary depending on the implementation of the &ldquo;weather&rdquo; plugin and the weather data source.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-4e6b5c2d397c558708e54206184aa268>23.1 - MET</h1>
<p>Weather forecast from met.no, delivered by the Norwegian Meteorological Institute.</p>
<p>Api version 2.0</p>
<p><a href=https://api.met.no/weatherapi/locationforecast/2.0/classic>https://api.met.no/weatherapi/locationforecast/2.0/classic</a></p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-b2af757d2aed5c975040722fd880df27>23.2 - OWM</h1>
<p>Weather forecast from openweathermap.org</p>
<p>Api version 2.5</p>
<p><a href=https://api.openweathermap.org/data/2.5/onecall>https://api.openweathermap.org/data/2.5/onecall</a></p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-61b4e27718e29c034a152d0ee2706628>24 - Zigbee2mqtt</h1>
<p>The &ldquo;Zigbee2mqtt&rdquo; plugin is part of the system and provides integration between Zigbee devices and an MQTT broker. This plugin allows you to control and manage Zigbee devices through MQTT messages.</p>
<p>The &ldquo;Zigbee2mqtt&rdquo; plugin implements a JavaScript handler called <code>zigbee2mqttEvent</code>, which doesn&rsquo;t take any parameters. Inside the handler, there is an accessible <code>message</code> object that represents the information of the received MQTT message.</p>
<p>The properties of the <code>message</code> object include:</p>
<ol>
<li><code>payload</code>: The value of the message, represented as a dictionary (map) where the keys are strings and the values can be of any type.</li>
<li><code>topic</code>: The MQTT message topic, indicating the source or destination of the message.</li>
<li><code>qos</code>: The Quality of Service level of the MQTT message.</li>
<li><code>duplicate</code>: A flag indicating whether the message is a duplicate.</li>
<li><code>storage</code>: A <code>Storage</code> object that provides access to a data store for caching and retrieving arbitrary values.</li>
<li><code>error</code>: A string containing information about an error if one occurred during message processing.</li>
<li><code>success</code>: A boolean value indicating the successful completion of an operation or message processing.</li>
<li><code>new_state</code>: An <code>StateParams</code> object representing the new state of an actor after an operation is performed.</li>
</ol>
<p>Here&rsquo;s an example of using the <code>zigbee2mqttEvent</code> handler:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>zigbee2mqttEvent</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>message</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Received MQTT message:&#34;</span><span style=color:#000;font-weight:700>);</span>
    <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Payload:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>payload</span><span style=color:#000;font-weight:700>);</span>
    <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Topic:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>topic</span><span style=color:#000;font-weight:700>);</span>
    <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;QoS:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>qos</span><span style=color:#000;font-weight:700>);</span>
    <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Duplicate:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>duplicate</span><span style=color:#000;font-weight:700>);</span>

    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
        <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>error</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Error:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>error</span><span style=color:#000;font-weight:700>);</span>
    <span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>else</span> <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>success</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
        <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Operation successful!&#34;</span><span style=color:#000;font-weight:700>);</span>
        <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;New state:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>new_state</span><span style=color:#000;font-weight:700>);</span>
    <span style=color:#000;font-weight:700>}</span>

    <span style=color:#8f5902;font-style:italic>// Accessing the storage
</span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>storage</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getByName</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;key&#34;</span><span style=color:#000;font-weight:700>);</span>
    <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Value from storage:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><p>The <code>zigbee2mqttEvent</code> handler can be used to process incoming MQTT messages and perform additional operations based on the received data.</p>
<p>Here&rsquo;s an example in CoffeeScript:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>zigbee2mqttEvent</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>(message)-&gt;</span>
  <span style=color:#8f5902;font-style:italic># Print &#39;---mqtt new event from plug---&#39;
</span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>if</span> <span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>message</span> <span style=color:#ce5c00;font-weight:700>||</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>topic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>includes</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;/set&#39;</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#204a87;font-weight:700>return</span>
  <span style=color:#000>payload = </span><span style=color:#000>unmarshal</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>payload</span>
  <span style=color:#000>attrs =
</span><span style=color:#000></span>    <span style=color:#4e9a06>&#39;consumption&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>consumption</span>
    <span style=color:#4e9a06>&#39;linkquality&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>linkquality</span>
    <span style=color:#4e9a06>&#39;power&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>power</span>
    <span style=color:#4e9a06>&#39;state&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>state</span>
    <span style=color:#4e9a06>&#39;temperature&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>temperature</span>
    <span style=color:#4e9a06>&#39;voltage&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>voltage</span>
  <span style=color:#000>EntitySetState</span> <span style=color:#000>ENTITY_ID</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#4e9a06>&#39;new_state&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>state</span>
    <span style=color:#4e9a06>&#39;attribute_values&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>attrs</span>
</code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>zigbee2mqttEvent</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>(message)-&gt;</span>
  <span style=color:#8f5902;font-style:italic># Print &#39;---mqtt new event from button---&#39;
</span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>if</span> <span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>message</span>
    <span style=color:#204a87;font-weight:700>return</span>
  <span style=color:#000>payload = </span><span style=color:#000>unmarshal</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>payload</span>
  <span style=color:#000>attrs =
</span><span style=color:#000></span>    <span style=color:#4e9a06>&#39;battery&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>battery</span>
    <span style=color:#4e9a06>&#39;linkquality&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>linkquality</span>
    <span style=color:#4e9a06>&#39;voltage&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>voltage</span>
  <span style=color:#000>state = </span><span style=color:#4e9a06>&#39;&#39;</span>
  <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>action</span>
    <span style=color:#000>attrs.action = </span><span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>action</span>
    <span style=color:#000>state = </span><span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>action</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#4e9a06>&#34;_action&#34;</span>
  <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>click</span>
    <span style=color:#000>attrs.click = </span><span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>click</span>
    <span style=color:#000>attrs.action = </span><span style=color:#4e9a06>&#34;&#34;</span>
    <span style=color:#000>state = </span><span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>click</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#4e9a06>&#34;_click&#34;</span>
  <span style=color:#000>EntitySetState</span> <span style=color:#000>ENTITY_ID</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#4e9a06>&#39;new_state&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>state</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>toUpperCase</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#4e9a06>&#39;attribute_values&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>attrs</span>
</code></pre></div>
</div>
</main>
</div>
</div>
<footer class="bg-dark py-5 row d-print-none">
<div class="container-fluid mx-sm-5">
<div class=row>
<div class="col-6 col-sm-4 text-xs-center order-sm-2">
</div>
<div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub>
<a class=text-white target=_blank rel=noopener href=https://github.com/e154/smart-home aria-label=GitHub>
<i class="fab fa-github"></i>
</a>
</li>
</ul>
</div>
<div class="col-12 col-sm-4 text-center py-2 order-sm-2">
<small class=text-white>&copy; 2024 Powered by <a href=http://e154.ru>e154.ru</a></small>
<div><small class="ml-1 text-white"><a href=https://github.com/e154/smart-home/blob/master/LICENSE>MIT</a> License Code Documents <a href=http://creativecommons.org/licenses/by/3.0/>CC BY 3.0</a></small></div>
</div>
</div>
</div>
</footer>
</div>
<script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script>
<script src=/smart-home/js/tabpane-persist.js></script>
<script src=/smart-home/js/main.min.307d9740a83ff885dafd50af6ce4f79e2146b78e74ee078b11b627d0d02146a9.js integrity="sha256-MH2XQKg/+IXa/VCvbOT3niFGt4507geLEbYn0NAhRqk=" crossorigin=anonymous></script>
</body>
</html>