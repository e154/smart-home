<!doctype html><html lang=en class=no-js>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=generator content="Hugo 0.89.4"><link rel=canonical type=text/html href=https://e154.github.io/smart-home/en/docs/>
<meta name=ROBOTS content="NOINDEX, NOFOLLOW">
<link rel="shortcut icon" href=/smart-home/favicons/favicon.ico>
<link rel=apple-touch-icon href=/smart-home/favicons/apple-touch-icon-180x180.png sizes=180x180>
<link rel=icon type=image/png href=/smart-home/favicons/favicon-16x16.png sizes=16x16>
<link rel=icon type=image/png href=/smart-home/favicons/favicon-32x32.png sizes=32x32>
<link rel=icon type=image/png href=/smart-home/favicons/android-36x36.png sizes=36x36>
<link rel=icon type=image/png href=/smart-home/favicons/android-48x48.png sizes=48x48>
<link rel=icon type=image/png href=/smart-home/favicons/android-72x72.png sizes=72x72>
<link rel=icon type=image/png href=/smart-home/favicons/android-96x96.png sizes=96x96>
<link rel=icon type=image/png href=/smart-home/favicons/android-144x144.png sizes=144x144>
<link rel=icon type=image/png href=/smart-home/favicons/android-192x192.png sizes=192x192>
<title>Documentation | Smart home</title>
<meta name=description content="

     


 
 
Welcome to the documentation of the Smart Home project! This project is an open-source software designed for smart homes. It offers a …">
<meta property="og:title" content="Documentation">
<meta property="og:description" content="The program complex">
<meta property="og:type" content="website">
<meta property="og:url" content="https://e154.github.io/smart-home/en/docs/"><meta property="og:site_name" content="Smart home">
<meta itemprop=name content="Documentation">
<meta itemprop=description content="The program complex"><meta name=twitter:card content="summary">
<meta name=twitter:title content="Documentation">
<meta name=twitter:description content="The program complex">
<link rel=preload href=/smart-home/scss/main.min.8ebd0f8570c5c2da16785e52cb8f20394c6d706e75009a748bfe4c38f7ae92c1.css as=style>
<link href=/smart-home/scss/main.min.8ebd0f8570c5c2da16785e52cb8f20394c6d706e75009a748bfe4c38f7ae92c1.css rel=stylesheet integrity>
<script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script>
</head>
<body class=td-section>
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
<a class=navbar-brand href=/smart-home/en/>
<span class=navbar-logo></span><span class="text-uppercase font-weight-bold">Smart home</span>
</a>
<div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar>
<ul class="navbar-nav mt-2 mt-lg-0">
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link active" href=/smart-home/en/docs/><span class=active>Documentation</span></a>
</li>
<li class="nav-item dropdown mr-4 d-none d-lg-block">
<a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
English
</a>
<div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink>
<a class=dropdown-item href=/smart-home/docs/>Русский</a>
</div>
</li>
</ul>
</div>
<div class="navbar-nav d-none d-lg-block">
</div>
</nav>
</header>
<div class="container-fluid td-outer">
<div class=td-main>
<div class="row flex-xl-nowrap">
<div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
</div>
<div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
</div>
<main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main>
<div class=td-content>
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.
</p><p>
<a href=/smart-home/en/docs/>Return to the regular view of this page</a>.
</p>
</div>
<h1 class=title>Documentation</h1>
<ul>
<li>1: <a href=#pg-6ad45a4c07647ef1437167d1474c3cfe>Dashboard</a></li>
<ul>
<li>1.1: <a href=#pg-6bea25be625ccc9f997ef24efc5fe445>Entity</a></li>
<li>1.2: <a href=#pg-92a1ce490d5b2270e82a38d7ec4e5f5e>Automation</a></li>
<ul>
<li>1.2.1: <a href=#pg-663b794f38e2652ec4da941b3cce1ac3>Actions</a></li>
<li>1.2.2: <a href=#pg-f398915e040cbcdbf88478a38ed8f7c1>Conditions</a></li>
<li>1.2.3: <a href=#pg-649333aa8bab35b619f6967595405b2d>Triggers</a></li>
</ul>
<li>1.3: <a href=#pg-4177dcddfec763697e168bfb1da48ab1>MQTT</a></li>
<ul>
</ul>
</ul>
<li>2: <a href=#pg-d7eeb6b04c8fab1ac4227a60a3668820>Javascript</a></li>
<ul>
<li>2.1: <a href=#pg-f2652915967ab8262030eca600e1a90e>Actor</a></li>
<li>2.2: <a href=#pg-06d7c61a07052c87c879ee9a9edbc449>Entity</a></li>
<li>2.3: <a href=#pg-e20be52d8b581bb8e117649fd2265871>entityManager</a></li>
<li>2.4: <a href=#pg-9da4eb53c4b9af52d6292b0dc7500e49>hex2arr</a></li>
<li>2.5: <a href=#pg-0680a74cdf0541bf29b386fcca15603d>marshal</a></li>
<li>2.6: <a href=#pg-a9a66c35c8f75d979eae68e087939baf>Mqtt</a></li>
<li>2.7: <a href=#pg-ec6a1606c6e250e3fe20a21896c0fc43>print</a></li>
<li>2.8: <a href=#pg-9c346cca743f679c9d069ea0fb09421c>unmarshal</a></li>
<li>2.9: <a href=#pg-32950fcaf7eadb1a6af01e12b8d6fccc>Execute</a></li>
<li>2.10: <a href=#pg-25ccac5b56080fcd6d09c27147bbc75c>Log</a></li>
<li>2.11: <a href=#pg-def052376f274f2e8abb4278c4e332e3>Storage</a></li>
<li>2.12: <a href=#pg-35746c1f299b0a71f998b8b6a7ff748a>http</a></li>
</ul>
<li>3: <a href=#pg-bb346cf0596c62e042775b393e7fd9b8>Plugins</a></li>
<ul>
<li>3.1: <a href=#pg-421d1625cd3fc0768a5e9395096f9ba0>Modbus</a></li>
<ul>
<li>3.1.1: <a href=#pg-83ccc62bb21aa1015dc85c4aa89b620d>Modbus rtu</a></li>
<li>3.1.2: <a href=#pg-2ab89625f67635397c493f87afe8c5f2>Modbus tcp</a></li>
</ul>
<li>3.2: <a href=#pg-0369b4decf3a671c6e8e5d18b35ebcef>Alexa</a></li>
<li>3.3: <a href=#pg-ef2b94f1a2a793c6662e60a76d3c9154>Cgminer</a></li>
<ul>
<li>3.3.1: <a href=#pg-e8459aa132552732476b3a393a8246c7>Bitmine</a></li>
</ul>
<li>3.4: <a href=#pg-2cd4f07024ce46a2072e53614567c7fb>CPU</a></li>
<li>3.5: <a href=#pg-d57edab1df39efff0606d11217501497>HDD</a></li>
<li>3.6: <a href=#pg-ad72d5bfe8ed58703be4f95c5433bbbb>Memory</a></li>
<li>3.7: <a href=#pg-646b43ce7e0c9ecd76b7e1b081534840>Memory app</a></li>
<li>3.8: <a href=#pg-95c950e340c5f9306b492b322325c66d>Moon</a></li>
<li>3.9: <a href=#pg-75a67472ccb2a758f48c263d48be08d3>MQTT</a></li>
<li>3.10: <a href=#pg-98e5f3c64adb1e62039387bca695fb54>Node</a></li>
<li>3.11: <a href=#pg-25150d443099ad5064f1a3a39214945d>Отправка сообщений</a></li>
<ul>
<li>3.11.1: <a href=#pg-db0e74844d4ec70b97b7eed2dcaa6fde>Push уведомления</a></li>
<li>3.11.2: <a href=#pg-b9e7dc050746e93f66a3fcdc54072720>HTML5 Уведомления</a></li>
<li>3.11.3: <a href=#pg-ffcf992bf86dcf75fc98ea391689be36>Messagebird</a></li>
<li>3.11.4: <a href=#pg-ae8769291a804111fe0f11577b37bb14>Slack</a></li>
<li>3.11.5: <a href=#pg-3474b889257fbfc72d90e2b2883e468a>Telegram</a></li>
<li>3.11.6: <a href=#pg-8d473157f65e8e52157febb9c1671a23>Twilio</a></li>
<li>3.11.7: <a href=#pg-56027f5b7f86e356eca9778287b4e9b7>Шаблон сообщения</a></li>
</ul>
<li>3.12: <a href=#pg-c611e1f9047c1d78be304f536e42a8a9>Scene</a></li>
<li>3.13: <a href=#pg-0a07d6aae278970d2834de3c5c8ba6fd>Sensor</a></li>
<li>3.14: <a href=#pg-07071769f18bcd958fb6807bfc051634>Sun</a></li>
<li>3.15: <a href=#pg-e2fff1dd07e3240d15c8fe3dda77a94e>Triggers</a></li>
<li>3.16: <a href=#pg-4183e9971a270328fbc64107268e1231>Updater</a></li>
<li>3.17: <a href=#pg-d3da1ca7f3ff8128df9b7a16dfe42fe6>Uptime</a></li>
<li>3.18: <a href=#pg-50e5123a4407c924b74ee84b77d3efbf>Version</a></li>
<li>3.19: <a href=#pg-64ab3664ef92bf81dcd376de6083e938>Weather</a></li>
<ul>
<li>3.19.1: <a href=#pg-4e6b5c2d397c558708e54206184aa268>Met</a></li>
<li>3.19.2: <a href=#pg-b2af757d2aed5c975040722fd880df27>Met</a></li>
</ul>
<li>3.20: <a href=#pg-61b4e27718e29c034a152d0ee2706628>Zigbee2mqtt</a></li>
<li>3.21: <a href=#pg-3d0aa008355dfb5e447bc3db96976c8e>Zone</a></li>
</ul>
</ul>
<div class=content>
<figure>
<img src=/smart-home/layer-scheme.png>
</figure>
<p> </p>
<p> </p>
<p>Welcome to the documentation of the Smart Home project! This project is an open-source software designed for smart homes. It offers a set of features and tools to automate and control various aspects of your home, providing convenience, energy efficiency, and security.</p>
<p>The goal of the Smart Home project is to create a flexible and extensible platform that allows you to manage devices and systems in your home through a simple and intuitive interface. Our aim is to make your home more convenient, environmentally friendly, and secure by giving you the ability to control and customize it according to your needs and preferences.</p>
<p>This documentation is intended for developers, researchers, and enthusiasts who want to use the Smart Home project in their own projects or contribute to its development. It provides detailed information on various aspects of the project, including architecture, installation, configuration, API interfaces, and usage examples.</p>
<p>Before starting to use Smart Home, it is recommended to familiarize yourself with this documentation to gain a complete understanding of the project&rsquo;s capabilities and features. If you have any questions or difficulties, feel free to refer to this documentation or reach out to the project community for support.</p>
<p>We hope that the Smart Home project will help you create a smart home that meets your needs and provides comfort, security, and efficiency. Thank you for choosing our project, and we wish you success in using and configuring your smart home!</p>
<p>The documentation includes the following sections:</p>
<p> </p>
<p> </p>
</div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-6ad45a4c07647ef1437167d1474c3cfe>1 - Dashboard</h1>
<figure>
<img src=/smart-home/dashboard1.png>
</figure>
<p> </p>
<p> </p>
<p>The Smart Home project includes a powerful dashboard builder that allows users to create custom user interfaces for controlling and managing their smart homes.</p>
<p>The dashboard builder provides a flexible and intuitive way to customize the visual representation of the smart home. Users can create personalized control panels by arranging widgets and controls in a convenient order.</p>
<p>Using the dashboard builder, you can add and configure various widgets such as control buttons, sliders, sensors, graphs, and more. You can choose and arrange these widgets on the control panel to display and control the devices and functions you need.</p>
<p>The dashboard builder also allows you to create custom layouts and widget groups to organize and structure the control panel. This enables users to create multiple control panels for different zones or functional areas of the smart home.</p>
<p>With the flexible settings and features of the dashboard builder, you can create unique user interfaces that display and control your devices and smart home systems in a way that suits your preferences and style. You can choose color schemes, fonts, widget placement, and other parameters to create a control panel that matches your preferences and style.</p>
<p>In the documentation of the Smart Home project, you will find detailed instructions on how to use the dashboard builder, as well as examples of creating and configuring custom interfaces. This will allow you to create an individual and convenient user experience for managing your smart home and interacting with its features.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-6bea25be625ccc9f997ef24efc5fe445>1.1 - Entity</h1>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>+---------------------+
<span style=color:#000;font-weight:700>|</span>       Entity        <span style=color:#000;font-weight:700>|</span>
+---------------------+
<span style=color:#000;font-weight:700>|</span>      Actions        <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span>      State          <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span>    Attributes       <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span>     Settings        <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span>      Metrics        <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span>      Storage        <span style=color:#000;font-weight:700>|</span>
+---------------------+
</code></pre></div><p>This is a simple scheme that represents an &ldquo;Entity&rdquo; object. Each component has its role and functionality in managing and monitoring the &ldquo;Entity&rdquo; object in a smart home.</p>
<p>The &ldquo;Entity&rdquo; object is a central element of the Smart Home system and combines various aspects of the object, its states, attributes, actions, settings, and metrics. This allows the system to efficiently control and monitor objects in a smart home.</p>
<p>Here is a detailed description of the components of the &ldquo;Entity&rdquo; object:</p>
<p>Actions: The &ldquo;Entity&rdquo; object can receive and process various actions or commands. Actions are operations that can be performed on the object, such as turning on, turning off, changing parameters, etc.</p>
<p>State: The &ldquo;Entity&rdquo; object has a list of states it can transition into. At any given moment, the object can be in only one state. Examples of states may include &ldquo;On,&rdquo; &ldquo;Off,&rdquo; &ldquo;Standby,&rdquo; &ldquo;Playing,&rdquo; etc.</p>
<p>Attributes: Attributes are a storage of the object&rsquo;s state. It is a predefined list of fields and properties that contain information about the current state of the object. Attributes can be represented as a map[string]any, where the key is the attribute name, and the value is the corresponding attribute value.</p>
<p>Settings: The settings of the &ldquo;Entity&rdquo; object are a pre-defined list of immutable fields and properties. They define the configuration parameters of the object that can be set during its setup. Settings can also be represented as a map[string]any.</p>
<p>Metrics: The metrics of the &ldquo;Entity&rdquo; object provide information about its attributes or state, which is used for monitoring and measuring the performance or behavior of the object. Metrics can include data such as the average value of an attribute, the number of state changes, etc.</p>
<p>Storage: The storage of the &ldquo;Entity&rdquo; object provides a history of changes to its state or attributes. It records and stores previous values, allowing for tracking and analyzing the object&rsquo;s change history. The storage can be used for displaying graphs, analytics, or performing other operations with historical data of the object.</p>
<p>The &ldquo;Entity&rdquo; object brings all these components together, providing a unified and flexible approach to managing and monitoring various devices and systems in a smart home.</p>
<p>In the Smart Home system, each &ldquo;Entity&rdquo; object is implemented based on a specific plugin. Plugins provide different functionalities and capabilities for the &ldquo;Entity&rdquo; objects in the system. Some popular plugins that can be used to create &ldquo;Entity&rdquo; objects include sensor, mqtt, weather, automation, and others.</p>
<p>When a new &ldquo;Entity&rdquo; object is created, it is associated with a specific plugin that determines its functionality and capabilities. For example, if the &ldquo;Entity&rdquo; object represents a sensor, the sensor plugin can be used for its implementation. If the &ldquo;Entity&rdquo; object is intended to interact with an MQTT broker, the mqtt plugin can be used for it.</p>
<p>Each plugin provides its own handlers and methods that allow &ldquo;Entity&rdquo; objects to perform specific actions, retrieve data, send messages, etc.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>              +-----------------------+
              <span style=color:#000;font-weight:700>|</span>                       <span style=color:#000;font-weight:700>|</span>
              <span style=color:#000;font-weight:700>|</span>     Smart Home        <span style=color:#000;font-weight:700>|</span>
              <span style=color:#000;font-weight:700>|</span>                       <span style=color:#000;font-weight:700>|</span>
              +-----------------------+
                         <span style=color:#000;font-weight:700>|</span>
                         <span style=color:#000;font-weight:700>|</span>
                         v
              +-----------------------+
              <span style=color:#000;font-weight:700>|</span>                       <span style=color:#000;font-weight:700>|</span>
              <span style=color:#000;font-weight:700>|</span>       Entities        <span style=color:#000;font-weight:700>|</span>
              <span style=color:#000;font-weight:700>|</span>                       <span style=color:#000;font-weight:700>|</span>
              +-----------------------+
                         <span style=color:#000;font-weight:700>|</span>
                         <span style=color:#000;font-weight:700>|</span>
                         v
   +----------------------------------------+
   <span style=color:#000;font-weight:700>|</span>                                        <span style=color:#000;font-weight:700>|</span>
   <span style=color:#000;font-weight:700>|</span>              Plugins                   <span style=color:#000;font-weight:700>|</span>
   <span style=color:#000;font-weight:700>|</span>                                        <span style=color:#000;font-weight:700>|</span>
   +----------------------------------------+
   <span style=color:#000;font-weight:700>|</span>             <span style=color:#000;font-weight:700>|</span>           <span style=color:#000;font-weight:700>|</span>              <span style=color:#000;font-weight:700>|</span>
   <span style=color:#000;font-weight:700>|</span>             <span style=color:#000;font-weight:700>|</span>           <span style=color:#000;font-weight:700>|</span>              <span style=color:#000;font-weight:700>|</span>
   v             v           v              v
+----------+ +----------+ +----------+ +----------+
<span style=color:#000;font-weight:700>|</span>          <span style=color:#000;font-weight:700>|</span> <span style=color:#000;font-weight:700>|</span>          <span style=color:#000;font-weight:700>|</span> <span style=color:#000;font-weight:700>|</span>          <span style=color:#000;font-weight:700>|</span> <span style=color:#000;font-weight:700>|</span>          <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span>  Plugin  <span style=color:#000;font-weight:700>|</span> <span style=color:#000;font-weight:700>|</span>  Plugin  <span style=color:#000;font-weight:700>|</span> <span style=color:#000;font-weight:700>|</span>  Plugin  <span style=color:#000;font-weight:700>|</span> <span style=color:#000;font-weight:700>|</span>  Plugin  <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span>          <span style=color:#000;font-weight:700>|</span> <span style=color:#000;font-weight:700>|</span>          <span style=color:#000;font-weight:700>|</span> <span style=color:#000;font-weight:700>|</span>          <span style=color:#000;font-weight:700>|</span> <span style=color:#000;font-weight:700>|</span>          <span style=color:#000;font-weight:700>|</span>
+----------+ +----------+ +----------+ +----------+
   <span style=color:#000;font-weight:700>|</span>             <span style=color:#000;font-weight:700>|</span>           <span style=color:#000;font-weight:700>|</span>              <span style=color:#000;font-weight:700>|</span>
   <span style=color:#000;font-weight:700>|</span>             <span style=color:#000;font-weight:700>|</span>           <span style=color:#000;font-weight:700>|</span>              <span style=color:#000;font-weight:700>|</span>
   v             v           v              v
+----------+ +----------+ +----------+ +----------+
<span style=color:#000;font-weight:700>|</span>          <span style=color:#000;font-weight:700>|</span> <span style=color:#000;font-weight:700>|</span>          <span style=color:#000;font-weight:700>|</span> <span style=color:#000;font-weight:700>|</span>          <span style=color:#000;font-weight:700>|</span> <span style=color:#000;font-weight:700>|</span>          <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span> Entity <span style=color:#0000cf;font-weight:700>1</span> <span style=color:#000;font-weight:700>|</span> <span style=color:#000;font-weight:700>|</span> Entity <span style=color:#0000cf;font-weight:700>2</span> <span style=color:#000;font-weight:700>|</span> <span style=color:#000;font-weight:700>|</span> Entity <span style=color:#0000cf;font-weight:700>3</span> <span style=color:#000;font-weight:700>|</span> <span style=color:#000;font-weight:700>|</span> Entity <span style=color:#0000cf;font-weight:700>4</span> <span style=color:#000;font-weight:700>|</span>
<span style=color:#000;font-weight:700>|</span>          <span style=color:#000;font-weight:700>|</span> <span style=color:#000;font-weight:700>|</span>          <span style=color:#000;font-weight:700>|</span> <span style=color:#000;font-weight:700>|</span>          <span style=color:#000;font-weight:700>|</span> <span style=color:#000;font-weight:700>|</span>          <span style=color:#000;font-weight:700>|</span>
+----------+ +----------+ +----------+ +----------+

                     ^
                     <span style=color:#000;font-weight:700>|</span>
                     <span style=color:#000;font-weight:700>|</span>
              +------------------+
              <span style=color:#000;font-weight:700>|</span>                  <span style=color:#000;font-weight:700>|</span>
              <span style=color:#000;font-weight:700>|</span>  Automation      <span style=color:#000;font-weight:700>|</span>
              <span style=color:#000;font-weight:700>|</span>                  <span style=color:#000;font-weight:700>|</span>
              +------------------+
</code></pre></div><p>On the diagram, the general structure of the relationship between &ldquo;Entity&rdquo; objects, plugins, and the automation component in the Smart Home system is presented.</p>
<p>Smart Home is the central part of the system and coordinates the interaction between all the components.
&ldquo;Entity&rdquo; objects represent specific devices, sensors, or other components in the system. Each &ldquo;Entity&rdquo; object can use a specific plugin for its implementation.
Plugins provide functionality and capabilities for the &ldquo;Entity&rdquo; objects. They contain logic and methods that allow &ldquo;Entity&rdquo; objects to interact with external devices, gather data, send commands, etc.
The automation component is responsible for creating scenarios and triggering specific actions based on conditions and triggers. It can use &ldquo;Entity&rdquo; objects and their plugins to define conditions, triggers, and actions in the scenarios.
This structure allows the Smart Home system to be flexible and extensible, as new plugins and &ldquo;Entity&rdquo; objects can be added, and the automation component can use them to create various scenarios and automate actions.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-92a1ce490d5b2270e82a38d7ec4e5f5e>1.2 - Automation</h1>
<p>The system includes an &ldquo;Automation&rdquo; component designed to implement scenarios and automated responses to specific actions or events. It allows you to create and configure automatic actions that are triggered when certain conditions or triggers are met.</p>
<p>The &ldquo;Automation&rdquo; component provides capabilities for creating complex scenarios, combining multiple actions, checking conditions, and interacting with various devices or services in the system. Each scenario consists of three main components: Triggers, Conditions, and Actions.</p>
<p>Here is a schematic representation of the automation scenario:</p>
<pre tabindex=0><code>              +----------------+
              |   Triggers     |
              +-------+--------+
                      |
                      v
              +----------------+
              |  Conditions    |
              +-------+--------+
                      |
                      v
              +----------------+
              |   Actions      |
              +----------------+
</code></pre><ol>
<li>
<p>Triggers:</p>
<ul>
<li>Triggers initiate the execution of a scenario. They can be associated with events such as a change in device status, receiving a command from a user, timer expiration, and more.</li>
</ul>
</li>
<li>
<p>Conditions:</p>
<ul>
<li>Conditions determine whether additional checks need to be satisfied for the scenario to be executed. For example, a condition may check the current time of day, the state of a specific device, or other factors.</li>
</ul>
</li>
<li>
<p>Actions:</p>
<ul>
<li>Actions define the tasks to be performed when the scenario is executed. This can include changing the state of devices, sending commands to other devices, executing an HTTP request, sending notifications, and other actions.</li>
</ul>
</li>
</ol>
<p>The entire automation system is built around these components, allowing you to create complex scenarios that respond to events and perform specific tasks in your smart home.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-663b794f38e2652ec4da941b3cce1ac3>1.2.1 - Actions</h1>
<figure>
<img src=/smart-home/actions_window1.png>
</figure>
<p> </p>
<p> </p>
<p>Actions define the tasks that need to be performed when the scenario is executed. This can include changing the state of devices, sending commands to other devices, executing an HTTP request, sending notifications, and other actions.</p>
<p>Example implementation of an action handler:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>automationAction = </span><span style=color:#000>(entityId)-&gt;</span>
    <span style=color:#8f5902;font-style:italic>#print &#39;---action---&#39;
</span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>Action</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>callAction</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;zigbee2mqtt.` + zigbeePlugId + `&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;ON&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>{})</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-f398915e040cbcdbf88478a38ed8f7c1>1.2.2 - Conditions</h1>
<figure>
<img src=/smart-home/condition_window1.png>
</figure>
<p> </p>
<p> </p>
<p>A condition defines an additional check that needs to be performed before executing the scenario. This condition can check the current state of a device or other factors. The condition is an optional component, and if it is present, the execution of the scenario will depend on its result.</p>
<p>Example implementation of a condition handler:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>automationCondition = </span><span style=color:#000>(entityId)-&gt;</span>
    <span style=color:#8f5902;font-style:italic>#print &#39;---condition---&#39;
</span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>entity = </span><span style=color:#000>Condition</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getEntityById</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;zigbee2mqtt.` + zigbeePlugId + `&#39;</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>entity</span> <span style=color:#ce5c00;font-weight:700>||</span> <span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>entity</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>state</span> 
        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>false</span>
    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>entity</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>state</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>name</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#39;ON&#39;</span>
        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>true</span>
    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>false</span>
</code></pre></div><p>Please note that a condition is an optional component. If a condition is present, a check will be performed before executing the actions. If the condition returns a positive result, the actions will be executed. Otherwise, if the condition returns a negative result or is not specified, the actions will be executed without further checking.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-649333aa8bab35b619f6967595405b2d>1.2.3 - Triggers</h1>
<figure>
<img src=/smart-home/trigger_window1.png>
</figure>
<p> </p>
<p> </p>
<p>Each type of trigger has its own handler for performing the corresponding actions.</p>
<p>Here are examples of different types of triggers and their respective handlers:</p>
<ol>
<li><code>TriggerAlexa</code>:</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>automationTriggerAlexa = </span><span style=color:#000>(msg) -&gt;</span>
  <span style=color:#000>p = </span><span style=color:#000>unmarshal</span> <span style=color:#000>msg</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>payload</span>
  <span style=color:#000>Done</span> <span style=color:#000>p</span>
  <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>false</span>
</code></pre></div><p>The <code>automationTriggerAlexa</code> handler is invoked in response to a trigger from Amazon Alexa. It takes the <code>msg</code> message object and can perform specific actions related to this trigger.</p>
<ol start=2>
<li><code>TriggerStateChanged</code>:</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>automationTriggerStateChanged = </span><span style=color:#000>(msg) -&gt;</span>
  <span style=color:#000>print</span> <span style=color:#4e9a06>&#39;---trigger---&#39;</span>
  <span style=color:#000>p = </span><span style=color:#000>unmarshal</span> <span style=color:#000>msg</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>payload</span>
  <span style=color:#000>Done</span> <span style=color:#000>p</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>new_state</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>state</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>name</span>
  <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>false</span>
</code></pre></div><p>The <code>automationTriggerStateChanged</code> handler is called when the state of a device changes. It takes the <code>msg</code> message object and can perform specific actions based on the new state of the device.</p>
<ol start=3>
<li><code>TriggerSystem</code>:</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>automationTriggerSystem = </span><span style=color:#000>(msg) -&gt;</span>
  <span style=color:#000>p = </span><span style=color:#000>unmarshal</span> <span style=color:#000>msg</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>payload</span>
  <span style=color:#000>Done</span> <span style=color:#000>p</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>event</span>
  <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>false</span>
</code></pre></div><p>The <code>automationTriggerSystem</code> handler is invoked in response to system events. It takes the <code>msg</code> message object and can perform specific actions related to this event.</p>
<ol start=4>
<li><code>TriggerTime</code>:</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>automationTriggerTime = </span><span style=color:#000>(msg) -&gt;</span>
  <span style=color:#000>p = </span><span style=color:#000>unmarshal</span> <span style=color:#000>msg</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>payload</span>
  <span style=color:#000>Done</span> <span style=color:#000>p</span>
  <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>false</span>
</code></pre></div><p>The <code>automationTriggerTime</code> handler is called after a certain amount of time has passed. It takes the <code>msg</code> message object and can perform specific actions related to this time.</p>
<p>Each trigger handler can execute the necessary logic in response to the corresponding trigger and then return <code>false</code> to indicate that further processing is not required.</p>
<p>Example implementation:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>automationTriggerStateChanged = </span><span style=color:#000>(msg) -&gt;</span>
    <span style=color:#8f5902;font-style:italic>#print &#39;---trigger---&#39;
</span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>p = </span><span style=color:#000>unmarshal</span> <span style=color:#000>msg</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>payload</span>
    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>p</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>new_state</span> <span style=color:#ce5c00;font-weight:700>||</span> <span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>p</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>new_state</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>state</span>
        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>false</span>
    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>msg</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>new_state</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>state</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>name</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#39;DOUBLE_CLICK&#39;</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-4177dcddfec763697e168bfb1da48ab1>1.3 - MQTT</h1>
<p>The <strong>Smart Home</strong> project system includes a built-in MQTT broker, which allows for message exchange and device control in the smart home using the MQTT (Message Queuing Telemetry Transport) protocol.</p>
<p>MQTT is a lightweight messaging protocol designed for exchanging data between devices in networks with limited bandwidth or unreliable connections. It is based on the publisher-subscriber model and provides reliable message delivery between devices.</p>
<p>The built-in MQTT broker in the <strong>Smart Home</strong> project provides the server-side component for handling MQTT messages. It performs the following functions:</p>
<ol>
<li>
<p>Publisher and Subscriber Support: The MQTT broker accepts messages from publishers and forwards them to subscribers. This enables devices in the smart home to exchange data and control each other.</p>
</li>
<li>
<p>Topics and Filtering: The MQTT broker uses the concept of &ldquo;topics&rdquo; to classify messages. Subscribers can subscribe to specific topics to receive only the data they are interested in. The broker filters messages and forwards them only to subscribers subscribed to the corresponding topics.</p>
</li>
<li>
<p>Guaranteed Message Delivery: The MQTT broker ensures reliable message delivery, guaranteeing that messages will be delivered to subscribers even in case of temporary connection issues or device unavailability.</p>
</li>
<li>
<p>Access Control: The MQTT broker provides authentication and authorization capabilities, allowing control over access to different topics and restricting access to devices and data in the smart home.</p>
</li>
</ol>
<p>The built-in MQTT broker in the <strong>Smart Home</strong> project simplifies the interaction and integration of devices in the smart home. It provides a stable and efficient environment for data exchange and device control using the MQTT protocol. This enables the creation of complex automation scenarios, monitoring device states, and exchanging data between different devices.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-d7eeb6b04c8fab1ac4227a60a3668820>2 - Javascript</h1>
<p>The software logic and applications in the <strong>Smart Home</strong> project are developed using JavaScript, CoffeeScript, and TypeScript. JavaScript is a widely-used programming language that provides flexibility and power in creating interactive components.</p>
<p>The <strong>Smart Home</strong> project utilizes JavaScript to write all the core components that control the smart home. This includes device management logic, data processing, interaction with external APIs, creating the user interface, and much more.</p>
<p>In the <strong>Smart Home</strong> project, you can use JavaScript to create automation rules, schedule configurations, process data from sensors, control lighting, heating, security systems, and many other aspects of your smart home. JavaScript enables easy interaction with devices and systems and allows you to create user interfaces to control all the functions of your home.</p>
<p>Thanks to the flexibility and popularity of JavaScript, you can easily customize and extend the <strong>Smart Home</strong> project according to your needs and preferences. You have the opportunity to use a wide range of JavaScript tools and libraries to adapt the project to your unique requirements and enhance its functionality.</p>
<p>Regardless of your programming skills, JavaScript provides a powerful toolkit for developing software logic and applications in the <strong>Smart Home</strong> project.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-f2652915967ab8262030eca600e1a90e>2.1 - Actor</h1>
<p>In the <strong>Smart Home</strong> project, the JavaScript code includes an accessible object called &ldquo;Actor,&rdquo; which represents a simplified entity model. The Actor object provides convenient methods and properties for interacting with plugin states.</p>
<p>Device State Management: The Actor object provides methods for reading and setting the device state. You can check the current device state and modify it as needed.</p>
<div class="alert alert-warning" role=alert>
The object may not be available in all scopes.
</div>
<p>The &ldquo;Actor&rdquo; object in the <strong>Smart Home</strong> project provides the following methods:</p>
<ol>
<li><code>setState(entityStateParams)</code>: This method allows you to set the state of an actor based on the provided parameters. You pass an <code>entityStateParams</code> object as an argument, which contains the actor&rsquo;s state parameters to be set. For example:</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>entityStateParams</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{</span>
  <span style=color:#000>power</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000>brightness</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>80</span><span style=color:#000;font-weight:700>,</span>
<span style=color:#000;font-weight:700>};</span>

<span style=color:#000>actor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>setState</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>entityStateParams</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><ol start=2>
<li><code>getSettings() -> Map[string]any</code>: This method returns the actor&rsquo;s settings as an associative array. The result is a map, where keys are strings and values can be of any data type. You can use this method to retrieve the actor&rsquo;s settings. Example usage:</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>settings</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>actor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getSettings</span><span style=color:#000;font-weight:700>();</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>settings</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>The methods of the &ldquo;Actor&rdquo; object provide functionality for setting the actor&rsquo;s state based on provided parameters and retrieving the actor&rsquo;s settings. You can use these methods to work with actors in your <strong>Smart Home</strong> project and configure their states according to your requirements.</p>
<hr>
<h3 id=actor-object>Actor Object</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># Example of reading device state
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>Actor</span>
  <span style=color:#000;font-weight:700>.</span><span style=color:#000>setState</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>entityStateParams</span><span style=color:#000;font-weight:700>)</span>
  <span style=color:#000;font-weight:700>.</span><span style=color:#000>getSettings</span><span style=color:#000>() -&gt;</span> <span style=color:#000>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#000>any</span>
</code></pre></div><h3 id=entitystateparams-object>entityStateParams Object</h3>
<table>
<thead>
<tr>
<th>Value</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>new_state</td>
<td>string</td>
<td>Name of the new state (optional)</td>
</tr>
<tr>
<td>attribute_values</td>
<td>map[string]any</td>
<td>Description of the attributes</td>
</tr>
<tr>
<td>settings_value</td>
<td>map[string]any</td>
<td>Description of the settings</td>
</tr>
<tr>
<td>storage_save</td>
<td>bool</td>
<td>Flag for database storage</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=code-example>Code Example</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>settings = </span><span style=color:#000>Actor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getSettings</span><span style=color:#000;font-weight:700>()</span>
<span style=color:#000>headers = </span><span style=color:#000;font-weight:700>[{</span><span style=color:#4e9a06>&#39;apikey&#39;</span><span style=color:#ce5c00;font-weight:700>:</span><span style=color:#000>settings</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;apikey&#39;</span><span style=color:#000;font-weight:700>]}]</span>
<span style=color:#000>url = </span><span style=color:#4e9a06>&#39;https://webhook.site/2692a589-a5bc-4156-af7d-75875578798f&#39;</span>
<span style=color:#000>res = </span><span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>headers</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>headers</span><span style=color:#000;font-weight:700>).</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>url</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-06d7c61a07052c87c879ee9a9edbc449>2.2 - Entity</h1>
<p>In the <strong>Smart Home</strong> project, the &ldquo;Entity&rdquo; object is the main unit and the primary object that stores the device&rsquo;s state and settings.</p>
<p>An &ldquo;Entity&rdquo; represents an abstraction of a specific device in a smart home. It contains information about the device type, its identifier, current state, and other settings.</p>
<p>The key attributes of an &ldquo;Entity&rdquo; include:</p>
<ol>
<li>
<p>Device Type: Determines the category or class of the device, such as &ldquo;light fixture,&rdquo; &ldquo;thermostat,&rdquo; &ldquo;door lock,&rdquo; etc. This helps classify devices and define the operations and settings available to them.</p>
</li>
<li>
<p>Identifier: A unique identifier assigned to the device, which allows it to be uniquely identified within the smart home system. This can be a numerical value, string, or other identification format.</p>
</li>
<li>
<p>Device State: Contains information about the current state of the device, such as &ldquo;on/off,&rdquo; &ldquo;open/closed,&rdquo; &ldquo;temperature,&rdquo; etc. The state can change as a result of operations or events related to the device.</p>
</li>
<li>
<p>Device Settings: Includes various parameters and settings related to the specific device. For example, these could be brightness settings for a light fixture, preferred temperature for a thermostat, etc.</p>
</li>
</ol>
<p>The &ldquo;Entity&rdquo; serves as the main device abstraction in the <strong>Smart Home</strong> project and provides a unified interface for working with different types of devices. This allows convenient management of device states and settings, as well as the creation of flexible automation scenarios and interactions between devices in your smart home.</p>
<h3 id=entity-object-properties>Entity Object Properties</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;id&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;sensor.device1&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#34;type&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;sensor&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#34;description&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;device description&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#34;icon&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#34;image_url&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#34;actions&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
    <span style=color:#000;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;ENABLE&#34;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#4e9a06>&#34;description&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;enable&#34;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#4e9a06>&#34;image_url&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#4e9a06>&#34;icon&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span>
    <span style=color:#000;font-weight:700>},</span>
    <span style=color:#000;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;DISABLE&#34;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#4e9a06>&#34;description&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;disable&#34;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#4e9a06>&#34;image_url&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#4e9a06>&#34;icon&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span>
    <span style=color:#000;font-weight:700>}</span>
  <span style=color:#000;font-weight:700>],</span>
  <span style=color:#4e9a06>&#34;states&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
    <span style=color:#000;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;ENABLED&#34;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#4e9a06>&#34;description&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;enabled state&#34;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#4e9a06>&#34;image_url&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#4e9a06>&#34;icon&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span>
    <span style=color:#000;font-weight:700>},</span>
    <span style=color:#000;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;DISABLED&#34;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#4e9a06>&#34;description&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;disabled state&#34;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#4e9a06>&#34;image_url&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#4e9a06>&#34;icon&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span>
    <span style=color:#000;font-weight:700>}</span>
  <span style=color:#000;font-weight:700>],</span>
  <span style=color:#4e9a06>&#34;state&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;ENABLED&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#4e9a06>&#34;description&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;enabled state&#34;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#4e9a06>&#34;image_url&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#4e9a06>&#34;icon&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span>
  <span style=color:#000;font-weight:700>},</span>
  <span style=color:#4e9a06>&#34;attributes&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{},</span>
  <span style=color:#4e9a06>&#34;area&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>null</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#34;metrics&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>[],</span>
  <span style=color:#4e9a06>&#34;hidden&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><p>The abstract &ldquo;Entity&rdquo; object in the <strong>Smart Home</strong> project provides the following methods:</p>
<ol>
<li><code>setState(state)</code>: This method allows you to set the device state. You pass the new state as the <code>state</code> argument, which will be applied to the device. For example:</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>entity</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>setState</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;on&#39;</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><ol start=2>
<li><code>setAttributes(attributes)</code>: This method is used to set the device attributes. You pass an <code>attributes</code> object as an argument, which contains the new attributes to be applied to the device. Example usage:</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>newAttributes</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{</span>
  <span style=color:#000>brightness</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>80</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000>color</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;red&#39;</span><span style=color:#000;font-weight:700>,</span>
<span style=color:#000;font-weight:700>};</span>

<span style=color:#000>entity</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>setAttributes</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>newAttributes</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><ol start=3>
<li><code>getAttributes()</code>: This method allows you to retrieve the current device attributes. It returns an object with the current attribute values. Example usage:</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>attributes</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>entity</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getAttributes</span><span style=color:#000;font-weight:700>();</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>attributes</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><ol start=4>
<li><code>setMetric(metric, value)</code>: This method allows you to set the device metric. You pass the</li>
</ol>
<p>metric name as the <code>metric</code> argument and the metric value as the <code>value</code> argument. Example usage:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>entity</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>setMetric</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;temperature&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>25</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><ol start=5>
<li><code>callAction(action, params)</code>: This method allows you to invoke a specific action on the device. You pass the action name as the <code>action</code> argument and any required parameters as the <code>params</code> argument. Example usage:</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>entity</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>callAction</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;turnOn&#39;</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>The methods of the &ldquo;Entity&rdquo; object provide convenient capabilities for managing the device&rsquo;s state, attributes, metrics, and executing actions on the device. You can use these methods to create device control logic in your <strong>Smart Home</strong> project.</p>
<h3 id=entity-object-methods>Entity Object Methods</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>Entity</span>
  <span style=color:#000;font-weight:700>.</span><span style=color:#000>setState</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>stateName</span><span style=color:#000;font-weight:700>)</span>
  <span style=color:#000;font-weight:700>.</span><span style=color:#000>setAttributes</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>attrs</span><span style=color:#000;font-weight:700>)</span>
  <span style=color:#000;font-weight:700>.</span><span style=color:#000>getAttributes</span><span style=color:#000>() -&gt;</span> <span style=color:#000>attrs</span>
  <span style=color:#000;font-weight:700>.</span><span style=color:#000>setMetric</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>)</span>
  <span style=color:#000;font-weight:700>.</span><span style=color:#000>callAction</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>)</span>
  <span style=color:#000;font-weight:700>.</span><span style=color:#000>getSettings</span><span style=color:#000>() -&gt;</span> <span style=color:#000>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#000>any</span>
</code></pre></div><table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>setState</code></td>
<td>Sets the current state of the device. <code>stateName</code> - name of the future state.</td>
</tr>
<tr>
<td><code>setAttributes</code></td>
<td>Sets the attributes of the current device state. <code>key</code> - map parameter {key:val}</td>
</tr>
<tr>
<td><code>getAttributes</code></td>
<td>Retrieves the current attributes of the device. <code>attrs</code> - map parameter {key:val}</td>
</tr>
<tr>
<td><code>setMetric</code></td>
<td>Updates the metrics of the device. <code>name</code> - metric name, <code>value</code> - map parameter {key:val}</td>
</tr>
<tr>
<td><code>callAction</code></td>
<td>Executes a command on the device. <code>actionName</code> - name of the command, <code>args</code> - map parameter {key:val}</td>
</tr>
<tr>
<td><code>getSettings</code></td>
<td>Retrieves the settings of the device. <code>settings</code> - map parameter {key:val}</td>
</tr>
</tbody>
</table>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-e20be52d8b581bb8e117649fd2265871>2.3 - entityManager</h1>
<p>In the <strong>Smart Home</strong> project, there is a device manager called &ldquo;Entity Manager&rdquo; that provides convenient access to devices, their settings, and current state.</p>
<div class="alert alert-success" role=alert>
This function is available in any system script.
</div>
<p>The &ldquo;Entity Manager&rdquo; device manager offers a set of methods and functions for managing devices and retrieving information about them. Some key features of the &ldquo;Entity Manager&rdquo; include:</p>
<ol>
<li>
<p><code>getEntity(id) -> Entity</code>: This method allows you to retrieve an &ldquo;Entity&rdquo; object by its identifier.
You pass the device identifier as the <code>id</code> argument, and the method returns the corresponding &ldquo;Entity&rdquo; object.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>entity</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>entityManager</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getEntity</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>id</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div></li>
<li>
<p><code>setState(id, stateName)</code>: This method is used to set the state of a device with the given identifier.
You pass the device identifier as the <code>id</code> argument and the state name as the <code>stateName</code> argument. For example:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>entityManager</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>setState</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>id</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;on&#39;</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div></li>
<li>
<p><code>setAttributes(id, attrs)</code>: This method allows you to set attributes for the device with the given identifier.
You pass the device identifier as the <code>id</code> argument and an object with the new attributes as the <code>attrs</code> argument.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>newAttributes</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{</span>
  <span style=color:#000>brightness</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>80</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000>color</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;red&#39;</span><span style=color:#000;font-weight:700>,</span>
<span style=color:#000;font-weight:700>};</span>

<span style=color:#000>entityManager</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>setAttributes</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>id</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>newAttributes</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div></li>
<li>
<p><code>setMetric(id, name, value)</code>: This method is used to set a metric for the device with the given identifier.
You pass the device identifier as the <code>id</code> argument, the metric name as the <code>name</code> argument, and the metric value as the <code>value</code> argument.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>entityManager</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>setMetric</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>id</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;temperature&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>25</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div></li>
<li>
<p><code>callAction(id, actionName, args)</code>: This method allows you to invoke a specific action on the device with the given identifier.
You pass the device identifier as the <code>id</code> argument, the action name as the <code>actionName</code> argument, and the action-related arguments as the <code>args</code> argument.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>entityManager</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>callAction</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>id</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;turnOn&#39;</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div></li>
<li>
<p><code>callScene(id, args)</code>: This method is used to call a scene with the given identifier.
You pass the scene identifier as the <code>id</code> argument and the scene-related arguments as the <code>args</code> argument.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>entityManager</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>callScene</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>id</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>args</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div></li>
</ol>
<p>The &ldquo;Entity Manager&rdquo; device manager simplifies the management of devices, settings, and state in the <strong>Smart Home</strong> project. It provides a convenient interface for retrieving information about devices, controlling them, and handling related events. This allows you to create more flexible and functional applications for your smart home.</p>
<hr>
<h3 id=entitymanager-object>entityManager object</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># Available methods
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>entityManager</span>
  <span style=color:#000;font-weight:700>.</span><span style=color:#000>getEntity</span><span style=color:#000>(id) -&gt;</span> <span style=color:#000>Entity</span>
  <span style=color:#000;font-weight:700>.</span><span style=color:#000>setState</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>id</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>stateName</span><span style=color:#000;font-weight:700>)</span>
  <span style=color:#000;font-weight:700>.</span><span style=color:#000>setAttributes</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>id</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>attrs</span><span style=color:#000;font-weight:700>)</span>
  <span style=color:#000;font-weight:700>.</span><span style=color:#000>setMetric</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>id</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>)</span>
  <span style=color:#000;font-weight:700>.</span><span style=color:#000>callAction</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>id</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>actionName</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>args</span><span style=color:#000;font-weight:700>)</span>
  <span style=color:#000;font-weight:700>.</span><span style=color:#000>callScene</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>id</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>args</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>The unique identifier of the device.</td>
</tr>
<tr>
<td>getEntity</td>
<td>Find a device, returns <a href=#entity-object-methods>Entity</a>.</td>
</tr>
<tr>
<td>setState</td>
<td>Set the current state, where <strong>stateName</strong> is the name of the future state.</td>
</tr>
<tr>
<td>setAttributes</td>
<td>Set the attribute of the current state, where <strong>attrs</strong> is a map of parameters {</td>
</tr>
</tbody>
</table>
<p>key: val}. |
| setMetric | Update the device&rsquo;s metrics, where <strong>name</strong> is the name of the metric, and <strong>value</strong> is the metric value. |
| callAction | Execute a command on the device, where <strong>actionName</strong> is the name of the command, and <strong>args</strong> is a map of parameters {key: val}. |
| callScene | Execute a scene with the specified <strong>id</strong>. |</p>
<hr>
<h3 id=code-example>Code Example</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># Entity Manager
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#8f5902;font-style:italic># Find a device by its unique id, returns [Entity](#entity-object)
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>device = </span><span style=color:#000>entityManager</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getEntity</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;telegram.clavicus&#39;</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#8f5902;font-style:italic># Set the current state using the unique state name
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>entityManager</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>setState</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;telegram.clavicus&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;IN_WORK&#39;</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#8f5902;font-style:italic># Set attributes for the current state
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>entityManager</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>setAttributes</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;telegram.clavicus&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#39;temp&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>23.3</span><span style=color:#000;font-weight:700>})</span>

<span style=color:#8f5902;font-style:italic># Update device metrics
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>entityManager</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>setMetric</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;telegram.clavicus&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;cpu&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#39;all&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>55</span><span style=color:#000;font-weight:700>})</span>

<span style=color:#8f5902;font-style:italic># Execute a command on the device
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>entityManager</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>callAction</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;floor.light&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;ON&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#39;power&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>30</span><span style=color:#000;font-weight:700>})</span>

<span style=color:#8f5902;font-style:italic># Get settings
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>settings = </span><span style=color:#000>device</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getSettings</span><span style=color:#000;font-weight:700>()</span>
<span style=color:#000>headers = </span><span style=color:#000;font-weight:700>[{</span><span style=color:#4e9a06>&#39;apikey&#39;</span><span style=color:#ce5c00;font-weight:700>:</span><span style=color:#000>settings</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;apikey&#39;</span><span style=color:#000;font-weight:700>]}]</span>
<span style=color:#000>url = </span><span style=color:#4e9a06>&#39;https://webhook.site/2692a589-a5bc-4156-af7d-75875578798f&#39;</span>
<span style=color:#000>res = </span><span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>headers</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>headers</span><span style=color:#000;font-weight:700>).</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>url</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-9da4eb53c4b9af52d6292b0dc7500e49>2.4 - hex2arr</h1>
<p>The <code>hex2arr(hexString)</code> function is available in a JavaScript environment, and it converts a hexadecimal string to a byte array (<code>[]byte</code>).</p>
<p>Here&rsquo;s an example implementation of the <code>hex2arr</code> function:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>hex2arr</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>function</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>hexString</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>result</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[];</span>
    <span style=color:#204a87;font-weight:700>while</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>hexString</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>length</span> <span style=color:#ce5c00;font-weight:700>&gt;=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
        <span style=color:#000>result</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>push</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87>parseInt</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hexString</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>substring</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>),</span> <span style=color:#0000cf;font-weight:700>16</span><span style=color:#000;font-weight:700>));</span>
        <span style=color:#000>hexString</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>hexString</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>substring</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>hexString</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>length</span><span style=color:#000;font-weight:700>);</span>
    <span style=color:#000;font-weight:700>}</span>
    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>result</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#000;font-weight:700>};</span>
</code></pre></div><p>more examples:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>hex2arr</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hexString</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#8f5902;font-style:italic>// Remove all spaces from the string
</span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>hexString</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>hexString</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>replace</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>/\s/g</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;&#39;</span><span style=color:#000;font-weight:700>);</span>

    <span style=color:#8f5902;font-style:italic>// Split the string into pairs of characters (each pair represents a byte)
</span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>hexPairs</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>hexString</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>match</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>/.{1,2}/g</span><span style=color:#000;font-weight:700>);</span>

    <span style=color:#8f5902;font-style:italic>// Convert each pair of characters to a numeric value
</span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>byteArr</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>hexPairs</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>map</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>function</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>hex</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87>parseInt</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hex</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>16</span><span style=color:#000;font-weight:700>);</span>
    <span style=color:#000;font-weight:700>});</span>

    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>byteArr</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><p>You can use the <code>hex2arr</code> function as follows:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>hexString</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;48656C6C6F20576F726C64&#34;</span><span style=color:#000;font-weight:700>;</span> <span style=color:#8f5902;font-style:italic>// Hexadecimal representation of &#34;Hello World&#34;
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>byteArr</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>hex2arr</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hexString</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>byteArr</span><span style=color:#000;font-weight:700>);</span> <span style=color:#8f5902;font-style:italic>// [ 72, 101, 108, 108, 111, 32, 87, 111, 114, 108, 100 ]
</span></code></pre></div><p>In this example, the <code>hex2arr</code> function takes the hexadecimal string <code>"48656C6C6F20576F726C64"</code>, which represents &ldquo;Hello World&rdquo; in hexadecimal format. The result of the function is a byte array containing the corresponding ASCII values of the characters.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-0680a74cdf0541bf29b386fcca15603d>2.5 - marshal</h1>
<p>In the JavaScript environment, there is a function called <code>marshal</code> that converts an object into its JSON representation using the <code>JSON.stringify</code> function.</p>
<p>Here&rsquo;s an implementation example of the <code>marshal</code> function:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>marshal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>obj</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
  <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>JSON</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>stringify</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>obj</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><p>Here&rsquo;s an example of using the <code>marshal</code> function:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>obj</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>name</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;John&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>age</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>30</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>city</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;New York&#34;</span> <span style=color:#000;font-weight:700>};</span>
<span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>jsonStr</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>marshal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>obj</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>jsonStr</span><span style=color:#000;font-weight:700>);</span> <span style=color:#8f5902;font-style:italic>// {&#34;name&#34;:&#34;John&#34;,&#34;age&#34;:30,&#34;city&#34;:&#34;New York&#34;}
</span></code></pre></div><p>In this example, the <code>marshal</code> function takes an object <code>obj</code> and uses the <code>JSON.stringify</code> function to convert the object into its JSON representation. The result of the function will be a JSON string containing the serialized data of the object.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-a9a66c35c8f75d979eae68e087939baf>2.6 - Mqtt</h1>
<p>The &ldquo;Mqtt&rdquo; object in the <strong>Smart Home</strong> project provides the ability to publish messages to an MQTT broker.</p>
<h4 id=quality-of-service-in-mqtt-qos>Quality of Service in MQTT (QoS)</h4>
<p>QoS 0: At most once. At this level, the publisher sends the message to the broker once and does not wait for confirmation. It means &ldquo;fire and forget.&rdquo;</p>
<p>QoS 1: At least once. This level guarantees that the message will be delivered to the broker, but there is a possibility of message duplication from the publisher. When the broker receives a duplicate message, it resends it to the subscribers and sends an acknowledgment to the publisher. If the publisher doesn&rsquo;t receive a PUBACK message from the broker, it resends the packet with the DUP flag set to &ldquo;1.&rdquo;</p>
<p>QoS 2: Exactly once. This level guarantees the delivery of messages to the subscriber and eliminates the possibility of duplicating sent messages.</p>
<div class="alert alert-success" role=alert>
This function is available in any system script.
</div>
<p>The &ldquo;Mqtt&rdquo; object in the <strong>Smart Home</strong> project provides the following method:</p>
<ol>
<li><code>publish(topic, payload, qos, retain)</code>: This method is used to publish messages to an MQTT broker. You pass the arguments <code>topic</code> (the topic), <code>payload</code> (the message content), <code>qos</code> (Quality of Service level), and <code>retain</code> (the &ldquo;retain&rdquo; flag).</li>
</ol>
<ul>
<li><code>topic</code>: A string representing the topic to which the message will be published.</li>
<li><code>payload</code>: The content of the message, which can be a string, an object, or binary data.</li>
<li><code>qos</code>: The Quality of Service level determines the message delivery guarantees. Possible values are 0 (at most once), 1 (at least once with acknowledgment), or 2 (exactly once with retransmission if needed).</li>
<li><code>retain</code>: A flag indicating whether the message should be retained on the broker and sent to new subscribers. Values can be true (retain) or false (do not retain).</li>
</ul>
<p>Usage example:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>topic</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;smart-home/living-room/light&#39;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>payload</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;on&#39;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>qos</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>retain</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>;</span>

<span style=color:#000>Mqtt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>publish</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>topic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>qos</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>retain</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>The <code>publish</code> method allows you to send messages to an MQTT broker for transmitting information and controlling devices or the system as a whole in your <strong>Smart Home</strong> project.</p>
<hr>
<h3 id=mqtt-object>Mqtt object</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># Publish a message
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>Mqtt</span>
  <span style=color:#000;font-weight:700>.</span><span style=color:#000>publish</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>topic</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>qos</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>retain</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>topic</td>
<td>Channel for the message</td>
</tr>
<tr>
<td>payload</td>
<td>JSON object intended for transmission</td>
</tr>
<tr>
<td>qos</td>
<td>Quality of Service (1, 2, 3)</td>
</tr>
<tr>
<td>retain</td>
<td>When publishing data with the retain flag set, the broker will store it. Upon the next subscription to this topic, the broker immediately sends the message with this flag. Only used in PUBLISH messages.</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=code-example>Code Example</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># mqtt
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#000>payload = </span><span style=color:#000>JSON</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>stringify</span><span style=color:#000;font-weight:700>({</span><span style=color:#4e9a06>&#34;state&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>actionName</span><span style=color:#000;font-weight:700>})</span>
<span style=color:#000>Mqtt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>publish</span><span style=color:#4e9a06>&#34;zigbee2mqtt/device/set&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>)</span>

</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-ec6a1606c6e250e3fe20a21896c0fc43>2.7 - print</h1>
<p>In the JavaScript environment, there is a function called <code>print(string)</code> that outputs the specified string to the console.</p>
<p>Example of using the <code>print</code> function:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Hello, world!&#34;</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>In this example, the <code>print</code> function takes the string &ldquo;Hello, world!&rdquo; as an argument and outputs it to the console.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-9c346cca743f679c9d069ea0fb09421c>2.8 - unmarshal</h1>
<p>В JavaScript-окружении доступна функция <code>unmarshal</code>, которая преобразует JSON-строку в объект с помощью функции <code>JSON.parse</code>.</p>
<p>Пример реализации функции <code>unmarshal</code>:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>unmarshal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>j</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
  <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>JSON</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>parse</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>j</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><p>Пример использования функции <code>unmarshal</code>:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>jsonStr</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;{&#34;name&#34;:&#34;John&#34;,&#34;age&#34;:30,&#34;city&#34;:&#34;New York&#34;}&#39;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>obj</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>unmarshal</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>jsonStr</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>obj</span><span style=color:#000;font-weight:700>);</span> <span style=color:#8f5902;font-style:italic>// { name: &#34;John&#34;, age: 30, city: &#34;New York&#34; }
</span></code></pre></div><p>В этом примере функция <code>unmarshal</code> принимает JSON-строку <code>jsonStr</code> и использует функцию <code>JSON.parse</code> для преобразования строки в объект. Результатом выполнения функции будет объект, содержащий данные из JSON-строки.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-32950fcaf7eadb1a6af01e12b8d6fccc>2.9 - Execute</h1>
<p>The <strong>Smart Home</strong> project&rsquo;s system provides the ability to execute arbitrary files and scripts synchronously and asynchronously.</p>
<div class="alert alert-success" role=alert>
This function is available in any system script.
</div>
<p>To achieve this, the following methods are available:</p>
<ol>
<li>
<p><code>ExecuteSync(file, args)</code>: This method allows you to execute files and scripts synchronously. You pass the file name or path to the script as the <code>file</code> argument and any required arguments as an object <code>args</code>. Here&rsquo;s an example:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>file</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;script.js&#39;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>args</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>param1</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;value1&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>param2</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;value2&#39;</span> <span style=color:#000;font-weight:700>};</span>

<span style=color:#000>ExecuteSync</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>file</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>args</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div></li>
<li>
<p><code>ExecuteAsync(file, args)</code>: This method allows you to execute files and scripts asynchronously. The <code>file</code> and <code>args</code> arguments have the same structure as in the <code>ExecuteSync</code> method. Here&rsquo;s an example:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>file</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;script.js&#39;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>args</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>param1</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;value1&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>param2</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;value2&#39;</span> <span style=color:#000;font-weight:700>};</span>

<span style=color:#000>ExecuteAsync</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>file</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>args</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div></li>
</ol>
<p>Both the <code>ExecuteSync</code> and <code>ExecuteAsync</code> methods provide the ability to execute arbitrary files and scripts in your <strong>Smart Home</strong> project. The synchronous mode means that the code execution will block subsequent operations until the script is completed, while the asynchronous mode allows you to continue executing other operations without waiting for the script to finish. You can use these methods for integration with other systems, executing custom scripts, or launching external applications in your <strong>Smart Home</strong> project.</p>
<hr>
<h3 id=code-example>Code Example</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># ExecuteSync
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#4e9a06>&#34;use strict&#34;</span><span style=color:#000;font-weight:700>;</span>

<span style=color:#000>r = </span><span style=color:#000>ExecuteSync</span> <span style=color:#4e9a06>&#34;data/scripts/ping.sh&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;google.com&#34;</span>
<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>r</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>out</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#39;ok&#39;</span>
  <span style=color:#000>print</span> <span style=color:#4e9a06>&#34;site is available ^^&#34;</span>
</code></pre></div><p>ping.sh</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic>#!/usr/bin/env bash
</span><span style=color:#8f5902;font-style:italic></span>
ping -c1 <span style=color:#000>$1</span> &gt; /dev/null 2&gt; /dev/null<span style=color:#000;font-weight:700>;</span> <span style=color:#ce5c00;font-weight:700>[[</span> <span style=color:#000>$?</span> -eq <span style=color:#0000cf;font-weight:700>0</span> <span style=color:#ce5c00;font-weight:700>]]</span> <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> <span style=color:#204a87>echo</span> ok <span style=color:#ce5c00;font-weight:700>||</span> <span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;err&#34;</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-25ccac5b56080fcd6d09c27147bbc75c>2.10 - Log</h1>
<p>In the <strong>Smart Home</strong> project, there is a capability to log events using the &ldquo;Log&rdquo; object.</p>
<div class="alert alert-success" role=alert>
This function is available in any system script.
</div>
<p>The &ldquo;Log&rdquo; object provides the following methods for different logging levels:</p>
<ol>
<li><code>info(txt)</code>: This method is used to log informational messages. You pass the text message as the <code>txt</code> argument. Example usage:</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>Log</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>info</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;This is an informational message.&#39;</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><ol start=2>
<li><code>warn(txt)</code>: This method is used to log warning messages. You pass the text message as the <code>txt</code> argument. Example usage:</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>Log</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>warn</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;This is a warning message.&#39;</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><ol start=3>
<li><code>error(txt)</code>: This method is used to log error messages. You pass the error text message as the <code>txt</code> argument. Example usage:</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>Log</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>error</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;An error occurred.&#39;</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><ol start=4>
<li><code>debug(txt)</code>: This method is used to log debug messages. You pass the debug text message as the <code>txt</code> argument. Example usage:</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>Log</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>debug</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;Debugging information.&#39;</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>The methods of the &ldquo;Log&rdquo; object allow you to log various types of messages such as informational messages, warnings, errors, and debug messages. Logging helps track and analyze events occurring in the <strong>Smart Home</strong> project, making it easier for the development, testing, and debugging process of your application.</p>
<hr>
<h3 id=code-examples>Code examples:</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># Log
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#000>Log</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>info</span> <span style=color:#4e9a06>&#39;some text&#39;</span>
<span style=color:#000>Log</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>warn</span> <span style=color:#4e9a06>&#39;some text&#39;</span>
<span style=color:#000>Log</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>error</span> <span style=color:#4e9a06>&#39;some text&#39;</span>
<span style=color:#000>Log</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>debug</span> <span style=color:#4e9a06>&#39;some text&#39;</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-def052376f274f2e8abb4278c4e332e3>2.11 - Storage</h1>
<p>In the <strong>Smart Home</strong> project, there is an <code>in-memory</code> storage provided, which allows you to store and cache arbitrary values in memory. The values are also periodically archived to disk every minute.</p>
<div class="alert alert-success" role=alert>
This function is available in any system script.
</div>
<p>The following methods are available through the &ldquo;Storage&rdquo; object for working with the storage:</p>
<ol>
<li><code>push(key, value)</code>: This method is used to add a value to the storage. You pass the <code>key</code> and <code>value</code> as arguments, which will be stored in memory. Example usage:</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>Storage</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>push</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;temperature&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>25.5</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><ol start=2>
<li><code>getByName(key)</code>: This method allows you to retrieve a value from the storage based on the specified <code>key</code>. If the value is found in memory, it will be returned. Example usage:</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>temperature</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Storage</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getByName</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;temperature&#39;</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>temperature</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><ol start=3>
<li><code>search(key)</code>: This method performs a search for a value based on the <code>key</code>. It first searches for the value in memory, and if not found, it searches in the database. The result of the search is returned. Example usage:</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>result</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Storage</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>search</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;temperature&#39;</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>result</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><ol start=4>
<li><code>pop(key)</code>: This method removes a value from the storage based on the specified <code>key</code>. If the value is found and removed, the method returns the removed value. Example usage:</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>removedValue</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Storage</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pop</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;temperature&#39;</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>removedValue</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>The methods of the &ldquo;Storage&rdquo; object provide the ability to add, retrieve, search, and remove values from the <code>in-memory</code> storage. You can use this storage for temporary data storage in memory, with the option to save to disk and perform efficient value search.</p>
<hr>
<h3 id=working-with-the-storage>Working with the storage</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>Storage</span>
  <span style=color:#000;font-weight:700>.</span><span style=color:#000>push</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>)</span>
  <span style=color:#000;font-weight:700>.</span><span style=color:#000>getByName</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span>
  <span style=color:#000;font-weight:700>.</span><span style=color:#000>search</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span>
  <span style=color:#000;font-weight:700>.</span><span style=color:#000>pop</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>push</td>
<td>Store a value in the storage with the specified <code>key</code></td>
</tr>
<tr>
<td>getByName</td>
<td>Retrieve a value from the storage based on the specified <code>key</code></td>
</tr>
<tr>
<td>search</td>
<td>Search for a value based on the specified <code>key</code></td>
</tr>
<tr>
<td>pop</td>
<td>Remove a record</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=code-example>Code example</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># Storage
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#000>foo =
</span><span style=color:#000></span>  <span style=color:#4e9a06>&#39;bar&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;bar&#39;</span>

<span style=color:#000>value = </span><span style=color:#000>JSON</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>stringify</span> <span style=color:#000>foo</span>

<span style=color:#8f5902;font-style:italic># save var
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>Storage</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>push</span> <span style=color:#4e9a06>&#39;foo&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>value</span>

<span style=color:#8f5902;font-style:italic># get exist var
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>value = </span><span style=color:#000>Storage</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getByName</span> <span style=color:#4e9a06>&#39;foo&#39;</span>

<span style=color:#8f5902;font-style:italic># search
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>list = </span><span style=color:#000>Storage</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>search</span> <span style=color:#4e9a06>&#39;bar&#39;</span>

<span style=color:#000>Storage</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pop</span> <span style=color:#4e9a06>&#39;foo&#39;</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-35746c1f299b0a71f998b8b6a7ff748a>2.12 - http</h1>
<p>In the <strong>Smart Home</strong> project, there is a capability to perform arbitrary synchronous HTTP requests to external resources.</p>
<p>The <code>http</code> object allows you to make synchronous HTTP requests to external resources, such as API services, and receive responses. You can use this method to integrate with other systems and retrieve or send data through the HTTP protocol in your <strong>Smart Home</strong> project.</p>
<p>Supported methods include:</p>
<ul>
<li>GET</li>
<li>POST</li>
<li>PUT</li>
<li>DELETE</li>
</ul>
<div class="alert alert-success" role=alert>
This function is available in any system script.
</div>
<hr>
<p>For this purpose, the corresponding methods are available:</p>
<h3 id=get-request>GET Request</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>response = </span><span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>url</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>url</td>
<td>The request URL</td>
</tr>
<tr>
<td>response</td>
<td>The response of the request</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=post-request>POST Request</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>response = </span><span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>post</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>url</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>body</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>url</td>
<td>The request URL</td>
</tr>
<tr>
<td>body</td>
<td>The request body</td>
</tr>
<tr>
<td>response</td>
<td>The response of the request</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=headers-request>Headers Request</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>response = </span><span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>headers</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>headers</span><span style=color:#000;font-weight:700>).</span><span style=color:#000>post</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>url</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>body</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>headers</td>
<td>The request headers</td>
</tr>
<tr>
<td>url</td>
<td>The request URL</td>
</tr>
<tr>
<td>body</td>
<td>The request body</td>
</tr>
<tr>
<td>response</td>
<td>The response of the request</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=пример-кода>пример кода</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># GET http
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#000>res = </span><span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;%s&#34;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>error</span>
  <span style=color:#204a87;font-weight:700>return</span>
<span style=color:#000>p = </span><span style=color:#000>JSON</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>parse</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>body</span><span style=color:#000;font-weight:700>)</span>


<span style=color:#8f5902;font-style:italic># POST http
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#000>res = </span><span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>post</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;%s&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#39;foo&#39;</span><span style=color:#ce5c00;font-weight:700>:</span><span style=color:#4e9a06>&#39;bar&#39;</span><span style=color:#000;font-weight:700>})</span>
<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>error</span>
  <span style=color:#204a87;font-weight:700>return</span>
<span style=color:#000>p = </span><span style=color:#000>JSON</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>parse</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>body</span><span style=color:#000;font-weight:700>)</span>


<span style=color:#8f5902;font-style:italic># PUT http
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#000>res = </span><span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>put</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;%s&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#39;foo&#39;</span><span style=color:#ce5c00;font-weight:700>:</span><span style=color:#4e9a06>&#39;bar&#39;</span><span style=color:#000;font-weight:700>})</span>
<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>error</span>
  <span style=color:#204a87;font-weight:700>return</span>
<span style=color:#000>p = </span><span style=color:#000>JSON</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>parse</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>body</span><span style=color:#000;font-weight:700>)</span>


<span style=color:#8f5902;font-style:italic># GET http + custom headers
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#000>res = </span><span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>headers</span><span style=color:#000;font-weight:700>([{</span><span style=color:#4e9a06>&#39;apikey&#39;</span><span style=color:#ce5c00;font-weight:700>:</span><span style=color:#4e9a06>&#39;some text&#39;</span><span style=color:#000;font-weight:700>}]).</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;%s&#34;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>error</span>
<span style=color:#204a87;font-weight:700>return</span>
<span style=color:#000>p = </span><span style=color:#000>JSON</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>parse</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>body</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#8f5902;font-style:italic># DELETE http
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#000>res = </span><span style=color:#000>http</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>delete</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;%s&#34;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>error</span>
  <span style=color:#204a87;font-weight:700>return</span>
<span style=color:#000>p = </span><span style=color:#000>JSON</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>parse</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>body</span><span style=color:#000;font-weight:700>)</span>

</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-bb346cf0596c62e042775b393e7fd9b8>3 - Plugins</h1>
<p>The <strong>Smart Home</strong> project also supports a plugin system, which allows for easy extension of its functionality and integration of third-party components. The plugin system provides flexibility and modularity, enabling users to add new capabilities and customize the project according to their needs.</p>
<p>Plugins in the <strong>Smart Home</strong> project are individual modules written in Go that can be connected and used to add new features and integrate with various devices and services. Each plugin provides specific functionality, such as support for a specific type of devices, integration with external services, or implementation of specific automation rules.</p>
<p>The plugin system in the <strong>Smart Home</strong> project provides standard interfaces and conventions that facilitate the development and integration of plugins. It allows developers to create plugins that can interact with the core system of the project, access data and devices, and add their own functions and capabilities.</p>
<p>Using the plugin system in the <strong>Smart Home</strong> project allows users to choose and configure only the functions they need, avoiding redundancy or unnecessary complexity. They can add new plugins or disable existing ones to create a customized solution that fully meets their requirements.</p>
<p>Thanks to the plugin system, the <strong>Smart Home</strong> project becomes more flexible and extensible, allowing users to adapt it to their unique needs. It also fosters an active community of developers and enhances opportunities for collaboration and plugin sharing, contributing to the further development of the project and the expansion of its ecosystem.</p>
<p>In the documentation of the <strong>Smart Home</strong> project, you will find detailed instructions on creating, installing, and configuring plugins, as well as usage examples. This will help you get started with developing your own plugins and customize the <strong>Smart Home</strong> project according to your needs and preferences.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-421d1625cd3fc0768a5e9395096f9ba0>3.1 - Modbus</h1>
<p>Extension for working with devices using the open Modbus communication protocol based on the master-slave architecture. It uses RS-485, RS-422, RS-232 interfaces for data transmission, as well as Ethernet TCP/IP networks (Modbus TCP protocol).</p>
<p><a href=https://en.wikipedia.org/wiki/Modbus>wiki</a></p>
</div>
<div class=td-content>
<h1 id=pg-83ccc62bb21aa1015dc85c4aa89b620d>3.1.1 - Modbus rtu</h1>
<p>In the <strong>Smart Home</strong> system, there is a Modbus RTU plugin implemented that enables interaction with devices using the Modbus RTU protocol. The plugin provides the <code>ModbusRtu(FUNC, ADDRESS, COUNT, COMMAND)</code> method, which allows sending commands and receiving data using the specified protocol.</p>
<p>Arguments of the <code>ModbusRtu</code> method:</p>
<ol>
<li><code>FUNC</code>: Modbus function code indicating the type of operation to perform with the device.</li>
<li><code>ADDRESS</code>: Modbus device address to which the command is sent.</li>
<li><code>COUNT</code>: Number of registers or bits to read or write.</li>
<li><code>COMMAND</code>: Command to be executed, indicating additional parameters and settings.</li>
</ol>
<p>Usage example:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>COMMAND</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[]</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>FUNC</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;ReadHoldingRegisters&#39;</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>ADDRESS</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>COUNT</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>16</span>

<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>response</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>ModbusRtu</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>FUNC</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>ADDRESS</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>COUNT</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>COMMAND</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>response</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>The <code>ModbusRtu</code> method allows sending Modbus RTU commands, performing register reads or writes, and retrieving data from devices. You can use this method in your <strong>Smart Home</strong> project to interact with devices that support the Modbus RTU protocol.</p>
<div class="alert alert-warning" role=alert>
To work with a Modbus RTU device, a configured <strong>node</strong> is required.
</div>
<h3 id=configuration>Configuration:</h3>
<ul>
<li>slave_id <code>1-32</code></li>
<li>baud <code>9600, 19200</code></li>
<li>data_bits <code>5-9</code></li>
<li>timeout <code>milliseconds</code></li>
<li>stop_bits <code>1-2</code></li>
<li>sleep <code>milliseconds</code></li>
<li>parity <code>none, odd, even</code></li>
</ul>
<h3 id=commands>Commands:</h3>
<ul>
<li>Custom set</li>
</ul>
<h3 id=attributes>Attributes:</h3>
<ul>
<li>Custom set</li>
</ul>
<h3 id=status>Status:</h3>
<ul>
<li>Custom set</li>
</ul>
<hr>
<h3 id=available-functions>Available Functions</h3>
<p><strong>1-bit functions</strong></p>
<p>ReadCoils
ReadDiscreteInputs
WriteSingleCoil
WriteMultipleCoils</p>
<p><strong>16-bit functions</strong></p>
<p>ReadInputRegisters
ReadHoldingRegisters
ReadWriteMultipleRegisters
WriteSingleRegister
WriteMultipleRegisters</p>
<hr>
<h3 id=javascript-properties>JavaScript Properties</h3>
<ul>
<li>ENTITY_ID</li>
<li>ModbusRtu</li>
<li>entityAction</li>
<li>Action</li>
</ul>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># Constant with a unique device ID
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>const</span> <span style=color:#000>ENTITY_ID</span>
</code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># Execute a command (function) on the device:
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>result = </span><span style=color:#000>ModbusRtu</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>func</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>addr</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>count</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>command</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>func</td>
<td>Function to be executed on the device</td>
</tr>
<tr>
<td>addr</td>
<td>Address of the first register (40108-40001 = 107 = 6B hex)</td>
</tr>
<tr>
<td>count</td>
<td>Number of registers to read (reading 3 registers from 40108 to 40110)</td>
</tr>
<tr>
<td>command</td>
<td>Command</td>
</tr>
</tbody>
</table>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># Event handler function for actions:
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>entityAction = </span><span style=color:#000>(entityId, actionName)-&gt;</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>entityId</td>
<td>Unique ID of the device</td>
</tr>
<tr>
<td>actionName</td>
<td>System name of the action</td>
</tr>
</tbody>
</table>
<div class="alert alert-warning" role=alert>
The <strong>Action</strong> object is available in action scripts and scripts attached to the device.
</div>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>state = </span><span style=color:#000;font-weight:700>{</span>
  <span style=color:#000>new_state: </span><span style=color:#4e9a06>&#39;ENABLED&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000>attribute_values: </span><span style=color:#000;font-weight:700>{</span>
    <span style=color:#000>heat: </span><span style=color:#204a87;font-weight:700>false</span>
  <span style=color:#000;font-weight:700>},</span>
  <span style=color:#000>settings_value: </span><span style=color:#000;font-weight:700>{},</span>
  <span style=color:#000>storage_save: </span><span style=color:#204a87;font-weight:700>true</span>
<span style=color:#000;font-weight:700>}</span> 
<span style=color:#8f5902;font-style:italic># Save the state 
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>Actor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>setState</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>state</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>new_state</td>
<td>Unique system name of the state</td>
</tr>
<tr>
<td>attribute_values</td>
<td>Values of attributes previously defined for the device</td>
</tr>
<tr>
<td>settings_value</td>
<td>Values of settings previously defined for the device</td>
</tr>
<tr>
<td>storage_save</td>
<td>Flag indicating whether to save the state</td>
</tr>
</tbody>
</table>
<p>snapshot in the database |</p>
<hr>
<h3 id=example-coffeescript-code>Example CoffeeScript code</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># ModbusRtu
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#4e9a06>&#34;use strict&#34;</span><span style=color:#000;font-weight:700>;</span>

<span style=color:#000>checkStatus = </span><span style=color:#000>-&gt;</span>
  <span style=color:#000>COMMAND = </span><span style=color:#000;font-weight:700>[]</span>
  <span style=color:#000>FUNC = </span><span style=color:#4e9a06>&#39;ReadHoldingRegisters&#39;</span>
  <span style=color:#000>ADDRESS = </span><span style=color:#0000cf;font-weight:700>0</span>
  <span style=color:#000>COUNT = </span><span style=color:#0000cf;font-weight:700>16</span>
  
  <span style=color:#000>res = </span><span style=color:#000>ModbusRtu</span> <span style=color:#000>FUNC</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>ADDRESS</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>COUNT</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>COMMAND</span>
  <span style=color:#000>print</span> <span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>error</span>
  <span style=color:#000>print</span> <span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>result</span>
  <span style=color:#000>print</span> <span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>time</span>

<span style=color:#000>entityAction = </span><span style=color:#000>(entityId, actionName)-&gt;</span>
  <span style=color:#204a87;font-weight:700>switch</span> <span style=color:#000>actionName</span>
    <span style=color:#204a87;font-weight:700>when</span> <span style=color:#4e9a06>&#39;ON&#39;</span> <span style=color:#204a87;font-weight:700>then</span> <span style=color:#000>doOnAction</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#204a87;font-weight:700>when</span> <span style=color:#4e9a06>&#39;OFF&#39;</span> <span style=color:#204a87;font-weight:700>then</span> <span style=color:#000>doOffAction</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#204a87;font-weight:700>when</span> <span style=color:#4e9a06>&#39;CHECK&#39;</span> <span style=color:#204a87;font-weight:700>then</span> <span style=color:#000>checkStatus</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#204a87;font-weight:700>when</span> <span style=color:#4e9a06>&#39;ON_WITH_ERR&#39;</span> <span style=color:#204a87;font-weight:700>then</span> <span style=color:#000>doOnErrAction</span><span style=color:#000;font-weight:700>()</span>

</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-2ab89625f67635397c493f87afe8c5f2>3.1.2 - Modbus tcp</h1>
<p>In the <strong>Smart Home</strong> system, there is a Modbus TCP plugin implemented that enables interaction with devices using the Modbus TCP protocol. The plugin provides the <code>ModbusTcp(func, addr, count, command)</code> method, which allows sending commands and receiving data using the specified protocol.</p>
<p>Arguments of the <code>ModbusTcp</code> method:</p>
<ol>
<li><code>func</code>: Modbus function code indicating the type of operation to perform with the device.</li>
<li><code>addr</code>: Modbus device address to which the command is sent.</li>
<li><code>count</code>: Number of registers or bits to read or write.</li>
<li><code>command</code>: Command to be executed, indicating additional parameters and settings.</li>
</ol>
<p>Usage example:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>COMMAND</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[]</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>FUNC</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;ReadHoldingRegisters&#39;</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>ADDRESS</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>COUNT</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>16</span>

<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>response</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>ModbusTcp</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>FUNC</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>ADDRESS</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>COUNT</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>COMMAND</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>response</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>The <code>ModbusTcp</code> method allows sending Modbus TCP commands, performing register reads or writes, and retrieving data from devices. You can use this method in your <strong>Smart Home</strong> project to interact with devices that support the Modbus TCP protocol.</p>
<div class="alert alert-warning" role=alert>
To work with a Modbus RTU device, a configured <strong>node</strong> is required.
</div>
<h3 id=configuration>Configuration:</h3>
<ul>
<li>slave_id <code>1-32</code></li>
<li>address_port <code>localhost:502</code></li>
</ul>
<h3 id=commands>Commands:</h3>
<ul>
<li>Custom set</li>
</ul>
<h3 id=attributes>Attributes:</h3>
<ul>
<li>Custom set</li>
</ul>
<h3 id=status>Status:</h3>
<ul>
<li>Custom set</li>
</ul>
<hr>
<h3 id=available-functions>Available Functions</h3>
<p><strong>1-bit functions</strong></p>
<p>ReadCoils
ReadDiscreteInputs
WriteSingleCoil
WriteMultipleCoils</p>
<p><strong>16-bit functions</strong></p>
<p>ReadInputRegisters
ReadHoldingRegisters
ReadWriteMultipleRegisters
WriteSingleRegister
WriteMultipleRegisters</p>
<hr>
<h3 id=javascript-properties>JavaScript Properties</h3>
<ul>
<li>ENTITY_ID</li>
<li>ModbusRtu</li>
<li>entityAction</li>
<li>Action</li>
</ul>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># Constant with a unique device ID
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>const</span> <span style=color:#000>ENTITY_ID</span>
</code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># Execute a command (function) on the device:
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>result = </span><span style=color:#000>ModbusTcp</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>func</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>addr</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>count</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>command</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>func</td>
<td>Function to be executed on the device</td>
</tr>
<tr>
<td>addr</td>
<td>Address of the first register (40108-40001 = 107 = 6B hex)</td>
</tr>
<tr>
<td>count</td>
<td>Number of registers to read (reading 3 registers from 40108 to 40110)</td>
</tr>
<tr>
<td>command</td>
<td>Command</td>
</tr>
</tbody>
</table>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># Event handler function for actions:
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>entityAction = </span><span style=color:#000>(entityId, actionName)-&gt;</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>entityId</td>
<td>Unique ID of the device</td>
</tr>
<tr>
<td>actionName</td>
<td>System name of the action</td>
</tr>
</tbody>
</table>
<div class="alert alert-warning" role=alert>
The <strong>Action</strong> object is available in action scripts and scripts attached to the device.
</div>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>state = </span><span style=color:#000;font-weight:700>{</span>
  <span style=color:#000>new_state: </span><span style=color:#4e9a06>&#39;ENABLED&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000>attribute_values: </span><span style=color:#000;font-weight:700>{</span>
    <span style=color:#000>heat: </span><span style=color:#204a87;font-weight:700>false</span>
  <span style=color:#000;font-weight:700>},</span>
  <span style=color:#000>settings_value: </span><span style=color:#000;font-weight:700>{},</span>
  <span style=color:#000>storage_save: </span><span style=color:#204a87;font-weight:700>true</span>
<span style=color:#000;font-weight:700>}</span> 
<span style=color:#8f5902;font-style:italic># Save the state 
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>Actor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>setState</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>state</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>new_state</td>
<td>Unique system name of the state</td>
</tr>
<tr>
<td>attribute_values</td>
<td>Values of attributes previously defined for the device</td>
</tr>
<tr>
<td>settings_value</td>
<td>Values of settings previously defined for the device</td>
</tr>
<tr>
<td>storage_save</td>
<td>Flag indicating whether to save the state</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=example-coffeescript-code>Example CoffeeScript code</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># ModbusTcp
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#4e9a06>&#34;use strict&#34;</span><span style=color:#000;font-weight:700>;</span>

<span style=color:#000>checkStatus = </span><span style=color:#000>-&gt;</span>
  <span style=color:#000>COMMAND = </span><span style=color:#000;font-weight:700>[]</span>
  <span style=color:#000>FUNC = </span><span style=color:#4e9a06>&#39;ReadHoldingRegisters&#39;</span>
  <span style=color:#000>ADDRESS = </span><span style=color:#0000cf;font-weight:700>0</span>
  <span style=color:#000>COUNT = </span><span style=color:#0000cf;font-weight:700>16</span>

  <span style=color:#000>res = </span><span style=color:#000>ModbusTcp</span> <span style=color:#000>FUNC</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>ADDRESS</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>COUNT</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>COMMAND</span>
  <span style=color:#000>print</span> <span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>error</span>
  <span style=color:#000>print</span> <span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>result</span>
  <span style=color:#000>print</span> <span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>time</span>

<span style=color:#000>entityAction = </span><span style=color:#000>(entityId, actionName)-&gt;</span>
  <span style=color:#204a87;font-weight:700>switch</span> <span style=color:#000>actionName</span>
    <span style=color:#204a87;font-weight:700>when</span> <span style=color:#4e9a06>&#39;ON&#39;</span> <span style=color:#204a87;font-weight:700>then</span> <span style=color:#000>doOnAction</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#204a87;font-weight:700>when</span> <span style=color:#4e9a06>&#39;OFF&#39;</span> <span style=color:#204a87;font-weight:700>then</span> <span style=color:#000>doOffAction</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#204a87;font-weight:700>when</span> <span style=color:#4e9a06>&#39;CHECK&#39;</span> <span style=color:#204a87;font-weight:700>then</span> <span style=color:#000>checkStatus</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#204a87;font-weight:700>when</span> <span style=color:#4e9a06>&#39;ON_WITH_ERR&#39;</span> <span style=color:#204a87;font-weight:700>then</span> <span style=color:#000>doOnErrAction</span><span style=color:#000;font-weight:700>()</span>

</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-0369b4decf3a671c6e8e5d18b35ebcef>3.2 - Alexa</h1>
<div class="alert alert-warning" role=alert>
Incomplete article
</div>
<p>In the <strong>Smart Home</strong> system, there is an Amazon Alexa plugin that provides integration with the Amazon Alexa voice assistant. This plugin allows you to control devices and perform various operations in your smart home using voice commands.</p>
<p>The Amazon Alexa plugin offers the following functionality:</p>
<ol>
<li>
<p>Voice command recognition and processing: The plugin can receive voice commands from the user sent through the Amazon Alexa voice assistant. It recognizes the commands, analyzes them, and performs the corresponding actions in your smart home.</p>
</li>
<li>
<p>Device control: The plugin enables you to control devices in your smart home using voice commands. For example, you can say &ldquo;Alexa, turn on the lights in the living room&rdquo; or &ldquo;Alexa, set the temperature to 25 degrees.&rdquo;</p>
</li>
<li>
<p>Integration with other system features: The Amazon Alexa plugin integrates with other features of the <strong>Smart Home</strong> system. For instance, you can use voice commands to trigger scenarios, control automated tasks, or obtain information about device status.</p>
</li>
</ol>
<p>To use the Amazon Alexa plugin in your <strong>Smart Home</strong> project, you need to set it up and connect it to your Amazon Alexa account. After that, you can configure voice commands and actions to control your smart home through the Amazon Alexa voice assistant.</p>
<p>The Amazon Alexa plugin for the <strong>Smart Home</strong> system includes the following JavaScript handlers:</p>
<ol>
<li><code>skillOnLaunch</code>: This handler is called when the skill is launched on an Amazon Alexa device. It is intended to handle the initial skill launch event. You can define logic or perform necessary actions when the skill is launched. Example usage:</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>skillOnLaunch</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#8f5902;font-style:italic>// Logic for handling the skill launch event
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>};</span>
</code></pre></div><ol start=2>
<li><code>skillOnSessionEnd</code>: This handler is called when the session with the skill ends. It allows you to perform specific actions when the session with the user is terminated. For example, you can save state or perform final operations. Example usage:</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>skillOnSessionEnd</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#8f5902;font-style:italic>// Logic for session end
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>};</span>
</code></pre></div><ol start=3>
<li><code>skillOnIntent</code>: This handler is called when the skill receives intents from the user. It is intended to handle different intents and perform corresponding actions. You can define logic for intent handling and interaction with your smart home. Example usage:</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>skillOnIntent</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#8f5902;font-style:italic>// Logic for handling intents
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>};</span>
</code></pre></div><p>These handlers provide the ability to handle skill launch events, session termination, and user intents within the context of the Amazon Alexa plugin. You can define your own logic and perform necessary actions in each of these handlers according to your project requirements.</p>
<h3 id=code-example>Code Example</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>skillOnLaunch = </span><span style=color:#000>-&gt;</span>
<span style=color:#8f5902;font-style:italic>#print &#39;---action onLaunch---&#39;
</span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>Done</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;skillOnLaunch&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>skillOnSessionEnd = </span><span style=color:#000>-&gt;</span>
<span style=color:#8f5902;font-style:italic>#print &#39;---action onSessionEnd---&#39;
</span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>Done</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;skillOnSessionEnd&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>skillOnIntent = </span><span style=color:#000>-&gt;</span>
<span style=color:#8f5902;font-style:italic>#print &#39;---action onIntent---&#39;
</span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>state = </span><span style=color:#4e9a06>&#39;on&#39;</span>
  <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>Alexa</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>slots</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;state&#39;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#39;off&#39;</span>
    <span style=color:#000>state = </span><span style=color:#4e9a06>&#39;off&#39;</span>

  <span style=color:#000>place = </span><span style=color:#000>Alexa</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>slots</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;place&#39;</span><span style=color:#000;font-weight:700>]</span>

  <span style=color:#000>Done</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;</span><span style=color:#4e9a06>#{</span><span style=color:#000>place</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>_</span><span style=color:#4e9a06>#{</span><span style=color:#000>state</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>&#34;</span><span style=color:#000;font-weight:700>)</span>

  <span style=color:#000>Alexa</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>sendMessage</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;</span><span style=color:#4e9a06>#{</span><span style=color:#000>place</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>_</span><span style=color:#4e9a06>#{</span><span style=color:#000>state</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>&#34;</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-ef2b94f1a2a793c6662e60a76d3c9154>3.3 - Cgminer</h1>
<p>Extension for <strong>ASIC</strong> Device Monitoring</p>
<p>Available Brands:</p>
<ul>
<li>Bitmine Antminer</li>
</ul>
<h3 id=configuration>Configuration:</h3>
<ul>
<li>host</li>
<li>port</li>
<li>timeout</li>
<li>user</li>
<li>pass</li>
<li>manufacturer</li>
<li>model</li>
</ul>
<h3 id=commands>Commands:</h3>
<ul>
<li>custom set</li>
</ul>
<h3 id=attributes>Attributes:</h3>
<ul>
<li>custom set</li>
</ul>
<h3 id=status>Status:</h3>
<ul>
<li>custom set</li>
</ul>
</div>
<div class=td-content>
<h1 id=pg-e8459aa132552732476b3a393a8246c7>3.3.1 - Bitmine</h1>
<p>Working with Bitmine Antminer ASIC devices.</p>
<p>Supported devices:</p>
<ul>
<li>S9</li>
<li>S7</li>
<li>L3</li>
<li>L3</li>
<li>D3</li>
<li>T9</li>
</ul>
<h3 id=javascript-properties>JavaScript Properties</h3>
<hr>
<h3 id=miner-base-entity>Miner Base Entity</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#8f5902;font-style:italic>// Constant with the unique device ID
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>ENTITY_ID</span><span style=color:#000;font-weight:700>;</span>
</code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>result</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Miner</span>
    <span style=color:#000;font-weight:700>.</span><span style=color:#000>stats</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#000;font-weight:700>.</span><span style=color:#000>devs</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#000;font-weight:700>.</span><span style=color:#000>summary</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#000;font-weight:700>.</span><span style=color:#000>pools</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#000;font-weight:700>.</span><span style=color:#000>addPool</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>url</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000;font-weight:700>.</span><span style=color:#000>version</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#000;font-weight:700>.</span><span style=color:#000>enable</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>poolId</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000;font-weight:700>.</span><span style=color:#000>disable</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>poolId</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000;font-weight:700>.</span><span style=color:#204a87;font-weight:700>delete</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>poolId</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000;font-weight:700>.</span><span style=color:#000>switchPool</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>poolId</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000;font-weight:700>.</span><span style=color:#000>restart</span><span style=color:#000;font-weight:700>();</span>
</code></pre></div><table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>result</td>
<td>Type: Object (Result)</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>stats</td>
<td>Type: Method, statistics</td>
</tr>
<tr>
<td>devs</td>
<td>Type: Method, statistics</td>
</tr>
<tr>
<td>summary</td>
<td>Type: Method, statistics</td>
</tr>
<tr>
<td>pools</td>
<td>Type: Method, server list</td>
</tr>
<tr>
<td>addPool</td>
<td>Type: Method, add server</td>
</tr>
<tr>
<td>version</td>
<td>Type: Method, firmware version</td>
</tr>
<tr>
<td>enable</td>
<td>Type: Method, enable server</td>
</tr>
<tr>
<td>disable</td>
<td>Type: Method, disable server</td>
</tr>
<tr>
<td>delete</td>
<td>Type: Method, delete server</td>
</tr>
<tr>
<td>switchPool</td>
<td>Type: Method, switch server</td>
</tr>
<tr>
<td>restart</td>
<td>Type: Method, soft device restart</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=result-object>Result Object</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>result</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{</span>
  <span style=color:#000>error</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000>errMessage</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000>result</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span>
<span style=color:#000;font-weight:700>};</span>
</code></pre></div><table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>error</td>
<td>Type: boolean, error indicator</td>
</tr>
<tr>
<td>errMessage</td>
<td>Type: string, human-readable error message</td>
</tr>
<tr>
<td>result</td>
<td>Type: string, JSON object in string format, if the request is completed without errors</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=entityaction-function>entityAction Function</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>entityAction</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>entityId</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>actionName</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>entityId</td>
<td>Type: string, ID of the entity sending the message</td>
</tr>
<tr>
<td>actionName</td>
<td>Type: string, name of the action, in uppercase without the &lsquo;/&rsquo; symbol</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=actor-object>Actor Object</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>Actor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>setState</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>entityStateParams</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>setState</td>
<td>Type: Method, update the entity&rsquo;s status</td>
</tr>
<tr>
<td>entityStateParams</td>
<td>Type: Object EntityStateParams</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=entitystateparams-object>EntityStateParams Object</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>entityStateParams</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;new_state&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#34;attribute_values&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{},</span>
  <span style=color:#4e9a06>&#34;settings_value&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{},</span>
  <span style=color:#4e9a06>&#34;storage_save&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span>
<span style=color:#000;font-weight:700>};</span>
</code></pre></div><table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>new_state</td>
<td>Type: *string, name of the new state</td>
</tr>
<tr>
<td>attribute_values</td>
<td>Type: Object, new state of the entity&rsquo;s attributes</td>
</tr>
<tr>
<td>settings_value</td>
<td>Type: Object, new state of the entity&rsquo;s settings</td>
</tr>
<tr>
<td>storage_save</td>
<td>Type: boolean, indicator to save the new state to the database</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=code-example>Code Example</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># cgminer
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#000>ifError</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>(res)-&gt;</span>
  <span style=color:#204a87;font-weight:700>return</span> <span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>res</span> <span style=color:#ce5c00;font-weight:700>||</span> <span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>error</span> <span style=color:#ce5c00;font-weight:700>||</span> <span style=color:#000>res</span><span style=color:#000;font-weight:700>.</span><span style=color:#204a87>Error</span>

<span style=color:#000>checkStatus</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>-&gt;</span>
  <span style=color:#000>stats = </span><span style=color:#000>Miner</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>stats</span><span style=color:#000;font-weight:700>()</span>
  <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>ifError</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>stats</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000>Actor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>setState</span>
      <span style=color:#4e9a06>&#39;new_state&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;ERROR&#39;</span>
    <span style=color:#204a87;font-weight:700>return</span>
  <span style=color:#000>p = </span><span style=color:#000>JSON</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>parse</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>stats</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>result</span><span style=color:#000;font-weight:700>)</span>
  <span style=color:#000>print</span> <span style=color:#000>p</span>

<span style=color:#000>checkSum</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>-&gt;</span>
  <span style=color:#000>summary = </span><span style=color:#000>Miner</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>summary</span><span style=color:#000;font-weight:700>()</span>
  <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>ifError</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>summary</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000>Actor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>setState</span>
      <span style=color:#4e9a06>&#39;new_state&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;ERROR&#39;</span>
    <span style=color:#204a87;font-weight:700>return</span>
  <span style=color:#000>p = </span><span style=color:#000>JSON</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>parse</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>summary</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>result</span><span style=color:#000;font-weight:700>)</span>
  <span style=color:#000>print</span> <span style=color:#000>p</span>

<span style=color:#000>entityAction = </span><span style=color:#000>(entityId, actionName)-&gt;</span>
  <span style=color:#204a87;font-weight:700>switch</span> <span style=color:#000>actionName</span>
    <span style=color:#204a87;font-weight:700>when</span> <span style=color:#4e9a06>&#39;CHECK&#39;</span> <span style=color:#204a87;font-weight:700>then</span> <span style=color:#000>checkStatus</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#204a87;font-weight:700>when</span> <span style=color:#4e9a06>&#39;SUM&#39;</span> <span style=color:#204a87;font-weight:700>then</span> <span style=color:#000>checkSum</span><span style=color:#000;font-weight:700>()</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-2cd4f07024ce46a2072e53614567c7fb>3.4 - CPU</h1>
<figure>
<img src=/smart-home/cpuspeed1.png>
</figure>
<p> </p>
<p> </p>
<p>In the <strong>Smart Home</strong> system, there is a &ldquo;cpuspeed&rdquo; plugin that provides CPU parameter display. The plugin grants access to the following parameters:</p>
<ol>
<li>
<p><code>cores</code>: This parameter allows you to retrieve information about the number of CPU cores. It returns a number indicating the total number of CPU cores.</p>
</li>
<li>
<p><code>mhz</code>: This parameter provides information about the current CPU frequency. It returns a value in megahertz (MHz) indicating the current operating frequency of the CPU.</p>
</li>
<li>
<p><code>all</code>: The <code>all</code> parameter provides information about the weighted average CPU load in percentage.</p>
</li>
<li>
<p><code>load_min</code>: This parameter displays the minimum CPU load over a specified period of time. It allows you to obtain information about the minimum CPU load and can be useful for monitoring and analyzing CPU load.</p>
</li>
<li>
<p><code>load_max</code>: The <code>load_max</code> parameter provides information about the maximum CPU load over a specified period of time. It allows you to obtain information about the maximum CPU load and can be useful for analyzing system performance.</p>
</li>
</ol>
<p>Here&rsquo;s an example of using the &ldquo;cpuspeed&rdquo; plugin to retrieve CPU parameters:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>entity</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>entityManager</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getEntity</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;cpuspeed.cpuspeed&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>cpuParams</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>entity</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getAttributes</span><span style=color:#000;font-weight:700>()</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>cpuParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>cores</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>cpuParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>mhz</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>cpuParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>all</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>cpuParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>load_min</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>cpuParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>load_max</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>You can use these parameters to display and monitor CPU information in your <strong>Smart Home</strong> project.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-d57edab1df39efff0606d11217501497>3.5 - HDD</h1>
<figure>
<img src=/smart-home/hdd1.png>
</figure>
<p> </p>
<p> </p>
<p>In the <strong>Smart Home</strong> system, there is a &ldquo;hdd&rdquo; plugin that provides the display of hard disk parameters. This plugin allows you to obtain information about various characteristics of the hard disk. Here are some of these parameters:</p>
<ol>
<li>
<p><code>path</code>: The <code>path</code> parameter contains the path to the mount point of the hard disk.</p>
</li>
<li>
<p><code>fstype</code>: The <code>fstype</code> parameter indicates the file system type used on the hard disk.</p>
</li>
<li>
<p><code>total</code>: The <code>total</code> parameter displays the total size of the hard disk in bytes.</p>
</li>
<li>
<p><code>free</code>: The <code>free</code> parameter shows the amount of free space on the hard disk in bytes.</p>
</li>
<li>
<p><code>used</code>: The <code>used</code> parameter indicates the used space on the hard disk in bytes.</p>
</li>
<li>
<p><code>used_percent</code>: The <code>used_percent</code> parameter shows the percentage of space used on the hard disk.</p>
</li>
<li>
<p><code>inodes_total</code>: The <code>inodes_total</code> parameter displays the total number of inodes on the hard disk.</p>
</li>
<li>
<p><code>inodes_used</code>: The <code>inodes_used</code> parameter indicates the number of used inodes on the hard disk.</p>
</li>
<li>
<p><code>inodes_free</code>: The <code>inodes_free</code> parameter shows the number of free inodes on the hard disk.</p>
</li>
<li>
<p><code>inodes_used_percent</code>: The <code>inodes_used_percent</code> parameter indicates the percentage of inodes used on the hard disk.</p>
</li>
</ol>
<p>Additionally, the &ldquo;hdd&rdquo; plugin has a <code>mount_point</code> settings option that allows you to specify the mount point to display parameters for a specific hard disk.</p>
<p>Here&rsquo;s an example of using the &ldquo;hdd&rdquo; plugin to retrieve hard disk parameters:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>entity</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>entityManager</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getEntity</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;hdd.hdd1&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>hddParams</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>entity</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getAttributes</span><span style=color:#000;font-weight:700>()</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>hddSettings</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>entity</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getSettings</span><span style=color:#000;font-weight:700>()</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hddSettings</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>mount_point</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hddParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>path</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hddParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>fstype</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hddParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>total</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hddParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>free</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hddParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>used</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hddParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>used_percent</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hddParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>inodes_total</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hddParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>inodes_used</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hddParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>inodes_free</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>hddParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>inodes_used_percent</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>You can use these parameters to display information about the hard disk in your <strong>Smart Home</strong> project.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-ad72d5bfe8ed58703be4f95c5433bbbb>3.6 - Memory</h1>
<figure>
<img src=/smart-home/ram1.png>
</figure>
<p> </p>
<p> </p>
<p>In the <strong>Smart Home</strong> system, there is a &ldquo;memory&rdquo; plugin that allows you to display the parameters of the RAM (random access memory). This plugin provides access to the following parameters:</p>
<ol>
<li>
<p><code>total</code>: The <code>total</code> parameter displays the total amount of system memory in bytes.</p>
</li>
<li>
<p><code>free</code>: The <code>free</code> parameter indicates the amount of free memory in bytes.</p>
</li>
<li>
<p><code>used_percent</code>: The <code>used_percent</code> parameter shows the percentage of memory usage.</p>
</li>
</ol>
<p>Here&rsquo;s an example of using the &ldquo;memory&rdquo; plugin to retrieve RAM parameters:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>entity</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>entityManager</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getEntity</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;memory.memory&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>ramParams</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>entity</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getAttributes</span><span style=color:#000;font-weight:700>()</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ramParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>total</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ramParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>free</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ramParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>used_percent</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>You can use these parameters to display information about the RAM in your <strong>Smart Home</strong> project.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-646b43ce7e0c9ecd76b7e1b081534840>3.7 - Memory app</h1>
<figure>
<img src=/smart-home/memory_app.png>
</figure>
<p> </p>
<p> </p>
<p>In the <strong>Smart Home</strong> system, there is a &ldquo;memory_app&rdquo; plugin that provides the display of application memory parameters. This plugin allows you to obtain information about various characteristics of the application memory. Here are some of these parameters:</p>
<ol>
<li>
<p><code>alloc</code>: The <code>alloc</code> parameter displays the amount of memory allocated for the application in bytes. It indicates the current value of allocated memory.</p>
</li>
<li>
<p><code>heap_alloc</code>: The <code>heap_alloc</code> parameter shows the amount of memory allocated in the heap for the application in bytes. This value indicates the current allocation of memory in the heap.</p>
</li>
<li>
<p><code>total_alloc</code>: The <code>total_alloc</code> parameter indicates the total amount of memory allocated for the application since its launch in bytes. It reflects the overall memory volume allocated to the application.</p>
</li>
<li>
<p><code>sys</code>: The <code>sys</code> parameter shows the amount of system memory used by the application. It indicates the current value of system memory usage.</p>
</li>
<li>
<p><code>num_gc</code>: The <code>num_gc</code> parameter displays the number of garbage collections that have occurred since the application was launched.</p>
</li>
<li>
<p><code>last_gc</code>: The <code>last_gc</code> parameter indicates the time of the last garbage collection. It provides information about the time of the last garbage collection performed in the application.</p>
</li>
</ol>
<p>Here&rsquo;s an example of using the &ldquo;memory_app&rdquo; plugin to retrieve application memory parameters:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>entity</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>entityManager</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getEntity</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;memory.memory&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>memoryParams</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>entity</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getAttributes</span><span style=color:#000;font-weight:700>()</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>memoryParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>alloc</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>memoryParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>heap_alloc</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>memoryParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>total_alloc</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>memoryParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>sys</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>memoryParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>num_gc</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>memoryParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>last_gc</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>You can use these parameters to display information about the application memory in your <strong>Smart Home</strong> project.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-95c950e340c5f9306b492b322325c66d>3.8 - Moon</h1>
<figure>
<img src=/smart-home/moon1.png>
</figure>
<p> </p>
<p> </p>
<p>In the <strong>Smart Home</strong> system, there is a &ldquo;moon&rdquo; plugin that allows displaying various parameters related to the phases of the moon and its position in the sky. This plugin provides access to the following parameters:</p>
<ol>
<li>
<p><code>horizonState</code>: The <code>horizonState</code> parameter indicates the moon&rsquo;s state relative to the horizon. It can be either &ldquo;aboveHorizon&rdquo; or &ldquo;belowHorizon&rdquo;.</p>
</li>
<li>
<p><code>phase</code>: The <code>phase</code> parameter displays the current phase of the moon. For example, &ldquo;new_moon&rdquo;, &ldquo;waxing_crescent&rdquo;, &ldquo;first_quarter&rdquo;, &ldquo;waxing_gibbous&rdquo;, &ldquo;full_moon&rdquo;, &ldquo;waning_gibbous&rdquo;, &ldquo;third_quarter&rdquo;, &ldquo;waning_crescent&rdquo;.</p>
</li>
<li>
<p><code>azimuth</code>: The <code>azimuth</code> parameter indicates the azimuthal position of the moon in degrees.</p>
</li>
<li>
<p><code>elevation</code>: The <code>elevation</code> parameter displays the angle of elevation of the moon above the horizon.</p>
</li>
<li>
<p><code>aboveHorizon</code>: The <code>aboveHorizon</code> parameter indicates whether the moon is above the horizon (true/false).</p>
</li>
<li>
<p><code>belowHorizon</code>: The <code>belowHorizon</code> parameter indicates whether the moon is below the horizon (true/false).</p>
</li>
</ol>
<p>Additionally, the &ldquo;moon&rdquo; plugin has settings <code>lat</code> and <code>lon</code>, which allow specifying the latitude and longitude for determining the moon&rsquo;s position in the sky.</p>
<p>Here&rsquo;s an example of using the &ldquo;moon&rdquo; plugin to retrieve moon parameters:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>entity</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>entityManager</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getEntity</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;moon.moon1&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>moonParams</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>entity</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getAttributes</span><span style=color:#000;font-weight:700>()</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>moonParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>horizonState</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>moonParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>phase</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>moonParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>azimuth</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>moonParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>elevation</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>moonParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>aboveHorizon</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>moonParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>belowHorizon</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>You can use these parameters to display information about the moon in your <strong>Smart Home</strong> project.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-75a67472ccb2a758f48c263d48be08d3>3.9 - MQTT</h1>
<p>The &ldquo;mqtt&rdquo; plugin is an extended version of the &ldquo;sensor&rdquo; plugin that provides MQTT protocol functionality. Here are some settings available for the &ldquo;mqtt&rdquo; plugin:</p>
<ol>
<li><code>subscribe_topic</code>: The MQTT topic to subscribe to for receiving data.</li>
<li><code>mqtt_login</code>: The login for authentication when connecting to the MQTT broker.</li>
<li><code>mqtt_pass</code>: The password for authentication when connecting to the MQTT broker.</li>
</ol>
<p>These settings allow you to specify the connection parameters for the MQTT broker and define the topic to subscribe to for receiving data. Thus, the &ldquo;mqtt&rdquo; plugin enables integration with MQTT messages, allowing you to receive data from devices using this protocol and use them in automation systems or other components.</p>
<p>The &ldquo;sensor&rdquo; plugin also implements a JavaScript handler called <code>entityAction</code>. This handler is designed to process actions related to &ldquo;entity&rdquo; type devices based on the &ldquo;sensor&rdquo; plugin.</p>
<p>Here&rsquo;s an example implementation of the <code>entityAction</code> handler:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>entityAction</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>entityId</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>actionName</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
  <span style=color:#8f5902;font-style:italic>// Action handling code
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>};</span>
</code></pre></div><p>It also implements a JavaScript handler called <code>mqttEvent</code>. This handler is designed to process actions related to &ldquo;entity&rdquo; type devices based on the &ldquo;sensor&rdquo; plugin.</p>
<p>Here&rsquo;s an example implementation of the <code>mqttEvent</code> handler:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>mqttEvent</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>entityId</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>actionName</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
  <span style=color:#8f5902;font-style:italic>// Action handling code
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>};</span>
</code></pre></div><p>Example usage of the <code>mqttEvent</code> handler:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>mqttEvent = </span><span style=color:#000>-&gt;</span>
  <span style=color:#8f5902;font-style:italic>#print &#39;---mqtt new event from plug---&#39;
</span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>if</span> <span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>message</span> <span style=color:#ce5c00;font-weight:700>||</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>topic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>includes</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;/set&#39;</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#204a87;font-weight:700>return</span>
  <span style=color:#000>payload = </span><span style=color:#000>unmarshal</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>payload</span>
  <span style=color:#000>attrs =
</span><span style=color:#000></span>    <span style=color:#4e9a06>&#39;consumption&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>consumption</span>
    <span style=color:#4e9a06>&#39;linkquality&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>linkquality</span>
    <span style=color:#4e9a06>&#39;power&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>power</span>
    <span style=color:#4e9a06>&#39;state&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>state</span>
    <span style=color:#4e9a06>&#39;temperature&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>temperature</span>
    <span style=color:#4e9a06>&#39;voltage&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>voltage</span>
  <span style=color:#000>Actor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>setState</span>
    <span style=color:#4e9a06>&#39;new_state&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>state</span>
    <span style=color:#4e9a06>&#39;attribute_values&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>attrs</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-98e5f3c64adb1e62039387bca695fb54>3.10 - Node</h1>
<p>Unfinished article</p>
<h3 id=configuration>Configuration:</h3>
<h3 id=commands>Commands:</h3>
<ul>
<li>Arbitrary set</li>
</ul>
<h3 id=attributes>Attributes:</h3>
<ul>
<li>Arbitrary set</li>
</ul>
<h3 id=status>Status:</h3>
<ul>
<li>Arbitrary set</li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-25150d443099ad5064f1a3a39214945d>3.11 - Отправка сообщений</h1>
<p>The system has a plugin called &ldquo;notifr&rdquo; that provides notification capabilities. It supports methods for sending notifications through various channels, including SMS, push notifications, email, Telegram, and HTML5 notifications.</p>
<p>Here are the supported notification methods provided by the &ldquo;notifr&rdquo; plugin:</p>
<ol>
<li>SMS: Allows sending SMS notifications.</li>
<li>Push: Enables sending push notifications to mobile devices.</li>
<li>Email: Supports sending email notifications.</li>
<li>Telegram: Provides the ability to send notifications through Telegram messenger.</li>
<li>HTML5 notifications: Allows displaying notifications using HTML5 capabilities.</li>
</ol>
<p>With the &ldquo;notifr&rdquo; plugin, you can utilize these methods to send notifications to users through different channels based on their preferences or the nature of the notification.</p>
<p>Please note that the specific implementation and usage details of each method may vary based on the configuration and setup of the &ldquo;notifr&rdquo; plugin in your system.</p>
<h3 id=javascript-свойства>javascript свойства</h3>
<hr>
<h3 id=new-message>New message</h3>
<p>Create message object</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript>  <span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
</code></pre></div><table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>newMessage()</td>
<td>метод</td>
</tr>
<tr>
<td>msg</td>
<td>type: Object <a href=#%D0%BE%D0%B1%D1%8A%D0%B5%D0%BA%D1%82-message>Message</a></td>
</tr>
</tbody>
</table>
<hr>
<h3 id=send-message>Send message</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript>  <span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>send</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>msg</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>send()</td>
<td>метод</td>
</tr>
<tr>
<td>msg</td>
<td>type: Object (Message)</td>
</tr>
</tbody>
</table>
<h3 id=object-message>Object Message</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript>  <span style=color:#000>message = </span><span style=color:#000;font-weight:700>{</span>
  <span style=color:#000>from: </span><span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000>type: </span><span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000>attributes: </span><span style=color:#000;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;key&#34;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#34;vlue&#34;</span>
  <span style=color:#000;font-weight:700>}</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>from</td>
<td>type: string</td>
</tr>
<tr>
<td>type</td>
<td>type: string</td>
</tr>
<tr>
<td>attributes</td>
<td>type: map[string]string</td>
</tr>
</tbody>
</table>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-db0e74844d4ec70b97b7eed2dcaa6fde>3.11.1 - Push уведомления</h1>
<p>Web push notifications are short messages that Smart Home sends to the browser to convey important information. They are displayed even to users who have left the website and do not require email or phone number input.</p>
<h3 id=configuration>Configuration:</h3>
<ul>
<li>Public Key</li>
<li>Private Key</li>
</ul>
<h3 id=attributes>Attributes:</h3>
<ul>
<li>userIDS</li>
<li>title</li>
<li>body</li>
</ul>
<h3 id=javascript-properties>JavaScript Properties:</h3>
<hr>
<h3 id=new-message>New Message</h3>
<p>Creates a message object</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
<span style=color:#000>msg.type = </span><span style=color:#4e9a06>&#39;webpush&#39;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
  <span style=color:#4e9a06>&#39;userIDS&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;14&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#39;title&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;Lorem Ipsum is simply&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#39;body&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum&#39;</span>
<span style=color:#000;font-weight:700>};</span>

</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>newMessage()</td>
<td>Method</td>
</tr>
<tr>
<td>msg</td>
<td>Type: Object (Message)</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=code-example>Code Example:</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># webpush
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>sendMsg</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>()-&gt;</span>
  <span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
  <span style=color:#000>msg.type = </span><span style=color:#4e9a06>&#39;webpush&#39;</span><span style=color:#000;font-weight:700>;</span>
  <span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
    <span style=color:#4e9a06>&#39;userIDS&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;14&#39;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#4e9a06>&#39;title&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;Lorem Ipsum is simply&#39;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#4e9a06>&#39;body&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum&#39;</span>
  <span style=color:#000;font-weight:700>};</span>
  <span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>send</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>msg</span><span style=color:#000;font-weight:700>);</span>

<span style=color:#000>sendMsg</span><span style=color:#000;font-weight:700>()</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-b9e7dc050746e93f66a3fcdc54072720>3.11.2 - HTML5 Уведомления</h1>
<p>HTML5 notifications are a way to display information to users on a web page without reloading or navigating to another page. Notifications can contain text, images, sound, or video and appear in the bottom-right corner of the screen. HTML5 notifications utilize an API that allows web applications to send notifications to the browser using JavaScript.</p>
<p>Attributes:</p>
<ul>
<li>userIDS: The user IDs associated with the notification.</li>
<li>title: The title of the notification.</li>
<li>body: The body or content of the notification.</li>
</ul>
<p>JavaScript Properties:</p>
<hr>
<h3 id=new-message>New Message:</h3>
<p>Creates a message object.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
<span style=color:#000>msg.type = </span><span style=color:#4e9a06>&#39;html5_notify&#39;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
  <span style=color:#4e9a06>&#39;userIDS&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;14&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#39;title&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;Lorem Ipsum is simply&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#39;body&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum&#39;</span>
<span style=color:#000;font-weight:700>};</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>newMessage()</td>
<td>Method</td>
</tr>
<tr>
<td>msg</td>
<td>Type: Object (Message)</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=code-example>Code Example:</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># html5_notify
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#000>sendMsg</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>()-&gt;</span>
  <span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
  <span style=color:#000>msg.type = </span><span style=color:#4e9a06>&#39;html5_notify&#39;</span><span style=color:#000;font-weight:700>;</span>
  <span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
    <span style=color:#4e9a06>&#39;userIDS&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;14&#39;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#4e9a06>&#39;title&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;Lorem Ipsum is simply&#39;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#4e9a06>&#39;body&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum&#39;</span>
  <span style=color:#000;font-weight:700>};</span>
  <span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>send</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>msg</span><span style=color:#000;font-weight:700>);</span>

<span style=color:#000>sendMsg</span><span style=color:#000;font-weight:700>()</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-ffcf992bf86dcf75fc98ea391689be36>3.11.3 - Messagebird</h1>
<p>To send SMS notifications through the MessageBird notification service provider, you&rsquo;ll need to register with MessageBird and have a positive balance.</p>
<h3 id=configuration>Configuration:</h3>
<ul>
<li>Access Key</li>
<li>Name</li>
</ul>
<h3 id=attributes>Attributes:</h3>
<ul>
<li>Payment</li>
<li>Type</li>
<li>Amount</li>
</ul>
<h3 id=javascript-properties>JavaScript Properties:</h3>
<hr>
<p>New Message:</p>
<p>Creates a message object.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
<span style=color:#000>msg.type = </span><span style=color:#4e9a06>&#39;messagebird&#39;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
  <span style=color:#4e9a06>&#39;phone&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;+79990000001&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#39;body&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;some text&#39;</span>
<span style=color:#000;font-weight:700>};</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>newMessage()</td>
<td>Method</td>
</tr>
<tr>
<td>msg</td>
<td>Type: Object (Message)</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=code-example>Code Example:</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># messagebird
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#000>sendMsg</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>(body)-&gt;</span>
  <span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
  <span style=color:#000>msg.type = </span><span style=color:#4e9a06>&#39;messagebird&#39;</span><span style=color:#000;font-weight:700>;</span>
  <span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
    <span style=color:#4e9a06>&#39;phone&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;+79990000001&#39;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#4e9a06>&#39;body&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;some text&#39;</span>
  <span style=color:#000;font-weight:700>};</span>
  <span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>send</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>msg</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-ae8769291a804111fe0f11577b37bb14>3.11.4 - Slack</h1>
<p>To send notifications to Slack chat, you&rsquo;ll need to configure the following settings:</p>
<h3 id=configuration>Configuration:</h3>
<ul>
<li>Token</li>
<li>User name</li>
</ul>
<h3 id=javascript-properties>JavaScript Properties:</h3>
<hr>
<p>New Message:</p>
<p>Creates a message object.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
<span style=color:#000>msg.type = </span><span style=color:#4e9a06>&#39;slack&#39;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
  <span style=color:#4e9a06>&#39;channel&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;#ch&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#39;text&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;some text&#39;</span>
<span style=color:#000;font-weight:700>};</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>newMessage()</td>
<td>Method</td>
</tr>
<tr>
<td>msg</td>
<td>Type: Object (Message)</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=code-example>Code Example:</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># slack
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#000>sendMsg</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>(body)-&gt;</span>
  <span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
    <span style=color:#000>msg.type = </span><span style=color:#4e9a06>&#39;slack&#39;</span><span style=color:#000;font-weight:700>;</span>
    <span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
      <span style=color:#4e9a06>&#39;channel&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;#ch&#39;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#4e9a06>&#39;text&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;some text&#39;</span>
  <span style=color:#000;font-weight:700>};</span>
  <span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>send</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>msg</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-3474b889257fbfc72d90e2b2883e468a>3.11.5 - Telegram</h1>
<p>To work with the Telegram API and handle interactive commands from clients or use event-based notifications, the system provides the following configuration:</p>
<h3 id=configuration>Configuration:</h3>
<ul>
<li>Token</li>
</ul>
<h3 id=commands>Commands:</h3>
<ul>
<li>Custom set of commands</li>
</ul>
<h3 id=attributes>Attributes:</h3>
<ul>
<li>Custom set of attributes</li>
</ul>
<h3 id=actions>Actions:</h3>
<p>The system reserves three commands:</p>
<ul>
<li><strong>/start</strong> - Subscribe to notifications</li>
<li><strong>/quit</strong> - Unsubscribe from notifications</li>
<li><strong>/help</strong> - Display available commands</li>
</ul>
<p><strong>Action</strong> - It should be named in lowercase, without the &ldquo;/&rdquo; sign. A custom command will automatically be added to the list of available commands in the <strong>/help</strong> section. The custom command should be called in uppercase <strong>/ACTION</strong> -> <strong>/action</strong>.</p>
<h3 id=javascript-properties>JavaScript Properties:</h3>
<hr>
<p>New Message:</p>
<p>Creates a message object.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
<span style=color:#000>msg.type = </span><span style=color:#4e9a06>&#39;telegram&#39;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
  <span style=color:#4e9a06>&#39;name&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;clavicus&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#39;body&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;some text msg&#39;</span>
<span style=color:#000;font-weight:700>};</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>newMessage()</td>
<td>Method</td>
</tr>
<tr>
<td>msg</td>
<td>Type: Object (Message)</td>
</tr>
</tbody>
</table>
<hr>
<p>telegramAction Function:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>telegramAction = </span><span style=color:#000>(entityId, actionName)-&gt;</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>entityId</td>
<td>Type: string, ID of the entity sending the message</td>
</tr>
<tr>
<td>actionName</td>
<td>Type: string, name of the action in uppercase, without the &lsquo;/&rsquo; character</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=code-example>Code Example:</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># telegram
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>telegramSendReport</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>-&gt;</span>
  <span style=color:#000>entities = </span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;device.l3n1&#39;</span><span style=color:#000;font-weight:700>,</span><span style=color:#4e9a06>&#39;device.l3n2&#39;</span><span style=color:#000;font-weight:700>,</span><span style=color:#4e9a06>&#39;device.l3n3&#39;</span><span style=color:#000;font-weight:700>,</span><span style=color:#4e9a06>&#39;device.l3n4&#39;</span><span style=color:#000;font-weight:700>]</span>
  <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>entityId</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>i</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>entities</span>
    <span style=color:#000>entity = </span><span style=color:#000>entityManager</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getEntity</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>entityId</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000>attr = </span><span style=color:#000>entity</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getAttributes</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#000>sendMsg</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>format</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>entityId</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>entity</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>state</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>attr</span><span style=color:#000;font-weight:700>))</span>
  
<span style=color:#000>telegramAction = </span><span style=color:#000>(entityId, actionName)-&gt;</span>
<span style=color:#204a87;font-weight:700>switch</span> <span style=color:#000>actionName</span>
    <span style=color:#204a87;font-weight:700>when</span> <span style=color:#4e9a06>&#39;CHECK&#39;</span> <span style=color:#204a87;font-weight:700>then</span> <span style=color:#000>telegramSendReport</span><span style=color:#000;font-weight:700>()</span>

<span style=color:#000>sendMsg</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>(body)-&gt;</span>
  <span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
  <span style=color:#000>msg.type = </span><span style=color:#4e9a06>&#39;telegram&#39;</span><span style=color:#000;font-weight:700>;</span>
  <span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
    <span style=color:#4e9a06>&#39;name&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;clavicus&#39;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#4e9a06>&#39;body&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>body</span>
  <span style=color:#000;font-weight:700>};</span>
  <span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>send</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>msg</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-8d473157f65e8e52157febb9c1671a23>3.11.6 - Twilio</h1>
<p>Sending SMS notifications through the notification service provider <a href=https://www.twilio.com/messaging>Twilio</a>. To be able to send messages, registration with <a href=https://www.twilio.com/messaging>Twilio</a> and a positive balance are required.</p>
<h3 id=configuration>Configuration:</h3>
<ul>
<li>Token</li>
<li>Sid</li>
<li>From</li>
</ul>
<h3 id=attributes>Attributes:</h3>
<ul>
<li>Amount</li>
<li>Sid</li>
<li>Currency</li>
</ul>
<h3 id=javascript-properties>JavaScript Properties:</h3>
<hr>
<h3 id=new-message>New Message</h3>
<p>Creates a message object</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
<span style=color:#000>msg.type = </span><span style=color:#4e9a06>&#39;twilio&#39;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
  <span style=color:#4e9a06>&#39;phone&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;+79990000001&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#4e9a06>&#39;body&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;some text&#39;</span>
<span style=color:#000;font-weight:700>};</span>

</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>newMessage()</td>
<td>Method</td>
</tr>
<tr>
<td>msg</td>
<td>Type: Object (Message)</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=code-example>Code Example:</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># twilio
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span>
<span style=color:#000>sendMsg</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>(body)-&gt;</span>
  <span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
  <span style=color:#000>msg.type = </span><span style=color:#4e9a06>&#39;twilio&#39;</span><span style=color:#000;font-weight:700>;</span>
  <span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
    <span style=color:#4e9a06>&#39;phone&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;+79990000001&#39;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#4e9a06>&#39;body&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;some text&#39;</span>
  <span style=color:#000;font-weight:700>};</span>
  <span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>send</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>msg</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-56027f5b7f86e356eca9778287b4e9b7>3.11.7 - Шаблон сообщения</h1>
<p>The <strong>Template</strong> feature allows you to generate and distribute pre-defined messages. It offers the following advantages:</p>
<ul>
<li>Clean code</li>
<li>Different templates for different types</li>
<li>Convenient invocation</li>
</ul>
<h3 id=javascript-properties>JavaScript Properties:</h3>
<hr>
<h3 id=generate-message-from-template>Generate Message from Template</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>tpl = </span><span style=color:#000>template</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>render</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>params</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>Type: string, name of the template</td>
</tr>
<tr>
<td>params</td>
<td>Type: Object, template parameters (e.g., {&lsquo;key&rsquo;:&lsquo;val&rsquo;})</td>
</tr>
<tr>
<td>tpl</td>
<td>Type: string, generated message ready to be sent</td>
</tr>
</tbody>
</table>
<hr>
<h3 id=code-example>Code Example:</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#8f5902;font-style:italic># telegram
</span><span style=color:#8f5902;font-style:italic># ##################################
</span><span style=color:#8f5902;font-style:italic></span>

<span style=color:#000>sendMsg</span> <span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>(body)-&gt;</span>
  <span style=color:#000>tpl = </span><span style=color:#000>template</span>
    <span style=color:#000;font-weight:700>.</span><span style=color:#000>render</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;name&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#39;key&#39;</span><span style=color:#ce5c00;font-weight:700>:</span><span style=color:#4e9a06>&#39;val&#39;</span><span style=color:#000;font-weight:700>})</span>
  
  <span style=color:#000>msg = </span><span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>newMessage</span><span style=color:#000;font-weight:700>();</span>
  <span style=color:#000>msg.type = </span><span style=color:#4e9a06>&#39;telegram&#39;</span><span style=color:#000;font-weight:700>;</span>
  <span style=color:#000>msg.attributes = </span><span style=color:#000;font-weight:700>{</span>
    <span style=color:#4e9a06>&#39;name&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;clavicus&#39;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#4e9a06>&#39;body&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>tpl</span>
  <span style=color:#000;font-weight:700>};</span>
  <span style=color:#000>notifr</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>send</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>msg</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-c611e1f9047c1d78be304f536e42a8a9>3.12 - Scene</h1>
<p>Unfinished article</p>
<h3 id=configuration>Configuration:</h3>
<h3 id=commands>Commands:</h3>
<ul>
<li>Arbitrary set</li>
</ul>
<h3 id=attributes>Attributes:</h3>
<ul>
<li>Arbitrary set</li>
</ul>
<h3 id=status>Status:</h3>
<ul>
<li>Arbitrary set</li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-0a07d6aae278970d2834de3c5c8ba6fd>3.13 - Sensor</h1>
<p>This &ldquo;sensor&rdquo; plugin allows you to create and manage various types of sensors that can measure and track various environmental parameters such as temperature, humidity, light intensity, and other physical quantities.</p>
<p>Creating an abstract device based on the &ldquo;sensor&rdquo; plugin simplifies the process of integrating different sensors into a smart home system. It provides a unified interface for working with different types of sensors, making it easy to retrieve data from them, set their state, and configure their operation parameters.</p>
<p>Thanks to the flexibility and versatility of the &ldquo;sensor&rdquo; plugin, it is suitable for most use cases where working with sensors and obtaining data about the environment&rsquo;s state is required.</p>
<p>The &ldquo;sensor&rdquo; plugin also implements a JavaScript handler called <code>entityAction</code>. This handler is designed to handle actions related to &ldquo;entity&rdquo; type devices based on the &ldquo;sensor&rdquo; plugin.</p>
<p>Example implementation of the <code>entityAction</code> handler:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>entityAction</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>entityId</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>actionName</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>=&gt;</span> <span style=color:#000;font-weight:700>{</span>
  <span style=color:#8f5902;font-style:italic>// Action handling code
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>};</span>
</code></pre></div><p>In this example, the <code>entityAction</code> handler takes two parameters: <code>entityId</code>, representing the identifier of the &ldquo;entity&rdquo; type device, and <code>actionName</code>, representing the name of the action to be performed.</p>
<p>The <code>entityAction</code> handler allows you to perform the necessary logic in response to actions related to &ldquo;entity&rdquo; type devices. Inside the handler, you can access functions and methods of the &ldquo;sensor&rdquo; plugin to perform specific operations, update the devices' state, or interact with other components of the smart home system.</p>
<p>Example usage of the <code>entityAction</code> handler:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>entityManager</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>callAction</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;sensor.sensor123&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;turnOn&#39;</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>In this example, the <code>entityAction</code> handler is called with the device identifier &ldquo;sensor123&rdquo; and the action name &ldquo;turnOn&rdquo;. Inside the handler, you can define the logic associated with executing the required action for the specified device.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-07071769f18bcd958fb6807bfc051634>3.14 - Sun</h1>
<figure>
<img src=/smart-home/sun1.png>
</figure>
<p> </p>
<p> </p>
<p>The &ldquo;sun&rdquo; plugin allows you to retrieve information about the current position and time of the sun based on the specified coordinates (latitude and longitude). It provides various parameters related to the position of the sun throughout the day, as well as sunrise, sunset, twilight, and other moments. The plugin&rsquo;s state can indicate whether the sun is above or below the horizon.</p>
<p>Parameters:</p>
<ol>
<li><code>horizonState</code>: Horizon state</li>
<li><code>phase</code>: Sun phase</li>
<li><code>azimuth</code>: Sun azimuth</li>
<li><code>elevation</code>: Sun elevation above the horizon</li>
<li><code>sunrise</code>: Sunrise time</li>
<li><code>sunset</code>: Sunset time</li>
<li><code>sunriseEnd</code>: Sunrise end time</li>
<li><code>sunsetStart</code>: Sunset start time</li>
<li><code>dawn</code>: Dawn time</li>
<li><code>dusk</code>: Dusk time</li>
<li><code>nauticalDawn</code>: Nautical dawn time</li>
<li><code>nauticalDusk</code>: Nautical dusk time</li>
<li><code>nightEnd</code>: Night end time</li>
<li><code>night</code>: Night time</li>
<li><code>goldenHourEnd</code>: Golden hour end time</li>
<li><code>goldenHour</code>: Golden hour time</li>
<li><code>solarNoon</code>: Solar noon time</li>
<li><code>nadir</code>: Nadir (minimum sun elevation above the horizon)</li>
</ol>
<p>Settings:</p>
<ol>
<li><code>lat</code>: Latitude (geographic latitude)</li>
<li><code>lon</code>: Longitude (geographic longitude)</li>
</ol>
<p>States:</p>
<ol>
<li><code>aboveHorizon</code>: The sun is above the horizon</li>
<li><code>belowHorizon</code>: The sun is below the horizon</li>
</ol>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-e2fff1dd07e3240d15c8fe3dda77a94e>3.15 - Triggers</h1>
<p>The &ldquo;trigger&rdquo; plugin is part of the automation system and provides various types of triggers that initiate specific scenarios in response to specific events.</p>
<p>Please refer to the &ldquo;automation&rdquo; section for more information on how to use the &ldquo;trigger&rdquo; plugin and create automation scenarios.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-4183e9971a270328fbc64107268e1231>3.16 - Updater</h1>
<p>The &ldquo;updated&rdquo; plugin allows the system to check for updates and provides information about the latest version. This is useful for users who want to stay up to date with the latest updates and implement new features or bug fixes. It displays the following parameters:</p>
<ol>
<li><code>latest_version</code>: The number of the latest available version of the <strong>Smart Home</strong> system.</li>
<li><code>latest_version_time</code>: The date and time when the latest version was released.</li>
<li><code>latest_download_url</code>: The URL where the latest version of the system can be downloaded.</li>
<li><code>last_check</code>: The date and time of the last update check.</li>
</ol>
<p>Here&rsquo;s an example of using the &ldquo;updated&rdquo; plugin:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>entity</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>entityManager</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getEntity</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;updater.updater&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>updateInfo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>entity</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getAttributes</span><span style=color:#000;font-weight:700>()</span>

<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Latest version:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>updateInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>latest_version</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Latest version time:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>updateInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>latest_version_time</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Latest download URL:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>updateInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>latest_download_url</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Last check:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>updateInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>last_check</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>This code retrieves the attributes of the &ldquo;updated&rdquo; entity and logs the latest version, release time, download URL, and the last update check time.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-d3da1ca7f3ff8128df9b7a16dfe42fe6>3.17 - Uptime</h1>
<figure>
<img src=/smart-home/uptime1.png>
</figure>
<p> </p>
<p> </p>
<p>In the <strong>Smart Home</strong> system, there is a plugin called &ldquo;uptime&rdquo; that allows displaying the parameters related to the system and application uptime. This plugin provides access to the following parameters:</p>
<ol>
<li>
<p><code>total</code>: The <code>total</code> parameter displays the total uptime of the system or application. It indicates the amount of time that has passed since the start.</p>
</li>
<li>
<p><code>app_started</code>: The <code>app_started</code> parameter indicates the application&rsquo;s start time. It shows the date and time when the application was launched or restarted.</p>
</li>
</ol>
<p>Here&rsquo;s an example of using the &ldquo;uptime&rdquo; plugin to retrieve uptime parameters:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>entity</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>entityManager</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getEntity</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;uptime.uptime&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>uptimeParams</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>entity</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getAttributes</span><span style=color:#000;font-weight:700>()</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>uptimeParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>total</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>uptimeParams</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>app_started</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>You can use these parameters to display information about the system or application uptime in your <strong>Smart Home</strong> project.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-50e5123a4407c924b74ee84b77d3efbf>3.18 - Version</h1>
<p>The &ldquo;version&rdquo; plugin in the system provides information about the version and build of the project. It displays the following parameters:</p>
<ol>
<li><code>version</code>: The project version.</li>
<li><code>revision</code>: The revision identifier (commit) in the version control system.</li>
<li><code>revision_url</code>: The URL where you can view the details of the revision.</li>
<li><code>generated</code>: The date and time of the project build generation.</li>
<li><code>developers</code>: The list of developers involved in the project.</li>
<li><code>build_num</code>: The project&rsquo;s build number.</li>
<li><code>docker_image</code>: The name of the Docker image associated with the project.</li>
<li><code>go_version</code>: The version of the Go programming language used for project development.</li>
</ol>
<p>The &ldquo;version&rdquo; plugin provides access to this information, which is useful for tracking versions and monitoring the development process.</p>
<p>Here&rsquo;s an example of using the &ldquo;version&rdquo; plugin:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>entity</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>entityManager</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getEntity</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;version.version&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>versionInfo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>entity</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getAttributes</span><span style=color:#000;font-weight:700>()</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Project version:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>versionInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>version</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Revision:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>versionInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>revision</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Revision URL:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>versionInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>revision_url</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Generated:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>versionInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>generated</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Developers:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>versionInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>developers</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Build number:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>versionInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>build_num</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Docker image:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>versionInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>docker_image</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Go version:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>versionInfo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>go_version</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>This plugin allows you to obtain up-to-date information about the project version and use it for various purposes such as displaying the version in the user interface or logging.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-64ab3664ef92bf81dcd376de6083e938>3.19 - Weather</h1>
<figure>
<img src=/smart-home/weather1.png>
</figure>
<p> </p>
<p> </p>
<p>In the <strong>Smart Home</strong> system, there is a basic &ldquo;weather&rdquo; plugin that provides the foundation for implementing weather plugins. This plugin enables access to weather information and allows the creation and integration of specific weather plugins for different data sources.</p>
<p>The &ldquo;weather&rdquo; plugin includes a list of weather conditions that can be used to display current weather conditions. Here is the list of weather conditions supported by the &ldquo;weather&rdquo; plugin:</p>
<ol>
<li><code>clearSky</code>: Clear sky.</li>
<li><code>fair</code>: Fair weather.</li>
<li><code>partlyCloudy</code>: Partly cloudy.</li>
<li><code>cloudy</code>: Cloudy.</li>
<li><code>lightRainShowers</code>: Light rain showers.</li>
<li><code>rainShowers</code>: Rain showers.</li>
<li><code>heavyRainShowers</code>: Heavy rain showers.</li>
<li><code>lightRainShowersAndThunder</code>: Light rain showers and thunder.</li>
<li><code>rainShowersAndThunder</code>: Rain showers and thunder.</li>
<li><code>heavyRainShowersAndThunder</code>: Heavy rain showers and thunder.</li>
<li><code>lightSleetShowers</code>: Light sleet showers.</li>
<li><code>sleetShowers</code>: Sleet showers.</li>
<li><code>heavySleetShowers</code>: Heavy sleet showers.</li>
<li><code>lightSleetShowersAndThunder</code>: Light sleet showers and thunder.</li>
<li><code>sleetShowersAndThunder</code>: Sleet showers and thunder.</li>
<li><code>heavySleetShowersAndThunder</code>: Heavy sleet showers and thunder.</li>
<li><code>lightSnowShowers</code>: Light snow showers.</li>
<li><code>snowShowers</code>: Snow showers.</li>
<li><code>heavySnowShowers</code>: Heavy snow showers.</li>
<li><code>lightSnowShowersAndThunder</code>: Light snow showers and thunder.</li>
<li><code>snowShowersAndThunder</code>: Snow showers and thunder.</li>
<li><code>heavySnowShowersAndThunder</code>: Heavy snow showers and thunder.</li>
<li><code>lightRain</code>: Light rain.</li>
<li><code>rain</code>: Rain.</li>
<li><code>heavyRain</code>: Heavy rain.</li>
<li><code>lightRainAndThunder</code>: Light rain and thunder.</li>
<li><code>rainAndThunder</code>: Rain and thunder.</li>
<li><code>heavyRainAndThunder</code>: Heavy rain and thunder.</li>
<li><code>lightSleet</code>: Light sleet.</li>
<li><code>sleet</code>: Sleet.</li>
<li><code>heavySleet</code>: Heavy sleet.</li>
</ol>
<p>The &ldquo;weather&rdquo; plugin has basic settings that allow you to configure its behavior and the display of weather information. Here is a description of the basic settings of the &ldquo;weather&rdquo; plugin:</p>
<ol>
<li><code>lat</code>: Latitude - a numerical value indicating the geographic latitude of the location for retrieving weather data. Providing the correct latitude allows obtaining up-to-date weather for the specified region.</li>
<li><code>lon</code>: Longitude - a numerical value indicating the geographic longitude of the location for retrieving weather data. Providing the correct longitude helps obtain up-to-date weather for the specified region.</li>
<li><code>theme</code>: Theme - a parameter that determines the appearance and style of displaying weather data. Possible values may vary depending on the implementation of the plugin and user settings.</li>
<li><code>winter</code>: Winter - a boolean value indicating which type of weather to display for the winter season. This setting allows adapting the display of weather depending on the time of year.</li>
</ol>
<p>Please note that specific settings and their values may vary depending on the implementation of the &ldquo;weather&rdquo; plugin.</p>
<p>The &ldquo;weather&rdquo; plugin implements the following basic properties for displaying weather:</p>
<ol>
<li><code>main</code>: Main weather description (e.g., &ldquo;Clear&rdquo;, &ldquo;Cloudy&rdquo;, &ldquo;Rain&rdquo;, etc.).</li>
<li><code>datetime</code>: Date and time of the weather data.</li>
<li><code>humidity</code>: Air humidity.</li>
<li><code>max_temperature</code>: Maximum temperature.</li>
<li><code>min_temperature</code>: Minimum temperature.</li>
<li><code>pressure</code>: Atmospheric pressure.</li>
<li><code>wind_bearing</code>: Wind direction.
8</li>
</ol>
<p>. <code>wind_speed</code>: Wind speed.</p>
<p>For each of the five days of weather forecast (day1, day2, day3, day4, day5), similar properties are available, with the corresponding day prefix. For example, for the first day of the forecast, properties like <code>day1_main</code>, <code>day1_datetime</code>, <code>day1_humidity</code>, etc., are accessible.</p>
<p>Example usage of the &ldquo;weather&rdquo; plugin&rsquo;s basic properties:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>weatherPlugin</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>WeatherPlugin</span><span style=color:#000;font-weight:700>();</span>

<span style=color:#8f5902;font-style:italic>// Get current weather data
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>entity</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>entityManager</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getEntity</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;weather_owm.weather1&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>currentWeather</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>entity</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getAttributes</span><span style=color:#000;font-weight:700>()</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>currentWeather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>main</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>currentWeather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>datetime</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>currentWeather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>humidity</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>currentWeather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>max_temperature</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>currentWeather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>min_temperature</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>currentWeather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pressure</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>currentWeather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>wind_bearing</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>currentWeather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>wind_speed</span><span style=color:#000;font-weight:700>);</span>

<span style=color:#8f5902;font-style:italic>// Get weather data for the first day of the forecast
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>entity</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>entityManager</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getEntity</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;weather_owm.weather1&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>day1Weather</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>entity</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getAttributes</span><span style=color:#000;font-weight:700>()</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>day1Weather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>day1_main</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>day1Weather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>day1_datetime</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>day1Weather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>day1_humidity</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>day1Weather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>day1_max_temperature</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>day1Weather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>day1_min_temperature</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>day1Weather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>day1_pressure</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>day1Weather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>day1_wind_bearing</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>day1Weather</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>day1_wind_speed</span><span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>Please note that specific properties and their values may vary depending on the implementation of the &ldquo;weather&rdquo; plugin and the weather data source.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-4e6b5c2d397c558708e54206184aa268>3.19.1 - Met</h1>
<p>Weather forecast from met.no, delivered by the Norwegian Meteorological Institute.</p>
<p>Api version 2.0</p>
<p><a href=https://api.met.no/weatherapi/locationforecast/2.0/classic>https://api.met.no/weatherapi/locationforecast/2.0/classic</a></p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-b2af757d2aed5c975040722fd880df27>3.19.2 - Met</h1>
<p>Weather forecast from openweathermap.org</p>
<p>Api version 2.5</p>
<p><a href=https://api.openweathermap.org/data/2.5/onecall>https://api.openweathermap.org/data/2.5/onecall</a></p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-61b4e27718e29c034a152d0ee2706628>3.20 - Zigbee2mqtt</h1>
<p>The &ldquo;Zigbee2mqtt&rdquo; plugin is part of the system and provides integration between Zigbee devices and an MQTT broker. This plugin allows you to control and manage Zigbee devices through MQTT messages.</p>
<p>The &ldquo;Zigbee2mqtt&rdquo; plugin implements a JavaScript handler called <code>zigbee2mqttEvent</code>, which doesn&rsquo;t take any parameters. Inside the handler, there is an accessible <code>message</code> object that represents the information of the received MQTT message.</p>
<p>The properties of the <code>message</code> object include:</p>
<ol>
<li><code>payload</code>: The value of the message, represented as a dictionary (map) where the keys are strings and the values can be of any type.</li>
<li><code>topic</code>: The MQTT message topic, indicating the source or destination of the message.</li>
<li><code>qos</code>: The Quality of Service level of the MQTT message.</li>
<li><code>duplicate</code>: A flag indicating whether the message is a duplicate.</li>
<li><code>storage</code>: A <code>Storage</code> object that provides access to a data store for caching and retrieving arbitrary values.</li>
<li><code>error</code>: A string containing information about an error if one occurred during message processing.</li>
<li><code>success</code>: A boolean value indicating the successful completion of an operation or message processing.</li>
<li><code>new_state</code>: An <code>Actor.StateParams</code> object representing the new state of an actor after an operation is performed.</li>
</ol>
<p>Here&rsquo;s an example of using the <code>zigbee2mqttEvent</code> handler:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>function</span> <span style=color:#000>zigbee2mqttEvent</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Received MQTT message:&#34;</span><span style=color:#000;font-weight:700>);</span>
    <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Payload:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>payload</span><span style=color:#000;font-weight:700>);</span>
    <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Topic:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>topic</span><span style=color:#000;font-weight:700>);</span>
    <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;QoS:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>qos</span><span style=color:#000;font-weight:700>);</span>
    <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Duplicate:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>duplicate</span><span style=color:#000;font-weight:700>);</span>

    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>error</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
        <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>error</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Error:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>error</span><span style=color:#000;font-weight:700>);</span>
    <span style=color:#000;font-weight:700>}</span> <span style=color:#204a87;font-weight:700>else</span> <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>success</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
        <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Operation successful!&#34;</span><span style=color:#000;font-weight:700>);</span>
        <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;New state:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>new_state</span><span style=color:#000;font-weight:700>);</span>
    <span style=color:#000;font-weight:700>}</span>

    <span style=color:#8f5902;font-style:italic>// Accessing the storage
</span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>storage</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>getByName</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;key&#34;</span><span style=color:#000;font-weight:700>);</span>
    <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Value from storage:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><p>The <code>zigbee2mqttEvent</code> handler can be used to process incoming MQTT messages and perform additional operations based on the received data.</p>
<p>Here&rsquo;s an example in CoffeeScript:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>zigbee2mqttEvent = </span><span style=color:#000>-&gt;</span>
  <span style=color:#8f5902;font-style:italic># Print &#39;---mqtt new event from plug---&#39;
</span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>if</span> <span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>message</span> <span style=color:#ce5c00;font-weight:700>||</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>topic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>includes</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;/set&#39;</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#204a87;font-weight:700>return</span>
  <span style=color:#000>payload = </span><span style=color:#000>unmarshal</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>payload</span>
  <span style=color:#000>attrs =
</span><span style=color:#000></span>    <span style=color:#4e9a06>&#39;consumption&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>consumption</span>
    <span style=color:#4e9a06>&#39;linkquality&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>linkquality</span>
    <span style=color:#4e9a06>&#39;power&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>power</span>
    <span style=color:#4e9a06>&#39;state&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>state</span>
    <span style=color:#4e9a06>&#39;temperature&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>temperature</span>
    <span style=color:#4e9a06>&#39;voltage&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>voltage</span>
  <span style=color:#000>Actor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>setState</span>
    <span style=color:#4e9a06>&#39;new_state&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>state</span>
    <span style=color:#4e9a06>&#39;attribute_values&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>attrs</span>
</code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-coffeescript data-lang=coffeescript><span style=color:#000>zigbee2mqttEvent = </span><span style=color:#000>-&gt;</span>
  <span style=color:#8f5902;font-style:italic># Print &#39;---mqtt new event from button---&#39;
</span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>if</span> <span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>message</span>
    <span style=color:#204a87;font-weight:700>return</span>
  <span style=color:#000>payload = </span><span style=color:#000>unmarshal</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>payload</span>
  <span style=color:#000>attrs =
</span><span style=color:#000></span>    <span style=color:#4e9a06>&#39;battery&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>battery</span>
    <span style=color:#4e9a06>&#39;linkquality&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>linkquality</span>
    <span style=color:#4e9a06>&#39;voltage&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>voltage</span>
  <span style=color:#000>state = </span><span style=color:#4e9a06>&#39;&#39;</span>
  <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>action</span>
    <span style=color:#000>attrs.action = </span><span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>action</span>
    <span style=color:#000>state = </span><span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>action</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#4e9a06>&#34;_action&#34;</span>
  <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>click</span>
    <span style=color:#000>attrs.click = </span><span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>click</span>
    <span style=color:#000>attrs.action = </span><span style=color:#4e9a06>&#34;&#34;</span>
    <span style=color:#000>state = </span><span style=color:#000>payload</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>click</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#4e9a06>&#34;_click&#34;</span>
  <span style=color:#000>Actor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>setState</span>
    <span style=color:#4e9a06>&#39;new_state&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>state</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>toUpperCase</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#4e9a06>&#39;attribute_values&#39;</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>attrs</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-3d0aa008355dfb5e447bc3db96976c8e>3.21 - Zone</h1>
<p>Unfinished article</p>
<h3 id=configuration>Configuration:</h3>
<h3 id=commands>Commands:</h3>
<ul>
<li>Arbitrary set</li>
</ul>
<h3 id=attributes>Attributes:</h3>
<ul>
<li>Arbitrary set</li>
</ul>
<h3 id=status>Status:</h3>
<ul>
<li>Arbitrary set</li>
</ul>
</div>
</main>
</div>
</div>
<footer class="bg-dark py-5 row d-print-none">
<div class="container-fluid mx-sm-5">
<div class=row>
<div class="col-6 col-sm-4 text-xs-center order-sm-2">
</div>
<div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub>
<a class=text-white target=_blank rel=noopener href=https://github.com/e154/smart-home aria-label=GitHub>
<i class="fab fa-github"></i>
</a>
</li>
</ul>
</div>
<div class="col-12 col-sm-4 text-center py-2 order-sm-2">
<small class=text-white>&copy; 2023 Powered by <a href=http://e154.ru>e154.ru</a></small>
<div><small class="ml-1 text-white"><a href=https://github.com/e154/smart-home/blob/master/LICENSE>MIT</a> License Code Documents <a href=http://creativecommons.org/licenses/by/3.0/>CC BY 3.0</a></small></div>
</div>
</div>
</div>
</footer>
</div>
<script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script>
<script src=/smart-home/js/tabpane-persist.js></script>
<script src=/smart-home/js/main.min.307d9740a83ff885dafd50af6ce4f79e2146b78e74ee078b11b627d0d02146a9.js integrity="sha256-MH2XQKg/+IXa/VCvbOT3niFGt4507geLEbYn0NAhRqk=" crossorigin=anonymous></script>
</body>
</html>